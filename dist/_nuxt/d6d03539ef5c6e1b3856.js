/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{109:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(60),o=n(79),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,o=e.optional,c=this.normalizeInstanceIdentifier(n);try{var h=this.getOrInitializeService(c);if(!h){if(o)return null;throw Error("Service "+this.name+" is not available")}return h}catch(t){if(o)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(component){var t,e;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=component,function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var n=r.__values(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var c=r.__read(o.value,2),h=c[0],f=c[1],l=this.normalizeInstanceIdentifier(h);try{var d=this.getOrInitializeService(l);f.resolve(d)}catch(t){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var f=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(component){var t=this.getProvider(component.name);if(t.isComponentSet())throw new Error("Component "+component.name+" has already been registered with "+this.name);t.setComponent(component)},t.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=c,e.ComponentContainer=f,e.Provider=h},110:function(t,e,n){"use strict";function r(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}var o;n.r(e),n.d(e,"LogLevel",(function(){return c})),n.d(e,"Logger",(function(){return y})),n.d(e,"setLogLevel",(function(){return m})),n.d(e,"setUserLogHandler",(function(){return w}));var c,h=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(c||(c={}));var f={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},l=c.INFO,d=((o={})[c.DEBUG]="log",o[c.VERBOSE]="log",o[c.INFO]="info",o[c.WARN]="warn",o[c.ERROR]="error",o),v=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var c=(new Date).toISOString(),h=d[e];if(!h)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[h].apply(console,r(["["+c+"]  "+t.name+":"],n))}},y=function(){function t(t){this.name=t,this._logLevel=l,this._logHandler=v,this._userLogHandler=null,h.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in c))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.DEBUG],t)),this._logHandler.apply(this,r([this,c.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.VERBOSE],t)),this._logHandler.apply(this,r([this,c.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.INFO],t)),this._logHandler.apply(this,r([this,c.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.WARN],t)),this._logHandler.apply(this,r([this,c.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.ERROR],t)),this._logHandler.apply(this,r([this,c.ERROR],t))},t}();function m(t){var e="string"==typeof t?f[t]:t;h.forEach((function(t){t.logLevel=e}))}function w(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=f[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var o=[],h=2;h<arguments.length;h++)o[h-2]=arguments[h];var f=o.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:c[n].toLowerCase(),message:f,args:o,type:e.name})}},r=0,o=h;r<o.length;r++){n(o[r])}}},119:function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)}))}},121:function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(t,e){return!1!==e.clone&&e.isMergeableObject(t)?v((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function h(t,source,e){return t.concat(source).map((function(element){return c(element,e)}))}function f(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(symbol){return t.propertyIsEnumerable(symbol)})):[]}(t))}function l(object,t){try{return t in object}catch(t){return!1}}function d(t,source,e){var n={};return e.isMergeableObject(t)&&f(t).forEach((function(r){n[r]=c(t[r],e)})),f(source).forEach((function(r){(function(t,e){return l(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(l(t,r)&&e.isMergeableObject(source[r])?n[r]=function(t,e){if(!e.customMerge)return v;var n=e.customMerge(t);return"function"==typeof n?n:v}(r,e)(t[r],source[r],e):n[r]=c(source[r],e))})),n}function v(t,source,e){(e=e||{}).arrayMerge=e.arrayMerge||h,e.isMergeableObject=e.isMergeableObject||r,e.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(t)?n?e.arrayMerge(t,source,e):d(t,source,e):c(source,e)}v.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return v(t,n,e)}),{})};var y=v;t.exports=y},122:function(t,e){function n(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)}t.exports=function t(e,r){if(!n(e))return t({},r);if(!n(r))return t(e,{});var o=Object.assign({},r);return Object.keys(e).forEach((function(r){if("__proto__"!==r&&"constructor"!==r){var c=e[r];null!==c&&(n(c)&&n(o[r])?o[r]=t(c,o[r]):o[r]=c)}})),o}},124:function(t,e,n){"use strict";n(170)},125:function(t,e,n){"use strict";n(169)},169:function(t,e,n){"use strict";(function(t){var e=n(2),r=n.n(e);(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,t){a!=Array.prototype&&a!=Object.prototype&&(a[b]=t.value)};var o=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,a];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}return globalThis}(this);function c(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function h(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:c(a)}}!function(a,b){if(b){var t=o;a=a.split(".");for(var e=0;e<a.length-1;e++){var r=a[e];r in t||(t[r]={}),t=t[r]}(b=b(e=t[a=a[a.length-1]]))!=e&&null!=b&&n(t,a,{configurable:!0,writable:!0,value:b})}}("Promise",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{g(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function e(g){return g instanceof b?g:new b((function(t){t(g)}))}if(a)return a;t.prototype.b=function(g){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(g)};var n=o.setTimeout;t.prototype.c=function(g){n(g,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var t=0;t<g.length;++t){var e=g[t];g[t]=null;try{e()}catch(t){this.f(t)}}}this.a=null},t.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(p){return function(n){e||(e=!0,p.call(t,n))}}var t=this,e=!1;return{resolve:g(this.m),reject:g(this.g)}},b.prototype.m=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.s(g);else{t:switch(typeof g){case"object":var t=null!=g;break t;case"function":t=!0;break t;default:t=!1}t?this.u(g):this.h(g)}},b.prototype.u=function(g){var t=void 0;try{t=g.then}catch(t){return void this.g(t)}"function"==typeof t?this.w(t,g):this.h(g)},b.prototype.g=function(g){this.i(2,g)},b.prototype.h=function(g){this.i(1,g)},b.prototype.i=function(g,t){if(0!=this.b)throw Error("Cannot settle("+g+", "+t+"): Promise already settled in state"+this.b);this.b=g,this.c=t,this.l()},b.prototype.l=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)r.b(this.a[g]);this.a=null}};var r=new t;return b.prototype.s=function(g){var t=this.f();g.Oa(t.resolve,t.reject)},b.prototype.w=function(g,t){var e=this.f();try{g.call(t,e.resolve,e.reject)}catch(t){e.reject(t)}},b.prototype.then=function(g,t){function e(t,e){return"function"==typeof t?function(e){try{p(t(e))}catch(t){n(t)}}:e}var p,n,r=new b((function(t,e){p=t,n=e}));return this.Oa(e(g,p),e(t,n)),r},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.Oa=function(g,t){function e(){switch(p.b){case 1:g(p.c);break;case 2:t(p.c);break;default:throw Error("Unexpected state: "+p.b)}}var p=this;null==this.a?r.b(e):this.a.push(e)},b.resolve=e,b.reject=function(g){return new b((function(t,e){e(g)}))},b.race=function(g){return new b((function(t,n){for(var p=h(g),r=p.next();!r.done;r=p.next())e(r.value).Oa(t,n)}))},b.all=function(g){var t=h(g),n=t.next();return n.done?e([]):new b((function(p,r){function o(t){return function(e){c[t]=e,0==--h&&p(c)}}var c=[],h=0;do{c.push(void 0),h++,e(n.value).Oa(o(c.length-1),r),n=t.next()}while(!n.done)}))},b}));var f=f||{},l=this||self,d=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function m(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function w(a){var b=m(a);return"array"==b||"object"==b&&"number"==typeof a.length}function I(a){return"function"==m(a)}function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function T(a){return Object.prototype.hasOwnProperty.call(a,E)&&a[E]||(a[E]=++_)}var E="closure_uid_"+(1e9*Math.random()>>>0),_=0;function A(a,b,t){return a.call.apply(a.bind,arguments)}function N(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function S(a,b,t){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?A:N).apply(null,arguments)}function k(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var O=Date.now||function(){return+new Date};function D(a,b){function t(){}t.prototype=b.prototype,a.Za=b.prototype,a.prototype=new t,a.prototype.constructor=a}function u(a,b,t){this.code=P+a,this.message=b||L[a]||"",this.a=t||null}function R(a){var b=a&&a.code;return b?new u(b.substring(P.length),a.message,a.serverResponse):null}D(u,Error),u.prototype.v=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},u.prototype.toJSON=function(){return this.v()};var C,P="auth/",L={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function M(a){for(var b in x)if(x[b].id===a)return{firebaseEndpoint:(a=x[b]).Ra,secureTokenEndpoint:a.Xa,identityPlatformEndpoint:a.Ua};return null}function U(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(t){return!1}}function V(a){if(Error.captureStackTrace)Error.captureStackTrace(this,V);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function j(a,b){for(var t="",e=(a=a.split("%s")).length-1,n=0;n<e;n++)t+=a[n]+(n<b.length?b[n]:"%s");V.call(this,t+a[e])}function F(a,b){throw new j("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function B(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function G(a,b){a.f(b),100>a.b&&(a.b++,b.next=a.a,a.a=b)}function K(){this.b=this.a=null}C=M("__EID__")?"__EID__":void 0,D(V,Error),V.prototype.name="CustomError",D(j,V),j.prototype.name="AssertionError",B.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var W=new B((function(){return new H}),(function(a){a.reset()}));function z(){var a=Ae,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function H(){this.next=this.b=this.a=null}K.prototype.add=function(a,b){var t=W.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},H.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var Y=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},X=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};var J=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=[],n=0,r="string"==typeof a?a.split(""):a,g=0;g<t;g++)if(g in r){var o=r[g];b.call(void 0,o,g,a)&&(e[n++]=o)}return e},Q=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=Array(t),n="string"==typeof a?a.split(""):a,r=0;r<t;r++)r in n&&(e[r]=b.call(void 0,n[r],r,a));return e},$=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a))return!0;return!1};function Z(a,b){return 0<=Y(a,b)}function tt(a,b){var t;return(t=0<=(b=Y(a,b)))&&Array.prototype.splice.call(a,b,1),t}function et(a,b){!function(a,b){for(var t="string"==typeof a?a.split(""):a,e=a.length-1;0<=e;--e)e in t&&b.call(void 0,t[e],e,a)}(a,(function(t,e){b.call(void 0,t,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&0}))}function nt(a){return Array.prototype.concat.apply([],arguments)}function it(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}var ot,st=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},at=/&/g,ut=/</g,ct=/>/g,ht=/"/g,ft=/'/g,lt=/\x00/g,pt=/[\x00&<>"']/;function vt(a,b){return-1!=a.indexOf(b)}function yt(a,b){return a<b?-1:a>b?1:0}t:{var mt=l.navigator;if(mt){var gt=mt.userAgent;if(gt){ot=gt;break t}}ot=""}function bt(a){return vt(ot,a)}function wt(a,b){for(var t in a)b.call(void 0,a[t],t,a)}function It(a){for(var b in a)return!1;return!0}function Tt(a){var t,b={};for(t in a)b[t]=a[t];return b}var Et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<Et.length;r++)t=Et[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function At(a,b){t:{try{var t=a&&a.ownerDocument,e=t&&(t.defaultView||t.parentWindow);if((e=e||l).Element&&e.Location){var n=e;break t}}catch(t){}n=null}if(n&&void 0!==n[b]&&(!a||!(a instanceof n[b])&&(a instanceof n.Location||a instanceof n.Element))){if(q(a))try{var r=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(t){r="<object could not be stringified>"}else r=void 0===a?"undefined":null===a?"null":typeof a;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",b,r)}}function Nt(a,b){this.a=a===Ot&&b||"",this.b=kt}function St(a){return a instanceof Nt&&a.constructor===Nt&&a.b===kt?a.a:(F("expected object of type Const, got '"+a+"'"),"type_error:Const")}Nt.prototype.ra=!0,Nt.prototype.qa=function(){return this.a},Nt.prototype.toString=function(){return"Const{"+this.a+"}"};var kt={},Ot={},Dt=new Nt(Ot,"");function Rt(a,b){this.a=a===Ut&&b||"",this.b=Mt}function Ct(a){return a instanceof Rt&&a.constructor===Rt&&a.b===Mt?a.a:(F("expected object of type TrustedResourceUrl, got '"+a+"' of type "+m(a)),"type_error:TrustedResourceUrl")}function Pt(a,b){var t=St(a);if(!xt.test(t))throw Error("Invalid TrustedResourceUrl format: "+t);return a=t.replace(Lt,(function(e,n){if(!Object.prototype.hasOwnProperty.call(b,n))throw Error('Found marker, "'+n+'", in format string, "'+t+'", but no valid label mapping found in args: '+JSON.stringify(b));return(e=b[n])instanceof Nt?St(e):encodeURIComponent(String(e))})),new Rt(Ut,a)}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Lt=/%{(\w+)}/g,xt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Mt={},Ut={};function Vt(a,b){this.a=a===Gt&&b||"",this.b=Bt}function jt(a){return a instanceof Vt&&a.constructor===Vt&&a.b===Bt?a.a:(F("expected object of type SafeUrl, got '"+a+"' of type "+m(a)),"type_error:SafeUrl")}Vt.prototype.ra=!0,Vt.prototype.qa=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ft=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function qt(a){return a instanceof Vt?a:(a="object"==typeof a&&a.ra?a.qa():String(a),Ft.test(a)||(a="about:invalid#zClosurez"),new Vt(Gt,a))}var Bt={},Gt={};function Kt(){this.a="",this.b=zt}function Wt(a){return a instanceof Kt&&a.constructor===Kt&&a.b===zt?a.a:(F("expected object of type SafeHtml, got '"+a+"' of type "+m(a)),"type_error:SafeHtml")}Kt.prototype.ra=!0,Kt.prototype.qa=function(){return this.a.toString()},Kt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var zt={};function Ht(a){var b=new Kt;return b.a=a,b}Ht("<!DOCTYPE html>");var Yt=Ht("");function Xt(a,b){for(var t=a.split("%s"),e="",n=Array.prototype.slice.call(arguments,1);n.length&&1<t.length;)e+=t.shift()+n.shift();return e+t.join("%s")}function Jt(a){return pt.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(at,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(ut,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(ct,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ht,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(ft,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(lt,"&#0;"))),a}function Qt(a){return Qt[" "](a),a}Ht("<br>"),Qt[" "]=y;var $t,a,Zt=bt("Opera"),te=bt("Trident")||bt("MSIE"),ee=bt("Edge"),ne=ee||te,re=bt("Gecko")&&!(vt(ot.toLowerCase(),"webkit")&&!bt("Edge"))&&!(bt("Trident")||bt("MSIE"))&&!bt("Edge"),ie=vt(ot.toLowerCase(),"webkit")&&!bt("Edge");function oe(){var a=l.document;return a?a.documentMode:void 0}t:{var se="",ae=(a=ot,re?/rv:([^\);]+)(\)|;)/.exec(a):ee?/Edge\/([\d\.]+)/.exec(a):te?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):ie?/WebKit\/(\S+)/.exec(a):Zt?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(ae&&(se=ae?ae[1]:""),te){var ue=oe();if(null!=ue&&ue>parseFloat(se)){$t=String(ue);break t}}$t=se}var ce,he={};function fe(a){return function(a,b){var t=he;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=st(String($t)).split("."),e=st(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var g=t[r]||"",o=e[r]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==g[0].length&&0==o[0].length)break;b=yt(0==g[1].length?0:parseInt(g[1],10),0==o[1].length?0:parseInt(o[1],10))||yt(0==g[2].length,0==o[2].length)||yt(g[2],o[2]),g=g[3],o=o[3]}while(0==b)}return 0<=b}))}ce=l.document&&te?oe():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(a){}var le=!te||9<=Number(ce);function pe(a){var b=document;return"string"==typeof a?b.getElementById(a):a}function de(a,b){wt(b,(function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?a.style.cssText=t:"class"==e?a.className=t:"for"==e?a.htmlFor=t:me.hasOwnProperty(e)?a.setAttribute(me[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,t):a[e]=t}))}var ve,ye,me={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(a,b,t){function e(g){g&&b.appendChild("string"==typeof g?a.createTextNode(g):g)}for(var n=2;n<t.length;n++){var r=t[n];!w(r)||q(r)&&0<r.nodeType?e(r):X(we(r)?it(r):r,e)}}function be(a,b){return b=String(b),"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase()),a.createElement(b)}function we(a){if(a&&"number"==typeof a.length){if(q(a))return"function"==typeof a.item||"string"==typeof a.item;if(I(a))return"function"==typeof a.item}return!1}function Ie(a){l.setTimeout((function(){throw a}),0)}function Te(){var a=l.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!bt("Presto")&&(a=function(){var t=be(document,"IFRAME");t.style.display="none",function(a){var b=new Rt(Ut,St(Dt));At(a,"HTMLIFrameElement"),a.src=Ct(b).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Wt(Yt)),t.close();var g="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=S((function(t){"*"!=n&&t.origin!=n||t.data!=g||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(g,n)}}}),void 0!==a&&!bt("Trident")&&!bt("MSIE")){var b=new a,t={},e=t;return b.port1.onmessage=function(){if(void 0!==t.next){var e=(t=t.next).Db;t.Db=null,e()}},function(t){e.next={Db:t},e=e.next,b.port2.postMessage(0)}}return function(t){l.setTimeout(t,0)}}function Ee(a,b){ye||function(){if(l.Promise&&l.Promise.resolve){var a=l.Promise.resolve(void 0);ye=function(){a.then(Ne)}}else ye=function(){var b=Ne;!I(l.setImmediate)||l.Window&&l.Window.prototype&&!bt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ve||(ve=Te()),ve(b)):l.setImmediate(b)}}(),_e||(ye(),_e=!0),Ae.add(a,b)}var _e=!1,Ae=new K;function Ne(){for(var a;a=z();){try{a.a.call(a.b)}catch(t){Ie(t)}G(W,a)}_e=!1}function Se(a,b){if(this.a=ke,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=y)try{var t=this;a.call(b,(function(e){Fe(t,Oe,e)}),(function(e){if(!(e instanceof He))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Fe(t,De,e)}))}catch(t){Fe(this,De,t)}}var ke=0,Oe=2,De=3;function Re(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Re.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new B((function(){return new Re}),(function(a){a.reset()}));function Pe(a,b,t){var e=Ce.get();return e.g=a,e.b=b,e.f=t,e}function Le(a){if(a instanceof Se)return a;var b=new Se(y);return Fe(b,Oe,a),b}function xe(a){return new Se((function(b,t){t(a)}))}function Me(a,b,t){qe(a,b,t,null)||Ee(k(b,a))}function Ue(a){return new Se((function(b){var t=a.length,e=[];if(t)for(var n=function(n,r,p){t--,e[n]=r?{Mb:!0,value:p}:{Mb:!1,reason:p},0==t&&b(e)},r=0;r<a.length;r++)Me(a[r],k(n,r,!0),k(n,r,!1));else b(e)}))}function Ve(a,b){a.b||a.a!=Oe&&a.a!=De||Be(a),a.f?a.f.next=b:a.b=b,a.f=b}function je(a,b,t,e){var n=Pe(null,null,null);return n.a=new Se((function(r,g){n.g=b?function(t){try{var n=b.call(e,t);r(n)}catch(t){g(t)}}:r,n.b=t?function(n){try{var o=t.call(e,n);void 0===o&&n instanceof He?g(n):r(o)}catch(t){g(t)}}:g})),n.a.c=a,Ve(a,n),n.a}function Fe(a,b,t){a.a==ke&&(a===t&&(b=De,t=new TypeError("Promise cannot resolve to itself")),a.a=1,qe(t,a.Yc,a.Zc,a)||(a.i=t,a.a=b,a.c=null,Be(a),b!=De||t instanceof He||function(a,b){a.g=!0,Ee((function(){a.g&&ze.call(null,b)}))}(a,t)))}function qe(a,b,t,e){if(a instanceof Se)return Ve(a,Pe(b||y,t||null,e)),!0;if(U(a))return a.then(b,t,e),!0;if(q(a))try{var n=a.then;if(I(n))return function(a,b,t,e,n){function r(t){o||(o=!0,e.call(n,t))}var o=!1;try{b.call(a,(function(e){o||(o=!0,t.call(n,e))}),r)}catch(t){r(t)}}(a,n,b,t,e),!0}catch(n){return t.call(e,n),!0}return!1}function Be(a){a.h||(a.h=!0,Ee(a.ec,a))}function Ge(a){var b=null;return a.b&&(b=a.b,a.b=b.next,b.next=null),a.b||(a.f=null),b}function Ke(a,b,t,e){if(t==De&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,We(b,t,e);else try{b.c?b.g.call(b.f):We(b,t,e)}catch(t){ze.call(null,t)}G(Ce,b)}function We(a,b,t){b==Oe?a.g.call(a.f,t):a.b&&a.b.call(a.f,t)}Se.prototype.then=function(a,b,t){return je(this,I(a)?a:null,I(b)?b:null,t)},Se.prototype.$goog_Thenable=!0,(e=Se.prototype).ma=function(a,b){return(a=Pe(a,a,b)).c=!0,Ve(this,a),this},e.o=function(a,b){return je(this,null,a,b)},e.cancel=function(a){if(this.a==ke){var b=new He(a);Ee((function(){!function t(a,b){if(a.a==ke)if(a.c){var e=a.c;if(e.b){for(var n=0,r=null,o=null,g=e.b;g&&(g.c||(n++,g.a==a&&(r=g),!(r&&1<n)));g=g.next)r||(o=g);r&&(e.a==ke&&1==n?t(e,b):(o?((n=o).next==e.f&&(e.f=n),n.next=n.next.next):Ge(e),Ke(e,r,De,b)))}a.c=null}else Fe(a,De,b)}(this,b)}),this)}},e.Yc=function(a){this.a=ke,Fe(this,Oe,a)},e.Zc=function(a){this.a=ke,Fe(this,De,a)},e.ec=function(){for(var a;a=Ge(this);)Ke(this,a,this.a,this.i);this.h=!1};var ze=Ie;function He(a){V.call(this,a)}function Ye(){0!=Xe&&(Je[T(this)]=this),this.wa=this.wa,this.na=this.na}D(He,V),He.prototype.name="cancel";var Xe=0,Je={};function Qe(a){if(!a.wa&&(a.wa=!0,a.Ba(),0!=Xe)){var b=T(a);if(0!=Xe&&a.na&&0<a.na.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Je[b]}}Ye.prototype.wa=!1,Ye.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var $e=Object.freeze||function(a){return a},Ze=!te||9<=Number(ce),tn=te&&!fe("9"),en=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{l.addEventListener("test",y,b),l.removeEventListener("test",y,b)}catch(t){}return a}();function nn(a,b){this.type=a,this.b=this.target=b,this.defaultPrevented=!1}function rn(a,b){if(nn.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=b,b=a.relatedTarget){if(re){t:{try{Qt(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:on[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}nn.prototype.preventDefault=function(){this.defaultPrevented=!0},D(rn,nn);var on=$e({2:"touch",3:"pen",4:"mouse"});rn.prototype.preventDefault=function(){rn.Za.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,tn)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}},rn.prototype.f=function(){return this.a};var sn="closure_listenable_"+(1e6*Math.random()|0),an=0;function un(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.Ta=n,this.key=++an,this.ua=this.Na=!1}function cn(a){a.ua=!0,a.listener=null,a.proxy=null,a.src=null,a.Ta=null}function dd(a){this.src=a,this.a={},this.b=0}function hn(a,b){var t=b.type;t in a.a&&tt(a.a[t],b)&&(cn(b),0==a.a[t].length&&(delete a.a[t],a.b--))}function fn(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.ua&&r.listener==b&&r.capture==!!t&&r.Ta==e)return n}return-1}dd.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var g=fn(a,b,e,n);return-1<g?(b=a[g],t||(b.Na=!1)):((b=new un(b,this.src,r,!!e,n)).Na=t,a.push(b)),b};var ln="closure_lm_"+(1e6*Math.random()|0),pn={};function dn(a,b,t,e,n){if(e&&e.once)yn(a,b,t,e,n);else if(Array.isArray(b))for(var r=0;r<b.length;r++)dn(a,b[r],t,e,n);else t=_n(t),a&&a[sn]?Nn(a,b,t,q(e)?!!e.capture:!!e,n):vn(a,b,t,!1,e,n)}function vn(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var g=q(n)?!!n.capture:!!n,o=Tn(a);if(o||(a[ln]=o=new dd(a)),!(t=o.add(b,t,e,g,r)).proxy){if(e=function(){var a=In,b=Ze?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)en||(n=g),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(gn(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}0}}function yn(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)yn(a,b[r],t,e,n);else t=_n(t),a&&a[sn]?Sn(a,b,t,q(e)?!!e.capture:!!e,n):vn(a,b,t,!0,e,n)}function td(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)td(a,b[r],t,e,n);else e=q(e)?!!e.capture:!!e,t=_n(t),a&&a[sn]?(a=a.u,(b=String(b).toString())in a.a&&(-1<(t=fn(r=a.a[b],t,e,n))&&(cn(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete a.a[b],a.b--)))):a&&(a=Tn(a))&&(b=a.a[b.toString()],a=-1,b&&(a=fn(b,t,e,n)),(t=-1<a?b[a]:null)&&mn(t))}function mn(a){if("number"!=typeof a&&a&&!a.ua){var b=a.src;if(b&&b[sn])hn(b.u,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(gn(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=Tn(b))?(hn(t,a),0==t.b&&(t.src=null,b[ln]=null)):cn(a)}}}function gn(a){return a in pn?pn[a]:pn[a]="on"+a}function bn(a,b,t,e){var n=!0;if((a=Tn(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var r=b[a];r&&r.capture==t&&!r.ua&&(r=wn(r,e),n=n&&!1!==r)}return n}function wn(a,b){var t=a.listener,e=a.Ta||a.src;return a.Na&&mn(a),t.call(e,b)}function In(a,b){if(a.ua)return!0;if(!Ze){if(!b)t:{b=["window","event"];for(var t=l,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}if(b=new rn(e=b,this),t=!0,!(0>e.keyCode||null!=e.returnValue)){t:{var n=!1;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(t){n=!0}(n||null==e.returnValue)&&(e.returnValue=!0)}for(e=[],n=b.b;n;n=n.parentNode)e.push(n);for(a=a.type,n=e.length-1;0<=n;n--){b.b=e[n];var r=bn(e[n],a,!0,b);t=t&&r}for(n=0;n<e.length;n++)b.b=e[n],r=bn(e[n],a,!1,b),t=t&&r}return t}return wn(a,new rn(b,this))}function Tn(a){return(a=a[ln])instanceof dd?a:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(a){return I(a)?a:(a[En]||(a[En]=function(b){return a.handleEvent(b)}),a[En])}function An(){Ye.call(this),this.u=new dd(this),this.Yb=this,this.eb=null}function Nn(a,b,t,e,n){a.u.add(String(b),t,!1,e,n)}function Sn(a,b,t,e,n){a.u.add(String(b),t,!0,e,n)}function kn(a,b,t,e){if(!(b=a.u.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var g=b[r];if(g&&!g.ua&&g.capture==t){var o=g.listener,c=g.Ta||g.src;g.Na&&hn(a.u,g),n=!1!==o.call(c,e)&&n}}return n&&!e.defaultPrevented}function On(a,b,t){if(I(a))t&&(a=S(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=S(a.handleEvent,a)}return 2147483647<Number(b)?-1:l.setTimeout(a,b||0)}function Dn(a){var b=null;return new Se((function(t,e){-1==(b=On((function(){t(void 0)}),a))&&e(Error("Failed to schedule timer."))})).o((function(t){throw l.clearTimeout(b),t}))}function Rn(a){if(a.V&&"function"==typeof a.V)return a.V();if("string"==typeof a)return a.split("");if(w(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}function Cn(a){if(a.X&&"function"==typeof a.X)return a.X();if(!a.V||"function"!=typeof a.V){if(w(a)||"string"==typeof a){var b=[];a=a.length;for(var t=0;t<a;t++)b.push(t);return b}for(var e in b=[],t=0,a)b[t++]=e;return b}}function Pn(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Pn)for(t=a.X(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Ln(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];xn(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)xn(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function xn(a,b){return Object.prototype.hasOwnProperty.call(a,b)}D(An,Ye),An.prototype[sn]=!0,An.prototype.addEventListener=function(a,b,t,e){dn(this,a,b,t,e)},An.prototype.removeEventListener=function(a,b,t,e){td(this,a,b,t,e)},An.prototype.dispatchEvent=function(a){var b,t=this.eb;if(t)for(b=[];t;t=t.eb)b.push(t);t=this.Yb;var e=a.type||a;if("string"==typeof a)a=new nn(a,t);else if(a instanceof nn)a.target=a.target||t;else{var n=a;_t(a=new nn(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var g=a.b=b[r];n=kn(g,e,!0,a)&&n}if(n=kn(g=a.b=t,e,!0,a)&&n,n=kn(g,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=kn(g=a.b=b[r],e,!1,a)&&n;return n},An.prototype.Ba=function(){if(An.Za.Ba.call(this),this.u){var t,a=this.u;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)cn(e[n]);delete a.a[t],a.b--}}this.eb=null},(e=Pn.prototype).V=function(){Ln(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},e.X=function(){return Ln(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(a,b){return xn(this.b,a)?this.b[a]:b},e.set=function(a,b){xn(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},e.forEach=function(a,b){for(var t=this.X(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Un(a,b){var t;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,a instanceof Un?(this.h=void 0!==b?b:a.h,Vn(this,a.f),this.i=a.i,this.b=a.b,jn(this,a.l),this.c=a.c,Fn(this,sr(a.a)),this.g=a.g):a&&(t=String(a).match(Mn))?(this.h=!!b,Vn(this,t[1]||"",!0),this.i=Wn(t[2]||""),this.b=Wn(t[3]||"",!0),jn(this,t[4]),this.c=Wn(t[5]||"",!0),Fn(this,t[6]||"",!0),this.g=Wn(t[7]||"")):(this.h=!!b,this.a=new Zn(null,this.h))}function Vn(a,b,t){a.f=t?Wn(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function jn(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.l=b}else a.l=null}function Fn(a,b,t){b instanceof Zn?(a.a=b,function(a,b){b&&!a.f&&(er(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(rr(this,e),or(this,n,t))}),a)),a.f=b}(a.a,a.h)):(t||(b=zn(b,Qn)),a.a=new Zn(b,a.h))}function qn(a,b,t){a.a.set(b,t)}function Bn(a,b){return a.a.get(b)}function Gn(a){return a instanceof Un?new Un(a):new Un(a,void 0)}function Kn(a,b){var t=new Un(null,void 0);return Vn(t,"https"),a&&(t.b=a),b&&(t.c=b),t}function Wn(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function zn(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,Hn),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Hn(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Un.prototype.toString=function(){var a=[],b=this.f;b&&a.push(zn(b,Yn,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.i)&&a.push(zn(b,Yn,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.l)&&a.push(":",String(t))),(t=this.c)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(zn(t,"/"==t.charAt(0)?Jn:Xn,!0))),(t=this.a.toString())&&a.push("?",t),(t=this.g)&&a.push("#",zn(t,$n)),a.join("")},Un.prototype.resolve=function(a){var b=new Un(this),t=!!a.f;t?Vn(b,a.f):t=!!a.i,t?b.i=a.i:t=!!a.b,t?b.b=a.b:t=null!=a.l;var e=a.c;if(t)jn(b,a.l);else if(t=!!a.c){if("/"!=e.charAt(0))if(this.b&&!this.c)e="/"+e;else{var n=b.c.lastIndexOf("/");-1!=n&&(e=b.c.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(vt(n,"./")||vt(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],g=0;g<n.length;){var o=n[g++];"."==o?e&&g==n.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&g==n.length&&r.push("")):(r.push(o),e=!0)}e=r.join("/")}else e=n}return t?b.c=e:t=""!==a.a.toString(),t?Fn(b,sr(a.a)):t=!!a.g,t&&(b.g=a.g),b};var Yn=/[#\/\?@]/g,Xn=/[#\?:]/g,Jn=/[#\?]/g,Qn=/[#\?@]/g,$n=/#/g;function Zn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function er(a){a.a||(a.a=new Pn,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function nr(a){var b=Cn(a);if(void 0===b)throw Error("Keys are undefined");var t=new Zn(null,void 0);a=Rn(a);for(var e=0;e<b.length;e++){var n=b[e],r=a[e];Array.isArray(r)?or(t,n,r):t.add(n,r)}return t}function rr(a,b){er(a),b=ar(a,b),xn(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,xn((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Ln(a)))}function ir(a,b){return er(a),b=ar(a,b),xn(a.a.b,b)}function or(a,b,t){rr(a,b),0<t.length&&(a.c=null,a.a.set(ar(a,b),it(t)),a.b+=t.length)}function sr(a){var b=new Zn;return b.c=a.c,a.a&&(b.a=new Pn(a.a),b.b=a.b),b}function ar(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function ur(a){var b=[];return function t(a,b,e){if(null==b)e.push("null");else{if("object"==typeof b){if(Array.isArray(b)){var n=b;b=n.length,e.push("[");for(var r="",o=0;o<b;o++)e.push(r),t(a,n[o],e),r=",";return void e.push("]")}if(!(b instanceof String||b instanceof Number||b instanceof Boolean)){for(n in e.push("{"),r="",b)Object.prototype.hasOwnProperty.call(b,n)&&("function"!=typeof(o=b[n])&&(e.push(r),pr(n,e),e.push(":"),t(a,o,e),r=","));return void e.push("}")}b=b.valueOf()}switch(typeof b){case"string":pr(b,e);break;case"number":e.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":e.push(String(b));break;case"function":e.push("null");break;default:throw Error("Unknown type: "+typeof b)}}}(new cr,a,b),b.join("")}function cr(){}(e=Zn.prototype).add=function(a,b){er(this),this.c=null,a=ar(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(a,b){er(this),this.a.forEach((function(t,e){X(t,(function(t){a.call(b,t,e,this)}),this)}),this)},e.X=function(){er(this);for(var a=this.a.V(),b=this.a.X(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},e.V=function(a){er(this);var b=[];if("string"==typeof a)ir(this,a)&&(b=nt(b,this.a.get(ar(this,a))));else{a=this.a.V();for(var t=0;t<a.length;t++)b=nt(b,a[t])}return b},e.set=function(a,b){return er(this),this.c=null,ir(this,a=ar(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},e.get=function(a,b){return a&&0<(a=this.V(a)).length?String(a[0]):b},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.X(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.V(e);for(var r=0;r<e.length;r++){var g=n;""!==e[r]&&(g+="="+encodeURIComponent(String(e[r]))),a.push(g)}}return this.c=a.join("&")};var fr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function pr(a,b){b.push('"',a.replace(lr,(function(t){var e=fr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),fr[t]=e),e})),'"')}function dr(){var a=Lr();return te&&!!ce&&11==ce||/Edge\/\d+/.test(a)}function vr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function yr(a,b){b=b||l.window;var t="about:blank";a&&(t=jt(qt(a))),b.location.href=t}function mr(a){return!!((a=(a||Lr()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function gr(a){a=a||l.window;try{a.close()}catch(t){}}function wr(a,b,t){var e=Math.floor(1e9*Math.random()).toString();b=b||500,t=t||600;var n=(window.screen.availHeight-t)/2,r=(window.screen.availWidth-b)/2;for(g in b={width:b,height:t,top:0<n?n:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},t=Lr().toLowerCase(),e&&(b.target=e,vt(t,"crios/")&&(b.target="_blank")),Rr(Lr())==Or&&(a=a||"http://localhost",b.scrollbars=!0),t=a||"",(a=b)||(a={}),e=window,b=t instanceof Vt?t:qt(void 0!==t.href?t.href:String(t)),t=a.target||t.target,n=[],a)switch(g){case"width":case"height":case"top":case"left":n.push(g+"="+a[g]);break;case"target":case"noopener":case"noreferrer":break;default:n.push(g+"="+(a[g]?1:0))}var g=n.join(",");if((bt("iPhone")&&!bt("iPod")&&!bt("iPad")||bt("iPad")||bt("iPod"))&&e.navigator&&e.navigator.standalone&&t&&"_self"!=t?(At(g=be(document,"A"),"HTMLAnchorElement"),b instanceof Vt||b instanceof Vt||(b="object"==typeof b&&b.ra?b.qa():String(b),Ft.test(b)||(b="about:invalid#zClosurez"),b=new Vt(Gt,b)),g.href=jt(b),g.setAttribute("target",t),a.noreferrer&&g.setAttribute("rel","noreferrer"),(a=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,e,1),g.dispatchEvent(a),g={}):a.noreferrer?(g=e.open("",t,g),a=jt(b),g&&(ne&&vt(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),g.opener=null,a=Ht('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Jt(a)+'">'),e=g.document)&&(e.write(Wt(a)),e.close())):(g=e.open(jt(b),t,g))&&a.noopener&&(g.opener=null),g)try{g.focus()}catch(t){}return g}var Ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tr=/^[^@]+@[^@]+$/;function Er(){var a=null;return new Se((function(b){"complete"==l.document.readyState?b():(a=function(){b()},yn(window,"load",a))})).o((function(b){throw td(window,"load",a),b}))}function _r(a){return a=a||Lr(),!("file:"!==jr()&&"ionic:"!==jr()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ar(){var a=l.window;try{return!(!a||a==a.top)}catch(t){return!1}}function Nr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function Sr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":Nr()?"Worker":"Browser"}function kr(){var a=Sr();return"ReactNative"===a||"Node"===a}var Or="Firefox",Dr="Chrome";function Rr(a){var b=a.toLowerCase();return vt(b,"opera/")||vt(b,"opr/")||vt(b,"opios/")?"Opera":vt(b,"iemobile")?"IEMobile":vt(b,"msie")||vt(b,"trident/")?"IE":vt(b,"edge/")?"Edge":vt(b,"firefox/")?Or:vt(b,"silk/")?"Silk":vt(b,"blackberry")?"Blackberry":vt(b,"webos")?"Webos":!vt(b,"safari/")||vt(b,"chrome/")||vt(b,"crios/")||vt(b,"android")?!vt(b,"chrome/")&&!vt(b,"crios/")||vt(b,"edge/")?vt(b,"android")?"Android":(a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length?a[1]:"Other":Dr:"Safari"}var Cr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Pr(a,b){b=b||[];var t,e=[],n={};for(t in Cr)n[Cr[t]]=!0;for(t=0;t<b.length;t++)void 0!==n[b[t]]&&(delete n[b[t]],e.push(b[t]));return e.sort(),(b=e).length||(b=["FirebaseCore-web"]),"Browser"===(e=Sr())?e=Rr(n=Lr()):"Worker"===e&&(e=Rr(n=Lr())+"-"+e),e+"/JsCore/"+a+"/"+b.join(",")}function Lr(){return l.navigator&&l.navigator.userAgent||""}function xr(a,b){a=a.split("."),b=b||l;for(var t=0;t<a.length&&"object"==typeof b&&null!=b;t++)b=b[a[t]];return t!=a.length&&(b=void 0),b}function Mr(){try{var a=l.localStorage,b=Kr();if(a)return a.setItem(b,"1"),a.removeItem(b),!dr()||!!l.indexedDB}catch(t){return Nr()&&!!l.indexedDB}return!1}function Ur(){return(Vr()||"chrome-extension:"===jr()||_r())&&!kr()&&Mr()&&!Nr()}function Vr(){return"http:"===jr()||"https:"===jr()}function jr(){return l.location&&l.location.protocol||null}function Fr(a){return!mr(a=a||Lr())&&Rr(a)!=Or}function qr(a){return void 0===a?null:ur(a)}function Br(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&null!==a[t]&&void 0!==a[t]&&(b[t]=a[t]);return b}function Gr(a){if(null!==a)return JSON.parse(a)}function Kr(a){return a||Math.floor(1e9*Math.random()).toString()}function Wr(a){return"Safari"!=Rr(a=a||Lr())&&!a.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var a=l.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var t=0;t<a.CP.length;t++)a.CP[t]=null}function Hr(a,b){if(a>b)throw Error("Short delay should be less than long delay!");this.a=a,this.c=b,a=Lr(),b=Sr(),this.b=mr(a)||"ReactNative"===b}function Yr(){var a=l.document;return!a||void 0===a.visibilityState||"visible"==a.visibilityState}function Xr(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(t){}return null}function Jr(){return!(!xr("fireauth.oauthhelper",l)&&!xr("fireauth.iframe",l))}Hr.prototype.get=function(){var a=l.navigator;return!a||"boolean"!=typeof a.onLine||!Vr()&&"chrome-extension:"!==jr()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,$r={};function Zr(a){$r[a]||($r[a]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(a))}try{var ti={};Object.defineProperty(ti,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ti,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==ti.abcd}catch(a){Qr=!1}function ei(a,b,t){Qr?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:t}):a[b]=t}function ni(a,b){if(b)for(var t in b)b.hasOwnProperty(t)&&ei(a,t,b[t])}function ri(a){var b={};return ni(b,a),b}function ii(a){var b=a;if("object"==typeof a&&null!=a)for(var t in b="length"in a?[]:{},a)ei(b,t,ii(a[t]));return b}function oi(a){var b=a&&(a[hi]?"phone":null);if(!(b&&a&&a[ci]))throw new u("internal-error","Internal assert: invalid MultiFactorInfo object");ei(this,"uid",a[ci]),ei(this,"displayName",a[ai]||null);var t=null;a[ui]&&(t=new Date(a[ui]).toUTCString()),ei(this,"enrollmentTime",t),ei(this,"factorId",b)}function si(a){try{var b=new fi(a)}catch(t){b=null}return b}oi.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",ui="enrolledAt",ci="mfaEnrollmentId",hi="phoneInfo";function fi(a){oi.call(this,a),ei(this,"phoneNumber",a[hi])}function pi(a){var b={},t=a[mi],e=a[bi],n=a[wi];if(a=si(a[gi]),!n||n!=vi&&n!=yi&&!t||n==yi&&!e||n==di&&!a)throw Error("Invalid checkActionCode response!");n==yi?(b[Ti]=t||null,b[_i]=t||null,b[Ii]=e):(b[Ti]=e||null,b[_i]=e||null,b[Ii]=t||null),b[Ei]=a||null,ei(this,Ni,n),ei(this,Ai,ii(b))}D(fi,oi),fi.prototype.v=function(){var a=fi.Za.v.call(this);return a.phoneNumber=this.phoneNumber,a};var di="REVERT_SECOND_FACTOR_ADDITION",vi="EMAIL_SIGNIN",yi="VERIFY_AND_CHANGE_EMAIL",mi="email",gi="mfaInfo",bi="newEmail",wi="requestType",Ii="email",Ti="fromEmail",Ei="multiFactorInfo",_i="previousEmail",Ai="data",Ni="operation";function Si(a){var b=Bn(a=Gn(a),ki)||null,t=Bn(a,Oi)||null,e=Bn(a,Ci)||null;if(e=e&&Li[e]||null,!b||!t||!e)throw new u("argument-error",ki+", "+Oi+"and "+Ci+" are required in a valid action code URL.");ni(this,{apiKey:b,operation:e,code:t,continueUrl:Bn(a,Di)||null,languageCode:Bn(a,Ri)||null,tenantId:Bn(a,Pi)||null})}var ki="apiKey",Oi="oobCode",Di="continueUrl",Ri="languageCode",Ci="mode",Pi="tenantId",Li={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:di,signIn:vi,verifyAndChangeEmail:yi,verifyEmail:"VERIFY_EMAIL"};function xi(a){try{return new Si(a)}catch(t){return null}}function Mi(a){var b=a[qi];if(void 0===b)throw new u("missing-continue-uri");if("string"!=typeof b||"string"==typeof b&&!b.length)throw new u("invalid-continue-uri");this.h=b,this.b=this.a=null,this.g=!1;var t=a[Ui];if(t&&"object"==typeof t){b=t[Ki];var e=t[Bi];if(t=t[Gi],"string"==typeof b&&b.length){if(this.a=b,void 0!==e&&"boolean"!=typeof e)throw new u("argument-error",Bi+" property must be a boolean when specified.");if(this.g=!!e,void 0!==t&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new u("argument-error",Gi+" property must be a non empty string when specified.");this.b=t||null}else{if(void 0!==b)throw new u("argument-error",Ki+" property must be a non empty string when specified.");if(void 0!==e||void 0!==t)throw new u("missing-android-pkg-name")}}else if(void 0!==t)throw new u("argument-error",Ui+" property must be a non null object when specified.");if(this.f=null,(b=a[Fi])&&"object"==typeof b){if("string"==typeof(b=b[Wi])&&b.length)this.f=b;else if(void 0!==b)throw new u("argument-error",Wi+" property must be a non empty string when specified.")}else if(void 0!==b)throw new u("argument-error",Fi+" property must be a non null object when specified.");if(void 0!==(b=a[ji])&&"boolean"!=typeof b)throw new u("argument-error",ji+" property must be a boolean when specified.");if(this.c=!!b,void 0!==(a=a[Vi])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new u("argument-error",Vi+" property must be a non empty string when specified.");this.i=a||null}var Ui="android",Vi="dynamicLinkDomain",ji="handleCodeInApp",Fi="iOS",qi="url",Bi="installApp",Gi="minimumVersion",Ki="packageName",Wi="bundleId";function zi(a){var b={};for(var t in b.continueUrl=a.h,b.canHandleCodeInApp=a.c,(b.androidPackageName=a.a)&&(b.androidMinimumVersion=a.b,b.androidInstallApp=a.g),b.iOSBundleId=a.f,b.dynamicLinkDomain=a.i,b)null===b[t]&&delete b[t];return b}var Hi=null;function Yi(a){var b="";return function(a,b){function t(t){for(;e<a.length;){var p=a.charAt(e++),n=Hi[p];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return t}!function(){if(!Hi){Hi={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++)for(var e=a.concat(b[t].split("")),n=0;n<e.length;n++){var r=e[n];void 0===Hi[r]&&(Hi[r]=n)}}}();for(var e=0;;){var n=t(-1),r=t(0),g=t(64),o=t(64);if(64===o&&-1===n)break;b(n<<2|r>>4),64!=g&&(b(r<<4&240|g>>2),64!=o&&b(g<<6&192|o))}}(a,(function(t){b+=String.fromCharCode(t)})),b}function Xi(a){var b=Qi(a);if(!(b&&b.sub&&b.iss&&b.aud&&b.exp))throw Error("Invalid JWT");this.g=a,this.c=b.exp,this.h=b.sub,O(),this.a=b.provider_id||b.firebase&&b.firebase.sign_in_provider||null,this.f=b.firebase&&b.firebase.tenant||null,this.b=!!b.is_anonymous||"anonymous"==this.a}function Ji(a){try{return new Xi(a)}catch(t){return null}}function Qi(a){if(!a)return null;if(3!=(a=a.split(".")).length)return null;for(var b=(4-(a=a[1]).length%4)%4,t=0;t<b;t++)a+=".";try{return JSON.parse(Yi(a))}catch(t){}return null}Xi.prototype.S=function(){return this.f},Xi.prototype.i=function(){return this.b},Xi.prototype.toString=function(){return this.g};var $i="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Zi=["client_id","response_type","scope","redirect_uri","state"],to={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Zi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Zi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Zi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:$i},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function eo(a){for(var b in to)if(to[b].ea==a)return to[b];return null}function no(a){var b={};b["facebook.com"]=ao,b["google.com"]=co,b["github.com"]=uo,b["twitter.com"]=ho;var t=a&&a[io];try{if(t)return b[t]?new b[t](a):new so(a);if(void 0!==a[ro])return new oo(a)}catch(t){}return null}var ro="idToken",io="providerId";function oo(a){var b=a[io];if(!b&&a[ro]){var t=Ji(a[ro]);t&&t.a&&(b=t.a)}if(!b)throw Error("Invalid additional user info!");"anonymous"!=b&&"custom"!=b||(b=null),t=!1,void 0!==a.isNewUser?t=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(t=!0),ei(this,"providerId",b),ei(this,"isNewUser",t)}function so(a){oo.call(this,a),ei(this,"profile",ii((a=Gr(a.rawUserInfo||"{}"))||{}))}function ao(a){if(so.call(this,a),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(a){if(so.call(this,a),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",this.profile&&this.profile.login||null)}function co(a){if(so.call(this,a),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ho(a){if(so.call(this,a),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",a.screenName||null)}function fo(a){var b=Gn(a),t=Bn(b,"link"),e=Bn(Gn(t),"link");return b=Bn(b,"deep_link_id"),Bn(Gn(b),"link")||b||e||t||a}function lo(a,b){if(!a&&!b)throw new u("internal-error","Internal assert: no raw session string available");if(a&&b)throw new u("internal-error","Internal assert: unable to determine the session type");this.a=a||null,this.b=b||null,this.type=this.a?po:vo}D(so,oo),D(ao,so),D(uo,so),D(co,so),D(ho,so);var po="enroll",vo="signin";function yo(){}function mo(a,b){return a.then((function(t){if(t[na]){var e=Ji(t[na]);if(!e||b!=e.h)throw new u("user-mismatch");return t}throw new u("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==P+"user-not-found"?new u("user-mismatch"):t}))}function go(a,b){if(!b)throw new u("internal-error","failed to construct a credential");this.a=b,ei(this,"providerId",a),ei(this,"signInMethod",a)}function bo(a){return{pendingToken:a.a,requestUri:"http://localhost"}}function wo(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf("saml.")&&a.pendingToken)try{return new go(a.providerId,a.pendingToken)}catch(t){}return null}function Io(a,b,t){if(this.a=null,b.idToken||b.accessToken)b.idToken&&ei(this,"idToken",b.idToken),b.accessToken&&ei(this,"accessToken",b.accessToken),b.nonce&&!b.pendingToken&&ei(this,"nonce",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else{if(!b.oauthToken||!b.oauthTokenSecret)throw new u("internal-error","failed to construct a credential");ei(this,"accessToken",b.oauthToken),ei(this,"secret",b.oauthTokenSecret)}ei(this,"providerId",a),ei(this,"signInMethod",t)}function To(a){var b={};return a.idToken&&(b.id_token=a.idToken),a.accessToken&&(b.access_token=a.accessToken),a.secret&&(b.oauth_token_secret=a.secret),b.providerId=a.providerId,a.nonce&&!a.a&&(b.nonce=a.nonce),b={postBody:nr(b).toString(),requestUri:"http://localhost"},a.a&&(delete b.postBody,b.pendingToken=a.a),b}function Eo(a){if(a&&a.providerId&&a.signInMethod){var b={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new Io(a.providerId,b,a.signInMethod)}catch(t){}}return null}function _o(a,b){this.Oc=b||[],ni(this,{providerId:a,isOAuthProvider:!0}),this.Fb={},this.lb=(eo(a)||{}).Ha||null,this.kb=null}function Ao(a){if("string"!=typeof a||0!=a.indexOf("saml."))throw new u("argument-error",'SAML provider IDs must be prefixed with "saml."');_o.call(this,a,[])}function No(a){_o.call(this,a,Zi),this.a=[]}function So(){No.call(this,"facebook.com")}function ko(a){if(!a)throw new u("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return q(a)&&(b=a.accessToken),(new So).credential({accessToken:b})}function Oo(){No.call(this,"github.com")}function Do(a){if(!a)throw new u("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return q(a)&&(b=a.accessToken),(new Oo).credential({accessToken:b})}function Ro(){No.call(this,"google.com"),this.Aa("profile")}function Co(a,b){var t=a;return q(a)&&(t=a.idToken,b=a.accessToken),(new Ro).credential({idToken:t,accessToken:b})}function Po(){_o.call(this,"twitter.com",$i)}function Lo(a,b){var t=a;if(q(t)||(t={oauthToken:a,oauthTokenSecret:b}),!t.oauthToken||!t.oauthTokenSecret)throw new u("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Io("twitter.com",t,"twitter.com")}function xo(a,b,t){this.a=a,this.f=b,ei(this,"providerId","password"),ei(this,"signInMethod",t===Uo.EMAIL_LINK_SIGN_IN_METHOD?Uo.EMAIL_LINK_SIGN_IN_METHOD:Uo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Mo(a){return a&&a.email&&a.password?new xo(a.email,a.password,a.signInMethod):null}function Uo(){ni(this,{providerId:"password",isOAuthProvider:!1})}function Vo(a,b){if(!(b=jo(b)))throw new u("argument-error","Invalid email link!");return new xo(a,b.code,Uo.EMAIL_LINK_SIGN_IN_METHOD)}function jo(a){return(a=xi(a=fo(a)))&&a.operation===vi?a:null}function Fo(a){if(!(a.bb&&a.ab||a.Ja&&a.da))throw new u("internal-error");this.a=a,ei(this,"providerId","phone"),this.ea="phone",ei(this,"signInMethod","phone")}function qo(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var b={};return X(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(t){a[t]&&(b[t]=a[t])})),new Fo(b)}return null}function Bo(a){return a.a.Ja&&a.a.da?{temporaryProof:a.a.Ja,phoneNumber:a.a.da}:{sessionInfo:a.a.bb,code:a.a.ab}}function Go(a){try{this.a=a||r.a.auth()}catch(t){throw new u("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ni(this,{providerId:"phone",isOAuthProvider:!1})}function Ko(a,b){if(!a)throw new u("missing-verification-id");if(!b)throw new u("missing-verification-code");return new Fo({bb:a,ab:b})}function Wo(a){if(a.temporaryProof&&a.phoneNumber)return new Fo({Ja:a.temporaryProof,da:a.phoneNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var t=a&&a.oauthAccessToken,e=a&&a.oauthTokenSecret,n=a&&a.nonce,r=a&&a.oauthIdToken,g=a&&a.pendingToken;try{switch(b){case"google.com":return Co(r,t);case"facebook.com":return ko(t);case"github.com":return Do(t);case"twitter.com":return Lo(t,e);default:return t||e||r||g?g?0==b.indexOf("saml.")?new go(b,g):new Io(b,{pendingToken:g,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new No(b).credential({idToken:r,accessToken:t,rawNonce:n}):null}}catch(t){return null}}function zo(a){if(!a.isOAuthProvider)throw new u("invalid-oauth-provider")}function Ho(a,b,t,e,n,r,g){if(this.c=a,this.b=b||null,this.g=t||null,this.f=e||null,this.i=r||null,this.h=g||null,this.a=n||null,!this.g&&!this.a)throw new u("invalid-auth-event");if(this.g&&this.a)throw new u("invalid-auth-event");if(this.g&&!this.f)throw new u("invalid-auth-event")}function Yo(a){return(a=a||{}).type?new Ho(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&R(a.error),a.postBody,a.tenantId):null}function Xo(){this.b=null,this.a=[]}lo.prototype.Fa=function(){return this.a?Le(this.a):Le(this.b)},lo.prototype.v=function(){return this.type==po?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},yo.prototype.ia=function(){},yo.prototype.b=function(){},yo.prototype.c=function(){},yo.prototype.v=function(){},go.prototype.ia=function(a){return Ta(a,bo(this))},go.prototype.b=function(a,b){var t=bo(this);return t.idToken=b,Ea(a,t)},go.prototype.c=function(a,b){return mo(_a(a,bo(this)),b)},go.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Io.prototype.ia=function(a){return Ta(a,To(this))},Io.prototype.b=function(a,b){var t=To(this);return t.idToken=b,Ea(a,t)},Io.prototype.c=function(a,b){return mo(_a(a,To(this)),b)},Io.prototype.v=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},_o.prototype.Ia=function(a){return this.Fb=Tt(a),this},D(Ao,_o),D(No,_o),No.prototype.Aa=function(a){return Z(this.a,a)||this.a.push(a),this},No.prototype.Nb=function(){return it(this.a)},No.prototype.credential=function(a,b){var t;if(!(t=q(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:b||null}).idToken&&!t.accessToken)throw new u("argument-error","credential failed: must provide the ID token and/or the access token.");return new Io(this.providerId,t,this.providerId)},D(So,No),ei(So,"PROVIDER_ID","facebook.com"),ei(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),D(Oo,No),ei(Oo,"PROVIDER_ID","github.com"),ei(Oo,"GITHUB_SIGN_IN_METHOD","github.com"),D(Ro,No),ei(Ro,"PROVIDER_ID","google.com"),ei(Ro,"GOOGLE_SIGN_IN_METHOD","google.com"),D(Po,_o),ei(Po,"PROVIDER_ID","twitter.com"),ei(Po,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ia=function(a){return this.signInMethod==Uo.EMAIL_LINK_SIGN_IN_METHOD?ou(a,Ca,{email:this.a,oobCode:this.f}):ou(a,tu,{email:this.a,password:this.f})},xo.prototype.b=function(a,b){return this.signInMethod==Uo.EMAIL_LINK_SIGN_IN_METHOD?ou(a,Pa,{idToken:b,email:this.a,oobCode:this.f}):ou(a,za,{idToken:b,email:this.a,password:this.f})},xo.prototype.c=function(a,b){return mo(this.ia(a),b)},xo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ni(Uo,{PROVIDER_ID:"password"}),ni(Uo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ni(Uo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fo.prototype.ia=function(a){return a.cb(Bo(this))},Fo.prototype.b=function(a,b){var t=Bo(this);return t.idToken=b,ou(a,nu,t)},Fo.prototype.c=function(a,b){var t=Bo(this);return t.operation="REAUTH",mo(a=ou(a,ru,t),b)},Fo.prototype.v=function(){var a={providerId:"phone"};return this.a.bb&&(a.verificationId=this.a.bb),this.a.ab&&(a.verificationCode=this.a.ab),this.a.Ja&&(a.temporaryProof=this.a.Ja),this.a.da&&(a.phoneNumber=this.a.da),a},Go.prototype.cb=function(a,b){var t=this.a.b;return Le(b.verify()).then((function(e){if("string"!=typeof e)throw new u("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(b.type){case"recaptcha":var n=q(a)?a.session:null,r=q(a)?a.phoneNumber:a;return(n&&n.type==po?n.Fa().then((function(n){return function(a,b){return ou(a,Ya,b).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(t,{idToken:n,phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:e}})})):n&&n.type==vo?n.Fa().then((function(n){return function(a,b){return ou(a,Xa,b).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(t,{mfaPendingCredential:n,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}})})):function(a,b){return ou(a,Ka,b)}(t,{phoneNumber:r,recaptchaToken:e})).then((function(t){return"function"==typeof b.reset&&b.reset(),t}),(function(t){throw"function"==typeof b.reset&&b.reset(),t}));default:throw new u("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ni(Go,{PROVIDER_ID:"phone"}),ni(Go,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join("-")},Ho.prototype.S=function(){return this.h},Ho.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Jo,Qo=null;function th(a){var b="unauthorized-domain",t=void 0,e=Gn(a);a=e.b,"chrome-extension"==(e=e.f)?t=Xt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==e||"https"==e?t=Xt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment",u.call(this,b,t)}function $o(a,b,t){u.call(this,a,t),(a=b||{}).Gb&&ei(this,"email",a.Gb),a.da&&ei(this,"phoneNumber",a.da),a.credential&&ei(this,"credential",a.credential),a.Wb&&ei(this,"tenantId",a.Wb)}function Zo(a){if(a.code){var b=a.code||"";0==b.indexOf(P)&&(b=b.substring(P.length));var t={credential:Wo(a),Wb:a.tenantId};if(a.email)t.Gb=a.email;else if(a.phoneNumber)t.da=a.phoneNumber;else if(!t.credential)return new u(b,a.message||void 0);return new $o(b,t,a.message)}return null}function ts(){}function es(a){return a.c||(a.c=a.b())}function ns(){}function rs(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<b.length;t++){var e=b[t];try{return new ActiveXObject(e),a.f=e}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}function is(){}function os(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.oc,this),this.a.onerror=S(this.Pb,this),this.a.onprogress=S(this.pc,this),this.a.ontimeout=S(this.tc,this)}function ss(a,b){a.readyState=b,a.onreadystatechange&&a.onreadystatechange()}function as(a,b,t){this.reset(a,b,t,void 0,void 0)}D(th,u),D($o,u),$o.prototype.v=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var b=this.credential&&this.credential.v();return b&&_t(a,b),a},$o.prototype.toJSON=function(){return this.v()},ts.prototype.c=null,D(ns,ts),ns.prototype.a=function(){var a=rs(this);return a?new ActiveXObject(a):new XMLHttpRequest},ns.prototype.b=function(){var a={};return rs(this)&&(a[0]=!0,a[1]=!0),a},Jo=new ns,D(is,ts),is.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new os;throw Error("Unsupported browser")},is.prototype.b=function(){return{}},(e=os.prototype).open=function(a,b,t){if(null!=t&&!t)throw Error("Only async requests are supported.");this.a.open(a,b)},e.send=function(a){if(a){if("string"!=typeof a)throw Error("Only string data is supported");this.a.send(a)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ss(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText="",ss(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,ss(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},as.prototype.a=null;function us(a){this.f=a,this.b=this.c=this.a=null}function cs(a,b){this.name=a,this.value=b}as.prototype.reset=function(a,b,t,e,n){"number"==typeof n||0,e||O(),delete this.a},cs.prototype.toString=function(){return this.name};var hs=new cs("SEVERE",1e3),fs=new cs("WARNING",900),ls=new cs("CONFIG",700),ps=new cs("FINE",500);us.prototype.log=function(a,b,t){if(a.value>=function t(a){return a.c?a.c:a.a?t(a.a):(F("Root logger has no level set."),null)}(this).value)for(I(b)&&(b=b()),a=new as(a,String(b),this.f),t&&(a.a=t),t=this;t;)t=t.a};var ds={},vs=null;function ys(a){var b;if(vs||(vs=new us(""),ds[""]=vs,vs.c=ls),!(b=ds[a])){b=new us(a);var t=a.lastIndexOf("."),e=a.substr(t+1);(t=ys(a.substr(0,t))).b||(t.b={}),t.b[e]=b,b.a=t,ds[a]=b}return b}function ms(a,b){a&&a.log(ps,b,void 0)}function gs(a){this.f=a}function bs(a){An.call(this),this.s=a,this.readyState=ws,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ys("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}D(gs,ts),gs.prototype.a=function(){return new bs(this.f)},gs.prototype.b=function(a){return function(){return a}}({}),D(bs,An);var ws=0;function Is(a){a.c.read().then(a.nc.bind(a)).catch(a.Sa.bind(a))}function Ts(a,b){b&&a.f&&(a.status=a.f.status,a.statusText=a.f.statusText),a.readyState=4,a.f=null,a.c=null,a.l=null,Es(a)}function Es(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function _s(a){An.call(this),this.headers=new Pn,this.D=a||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=As,this.w=this.R=!1}(e=bs.prototype).open=function(a,b){if(this.readyState!=ws)throw this.abort(),Error("Error reopening a connection");this.m=a,this.g=b,this.readyState=1,Es(this)},e.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var b={headers:this.i,method:this.m,credentials:void 0,cache:void 0};a&&(b.body=a),this.s.fetch(new Request(this.g,b)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ts(this,!1)),this.readyState=ws},e.sc=function(a){this.a&&(this.f=a,this.b||(this.b=a.headers,this.readyState=2,Es(this)),this.a&&(this.readyState=3,Es(this),this.a&&("arraybuffer"===this.responseType?a.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.l=new TextDecoder,Is(this)):a.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(a){if(this.a){var b=this.l.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b),a.done?Ts(this,!0):Es(this),3==this.readyState&&Is(this)}},e.rc=function(a){this.a&&(this.response=this.responseText=a,Ts(this,!0))},e.qc=function(a){this.a&&(this.response=a,Ts(this,!0))},e.Sa=function(a){var b=this.h;b&&b.log(fs,"Failed to fetch url "+this.g,a instanceof Error?a:Error(a)),this.a&&Ts(this,!0)},e.setRequestHeader=function(a,b){this.i.append(a,b)},e.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.h)&&a.log(fs,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var a=this.h;return a&&a.log(fs,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}a=[];for(var b=this.b.entries(),t=b.next();!t.done;)t=t.value,a.push(t[0]+": "+t[1]),t=b.next();return a.join("\r\n")},D(_s,An);var As="";_s.prototype.b=ys("goog.net.XhrIo");var Ns=/^https?$/i,Ss=["POST","PUT"];function ks(a,b,t,e,n){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+b);t=t?t.toUpperCase():"GET",a.l=b,a.h="",a.P=t,a.N=!1,a.c=!0,a.a=a.D?a.D.a():Jo.a(),a.B=a.D?es(a.D):es(Jo),a.a.onreadystatechange=S(a.Sb,a);try{ms(a.b,Us(a,"Opening Xhr")),a.O=!0,a.a.open(t,String(b),!0),a.O=!1}catch(t){return ms(a.b,Us(a,"Error opening Xhr: "+t.message)),void Ds(a,t)}b=e||"";var r=new Pn(a.headers);n&&function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(w(a)||"string"==typeof a)X(a,b,void 0);else for(var t=Cn(a),e=Rn(a),n=e.length,r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}(n,(function(g,t){r.set(t,g)})),n=function(a){t:{for(var b=Os,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(r.X()),e=l.FormData&&b instanceof l.FormData,!Z(Ss,t)||n||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(g,t){this.a.setRequestHeader(t,g)}),a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.R&&(a.a.withCredentials=a.R);try{Ls(a),0<a.g&&(a.w=function(a){return te&&fe(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),ms(a.b,Us(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.w)),a.w?(a.a.timeout=a.g,a.a.ontimeout=S(a.Ka,a)):a.s=On(a.Ka,a.g,a)),ms(a.b,Us(a,"Sending request")),a.i=!0,a.a.send(b),a.i=!1}catch(t){ms(a.b,Us(a,"Send error: "+t.message)),Ds(a,t)}}function Os(a){return"content-type"==a.toLowerCase()}function Ds(a,b){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=b,Rs(a),Ps(a)}function Rs(a){a.N||(a.N=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Cs(a){if(a.c&&void 0!==f)if(a.B[1]&&4==xs(a)&&2==Ms(a))ms(a.b,Us(a,"Local request error detected and ignored"));else if(a.i&&4==xs(a))On(a.Sb,0,a);else if(a.dispatchEvent("readystatechange"),4==xs(a)){ms(a.b,Us(a,"Request complete")),a.c=!1;try{var t,b=Ms(a);t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.l).match(Mn)[1]||null;if(!r&&l.self&&l.self.location){var g=l.self.location.protocol;r=g.substr(0,g.length-1)}n=!Ns.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var o=2<xs(a)?a.a.statusText:""}catch(t){ms(a.b,"Can not get status: "+t.message),o=""}a.h=o+" ["+Ms(a)+"]",Rs(a)}}finally{Ps(a)}}}function Ps(a,b){if(a.a){Ls(a);var t=a.a,e=a.B[0]?y:null;a.a=null,a.B=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){(a=a.b)&&a.log(hs,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Ls(a){a.a&&a.w&&(a.a.ontimeout=null),a.s&&(l.clearTimeout(a.s),a.s=null)}function xs(a){return a.a?a.a.readyState:0}function Ms(a){try{return 2<xs(a)?a.a.status:-1}catch(t){return-1}}function Us(a,b){return b+" ["+a.P+" "+a.l+" "+Ms(a)+"]"}function li(a){var b=Ys;this.g=[],this.w=b,this.s=a||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Vs(a,b,t){a.a=!0,a.c=t,a.f=!b,Bs(a)}function js(a){if(a.a){if(!a.u)throw new Gs(a);a.u=!1}}function Fs(a,b,t,e){a.g.push([b,t,e]),a.a&&Bs(a)}function qs(a){return $(a.g,(function(b){return I(b[1])}))}function Bs(a){if(a.h&&a.a&&qs(a)){var b=a.h,t=zs[b];t&&(l.clearTimeout(t.a),delete zs[b]),a.h=0}a.b&&(a.b.l--,delete a.b),b=a.c;for(var e=t=!1;a.g.length&&!a.i;){var n=a.g.shift(),r=n[0],g=n[1];if(n=n[2],r=a.f?g:r)try{var o=r.call(n||a.s,b);void 0!==o&&(a.f=a.f&&(o==b||o instanceof Error),a.c=b=o),(U(b)||"function"==typeof l.Promise&&b instanceof l.Promise)&&(e=!0,a.i=!0)}catch(e){b=e,a.f=!0,qs(a)||(t=!0)}}a.c=b,e&&(o=S(a.m,a,!0),e=S(a.m,a,!1),b instanceof li?(Fs(b,o,e),b.B=!0):b.then(o,e)),t&&(b=new Ws(b),zs[b.a]=b,a.h=b.a)}function Gs(){V.call(this)}function Ks(){V.call(this)}function Ws(a){this.a=l.setTimeout(S(this.c,this),0),this.b=a}(e=_s.prototype).Ka=function(){void 0!==f&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ms(this.b,Us(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ms(this.b,Us(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ps(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ps(this,!0)),_s.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?Cs(this):this.Hc())},e.Hc=function(){Cs(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case As:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(hs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ms(this.b,"Can not get response: "+t.message),null}},li.prototype.cancel=function(a){if(this.a)this.c instanceof li&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b,a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(a=new Ks(this),js(this),Vs(this,!1,a))}},li.prototype.m=function(a,b){this.i=!1,Vs(this,a,b)},li.prototype.then=function(a,b,t){var e,n,r=new Se((function(g,t){e=g,n=t}));return Fs(this,e,(function(g){g instanceof Ks?r.cancel():n(g)})),r.then(a,b,t)},li.prototype.$goog_Thenable=!0,D(Gs,V),Gs.prototype.message="Deferred has already fired",Gs.prototype.name="AlreadyCalledError",D(Ks,V),Ks.prototype.message="Deferred was canceled",Ks.prototype.name="CanceledError",Ws.prototype.c=function(){throw delete zs[this.a],this.b};var zs={};function Hs(a){var b={},t=b.document||document,e=Ct(a).toString(),n=be(document,"SCRIPT"),r={Tb:n,Ka:void 0},g=new li(r),o=null,c=null!=b.timeout?b.timeout:5e3;return 0<c&&(o=window.setTimeout((function(){Xs(n,!0);var p=new $s(Qs,"Timeout reached for loading script "+e);js(g),Vs(g,!1,p)}),c),r.Ka=o),n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(Xs(n,b.ud||!1,o),js(g),Vs(g,!0,null))},n.onerror=function(){Xs(n,!0,o);var p=new $s(Js,"Error while loading script "+e);js(g),Vs(g,!1,p)},_t(r=b.attributes||{},{type:"text/javascript",charset:"UTF-8"}),de(n,r),function(a,b){At(a,"HTMLScriptElement"),a.src=Ct(b),null===v&&(v=(b=(b=l.document).querySelector&&b.querySelector("script[nonce]"))&&(b=b.nonce||b.getAttribute("nonce"))&&d.test(b)?b:""),(b=v)&&a.setAttribute("nonce",b)}(n,a),function(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement}(t).appendChild(n),g}function Ys(){if(this&&this.Tb){var a=this.Tb;a&&"SCRIPT"==a.tagName&&Xs(a,!0,this.Ka)}}function Xs(a,b,t){null!=t&&l.clearTimeout(t),a.onload=y,a.onerror=y,a.onreadystatechange=y,b&&window.setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),0)}var Js=0,Qs=1;function $s(a,b){var t="Jsloader error (code #"+a+")";b&&(t+=": "+b),V.call(this,t),this.code=a}function Zs(a){this.f=a}function ta(a,b,t){if(this.c=a,a=b||{},this.u=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=a.secureTokenTimeout||ra,this.g=Tt(a.secureTokenHeaders||ia),this.h=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=a.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=a.firebaseTimeout||oa,this.a=Tt(a.firebaseHeaders||sa),t&&(this.a["X-Client-Version"]=t,this.g["X-Client-Version"]=t),t="Node"==Sr(),!(t=l.XMLHttpRequest||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!Nr())throw new u("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Nr()?this.f=new gs(self):kr()?this.f=new Zs(t):this.f=new is,this.b=null}D($s,V),D(Zs,ts),Zs.prototype.a=function(){return new this.f},Zs.prototype.b=function(){return{}};var ea,na="idToken",ra=new Hr(3e4,6e4),ia={"Content-Type":"application/x-www-form-urlencoded"},oa=new Hr(3e4,6e4),sa={"Content-Type":"application/json"};function aa(a,b){b?a.a["X-Firebase-Locale"]=b:delete a.a["X-Firebase-Locale"]}function ua(a,b){b?(a.a["X-Client-Version"]=b,a.g["X-Client-Version"]=b):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}function ca(a,b,t,e,n,r,g){(function(){var a=Lr();return!((a=Rr(a)!=Dr?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a)&&(!te||!ce||9<ce)})()||Nr()?a=S(a.w,a):(ea||(ea=new Se((function(t,e){!function(a,b){if(((window.gapi||{}).client||{}).request)a();else{l[fa]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))},function(a,b){Fs(a,null,b,void 0)}(Hs(Pt(ha,{onload:fa})),(function(){b(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),a=S(a.s,a)),a(b,t,e,n,r,g)}ta.prototype.S=function(){return this.b},ta.prototype.w=function(a,b,t,e,n,r){if(Nr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new u("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var g=new _s(this.f);if(r){g.g=Math.max(0,r);var o=setTimeout((function(){g.dispatchEvent("timeout")}),r)}Nn(g,"complete",(function(){o&&clearTimeout(o);var t=null;try{t=JSON.parse(function(a){try{return a.a?a.a.responseText:""}catch(t){return ms(a.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(e){t=null}b&&b(t)})),Sn(g,"ready",(function(){o&&clearTimeout(o),Qe(this)})),Sn(g,"timeout",(function(){o&&clearTimeout(o),Qe(this),b&&b(null)})),ks(g,a,t,e,n)};var ha=new Nt(Ot,"https://apis.google.com/js/client.js?onload=%{onload}"),fa="__fcb"+Math.floor(1e6*Math.random()).toString();function la(a,b,t,e,n,r,g){var o=Gn(b+t);qn(o,"key",a.c),g&&qn(o,"cb",O().toString());var c="GET"==e;if(c)for(var p in n)n.hasOwnProperty(p)&&qn(o,p,n[p]);return new Se((function(t,h){ca(a,o.toString(),(function(e){e?e.error?h(au(e,r||{})):t(e):h(new u("network-request-failed"))}),e,c?void 0:ur(Br(n)),a.a,a.i.get())}))}function pa(a){if("string"!=typeof(a=a.email)||!Tr.test(a))throw new u("invalid-email")}function da(a){"email"in a&&pa(a)}function va(a){if(!a[na]){if(a.mfaPendingCredential)throw new u("multi-factor-auth-required",null,Tt(a));throw new u("internal-error")}}function ya(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new u("internal-error")}else{if(!a.sessionInfo)throw new u("missing-verification-id");if(!a.code)throw new u("missing-verification-code")}}ta.prototype.s=function(a,b,t,e,n){var r=this;ea.then((function(){window.gapi.client.setApiKey(r.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:t,body:e,headers:n,authType:"none",callback:function(t){window.gapi.auth.setToken(g),b&&b(t)}})})).o((function(g){b&&b({error:{message:g&&g.message||"CORS_UNSUPPORTED"}})}))},ta.prototype.vb=function(){return ou(this,Ha,{})},ta.prototype.xb=function(a,b){return ou(this,Wa,{idToken:a,email:b})},ta.prototype.yb=function(a,b){return ou(this,za,{idToken:a,password:b})};var ma={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(a){if(!a.phoneVerificationInfo)throw new u("internal-error");if(!a.phoneVerificationInfo.sessionInfo)throw new u("missing-verification-id");if(!a.phoneVerificationInfo.code)throw new u("missing-verification-code")}function ba(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new u("internal-error")}function wa(a,b){return b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf("oidc.")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&(ir(a=new Zn(a.postBody),"nonce")&&(b.nonce=a.get("nonce")))),b}function Ia(a){var b=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",b=Zo(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=Zo(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",b=Zo(a)):a.errorMessage&&(b=su(a.errorMessage)),b)throw b;va(a)}function Ta(a,b){return b.returnIdpCredential=!0,ou(a,Ja,b)}function Ea(a,b){return b.returnIdpCredential=!0,ou(a,$a,b)}function _a(a,b){return b.returnIdpCredential=!0,b.autoCreate=!1,ou(a,Qa,b)}function Aa(a){if(!a.oobCode)throw new u("invalid-action-code")}(e=ta.prototype).zb=function(a,b){var t={idToken:a},e=[];return wt(ma,(function(n,r){var g=b[r];null===g?e.push(n):r in b&&(t[r]=g)})),e.length&&(t.deleteAttribute=e),ou(this,Wa,t)},e.rb=function(a,b){return _t(a={requestType:"PASSWORD_RESET",email:a},b),ou(this,Fa,a)},e.sb=function(a,b){return _t(a={requestType:"EMAIL_SIGNIN",email:a},b),ou(this,Ua,a)},e.qb=function(a,b){return _t(a={requestType:"VERIFY_EMAIL",idToken:a},b),ou(this,Va,a)},e.Ab=function(a,b,t){return _t(a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:b},t),ou(this,ja,a)},e.cb=function(a){return ou(this,eu,a)},e.jb=function(a,b){return ou(this,Ga,{oobCode:a,newPassword:b})},e.Pa=function(a){return ou(this,Sa,{oobCode:a})},e.fb=function(a){return ou(this,Na,{oobCode:a})};var Na={endpoint:"setAccountInfo",A:Aa,Y:"email",C:!0},Sa={endpoint:"resetPassword",A:Aa,G:function(a){var b=a.requestType;if(!b||!a.email&&"EMAIL_SIGNIN"!=b&&"VERIFY_AND_CHANGE_EMAIL"!=b)throw new u("internal-error")},C:!0},ka={endpoint:"signupNewUser",A:function(a){if(pa(a),!a.password)throw new u("weak-password")},G:va,U:!0,C:!0},Oa={endpoint:"createAuthUri",C:!0},Da={endpoint:"deleteAccount",M:["idToken"]},Ra={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(a){if("array"!=m(a.deleteProvider))throw new u("internal-error")}},Ca={endpoint:"emailLinkSignin",M:["email","oobCode"],A:pa,G:va,U:!0,C:!0},Pa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:pa,G:va,U:!0},La={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ga,G:va,C:!0,La:!0},xa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:va,C:!0,La:!0},Ma={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(a){if("EMAIL_SIGNIN"!=a.requestType)throw new u("internal-error");pa(a)},Y:"email",C:!0},Va={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new u("internal-error")},Y:"email",C:!0},ja={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(a){if("VERIFY_AND_CHANGE_EMAIL"!=a.requestType)throw new u("internal-error")},Y:"email",C:!0},Fa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(a){if("PASSWORD_RESET"!=a.requestType)throw new u("internal-error");pa(a)},Y:"email",C:!0},qa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ba={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(a){if(!a.recaptchaSiteKey)throw new u("internal-error")}},Ga={endpoint:"resetPassword",A:Aa,Y:"email",C:!0},Ka={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Wa={endpoint:"setAccountInfo",M:["idToken"],A:da,U:!0},za={endpoint:"setAccountInfo",M:["idToken"],A:function(a){if(da(a),!a.password)throw new u("weak-password")},G:va,U:!0},Ha={endpoint:"signupNewUser",G:va,U:!0,C:!0},Ya={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(a){if(!a.phoneEnrollmentInfo)throw new u("internal-error");if(!a.phoneEnrollmentInfo.phoneNumber)throw new u("missing-phone-number");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new u("missing-app-credential")},G:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new u("internal-error")},C:!0,La:!0},Xa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new u("missing-app-credential")},G:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new u("internal-error")},C:!0,La:!0},Ja={endpoint:"verifyAssertion",A:ba,Wa:wa,G:Ia,U:!0,C:!0},Qa={endpoint:"verifyAssertion",A:ba,Wa:wa,G:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new u("user-not-found");if(a.errorMessage)throw su(a.errorMessage);va(a)},U:!0,C:!0},$a={endpoint:"verifyAssertion",A:function(a){if(ba(a),!a.idToken)throw new u("internal-error")},Wa:wa,G:Ia,U:!0},Za={endpoint:"verifyCustomToken",A:function(a){if(!a.token)throw new u("invalid-custom-token")},G:va,U:!0,C:!0},tu={endpoint:"verifyPassword",A:function(a){if(pa(a),!a.password)throw new u("wrong-password")},G:va,U:!0,C:!0},eu={endpoint:"verifyPhoneNumber",A:ya,G:va,C:!0},nu={endpoint:"verifyPhoneNumber",A:function(a){if(!a.idToken)throw new u("internal-error");ya(a)},G:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",Zo(a);va(a)}},ru={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ya,G:va,C:!0},iu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(a){if(!!a[na]^!!a.refreshToken)throw new u("internal-error")},C:!0,La:!0};function ou(a,b,t){if(!function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var t=0;t<b.length;t++){var e=a[b[t]];if(null==e||""===e)return!1}return!0}(t,b.M))return xe(new u("internal-error"));var e,n=!!b.La,r=b.Rb||"POST";return Le(t).then(b.A).then((function(){return b.U&&(t.returnSecureToken=!0),b.C&&a.b&&void 0===t.tenantId&&(t.tenantId=a.b),la(a,n?a.l:a.h,b.endpoint,r,t,b.Eb,b.hb||!1)})).then((function(g){return e=g,b.Wa?b.Wa(t,e):e})).then(b.G).then((function(){if(!b.Y)return e;if(!(b.Y in e))throw new u("internal-error");return e[b.Y]}))}function su(a){return au({error:{errors:[{message:a}],code:400,message:a}})}function au(a,b){var t=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",e={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(t=e[t]?new u(e[t]):null)return t;for(var n in t=a.error&&a.error.message||"",_t(e={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},b||{}),b=(b=t.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<b.length?b[1]:void 0,e)if(0===t.indexOf(n))return new u(e[n],b);return!b&&a&&(b=qr(a)),new u("internal-error",b)}function uu(a){this.b=a,this.a=null,this.nb=function(a){return(lu||(lu=new Se((function(a,b){function t(){zr(),xr("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){zr(),b(Error("Network Error"))},timeout:hu.get()})}if(xr("gapi.iframes.Iframe"))a();else if(xr("gapi.load"))t();else{var e="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[e]=function(){xr("gapi.load")?t():b(Error("Network Error"))},Le(Hs(e=Pt(cu,{onload:e}))).o((function(){b(Error("Network Error"))}))}})).o((function(a){throw lu=null,a})))).then((function(){return new Se((function(b,t){xr("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(e){function n(){clearTimeout(r),b()}a.a=e,a.a.restyle({setHideOnLeave:!1});var r=setTimeout((function(){t(Error("Network Error"))}),fu.get());e.ping(n).then(n,(function(){t(Error("Network Error"))}))}))}))}))}(this)}var cu=new Nt(Ot,"https://apis.google.com/js/api.js?onload=%{onload}"),hu=new Hr(3e4,6e4),fu=new Hr(5e3,15e3),lu=null;function pu(a,b,t){this.i=a,this.g=b,this.h=t,this.f=null,this.a=Kn(this.i,"/__/auth/iframe"),qn(this.a,"apiKey",this.g),qn(this.a,"appName",this.h),this.b=null,this.c=[]}function du(a,b,t,e,n){this.s=a,this.m=b,this.c=t,this.u=e,this.i=this.g=this.l=null,this.a=n,this.h=this.f=null}function vu(a){try{return r.a.app(a).auth().Ea()}catch(t){return[]}}function yu(a,b,t,e,n){this.u=a,this.f=b,this.b=t,this.c=e||null,this.h=n||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function mu(a){var b=vr();return function(a){return ou(a,qa,{}).then((function(b){return b.authorizedDomains||[]}))}(a).then((function(t){t:{var e=Gn(b),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var g=t[r],o=e,c=n;if(0==g.indexOf("chrome-extension://")?o=Gn(g).b==o&&"chrome-extension"==c:"http"!=c&&"https"!=c?o=!1:Ir.test(g)?o=o==g:(g=g.split(".").join("\\."),o=new RegExp("^(.+\\."+g+"|"+g+")$","i").test(o)),o){t=!0;break t}}t=!1}if(!t)throw new th(vr())}))}function gu(a){return a.l||(a.l=Er().then((function(){if(!a.s){var b=a.c,t=a.h,e=vu(a.b),n=new pu(a.u,a.f,a.b);n.f=b,n.b=t,n.c=it(e||[]),a.s=n.toString()}a.i=new uu(a.s),function(a){if(!a.i)throw Error("IfcHandler must be initialized!");!function(a,b){a.nb.then((function(){a.a.register("authEvent",b,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(a.i,(function(b){var t={};if(b&&b.authEvent){var e=!1;for(b=Yo(b.authEvent),t=0;t<a.g.length;t++)e=a.g[t](b)||e;return(t={}).status=e?"ACK":"ERROR",Le(t)}return t.status="ERROR",Le(t)}))}(a)}))),a.l}function bu(a){return a.m||(a.w=a.c?Pr(a.c,vu(a.b)):null,a.m=new ta(a.f,M(a.h),a.w)),a.m}function wu(a,b,t,e,n,r,g,o,c,p,h){return(a=new du(a,b,t,e,n)).l=r,a.g=g,a.i=o,a.b=Tt(c||null),a.f=p,a.ub(h).toString()}function Iu(a){if(this.a=a||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new u("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Tu(a){this.b=a,this.a={},this.f=S(this.c,this)}pu.prototype.toString=function(){return this.f?qn(this.a,"v",this.f):rr(this.a.a,"v"),this.b?qn(this.a,"eid",this.b):rr(this.a.a,"eid"),this.c.length?qn(this.a,"fw",this.c.join(",")):rr(this.a.a,"fw"),this.a.toString()},du.prototype.ub=function(a){return this.h=a,this},du.prototype.toString=function(){var a=Kn(this.s,"/__/auth/handler");if(qn(a,"apiKey",this.m),qn(a,"appName",this.c),qn(a,"authType",this.u),this.a.isOAuthProvider){var b=this.a;try{var t=r.a.app(this.c).auth().ja()}catch(e){t=null}for(var e in b.kb=t,qn(a,"providerId",this.a.providerId),t=Br((b=this.a).Fb))t[e]=t[e].toString();e=b.Oc,t=Tt(t);for(var n=0;n<e.length;n++){var o=e[n];o in t&&delete t[o]}b.lb&&b.kb&&!t[b.lb]&&(t[b.lb]=b.kb),It(t)||qn(a,"customParameters",qr(t))}if("function"==typeof this.a.Nb&&((b=this.a.Nb()).length&&qn(a,"scopes",b.join(","))),this.l?qn(a,"redirectUrl",this.l):rr(a.a,"redirectUrl"),this.g?qn(a,"eventId",this.g):rr(a.a,"eventId"),this.i?qn(a,"v",this.i):rr(a.a,"v"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!Bn(a,g)&&qn(a,g,this.b[g]);return this.h?qn(a,"tid",this.h):rr(a.a,"tid"),this.f?qn(a,"eid",this.f):rr(a.a,"eid"),(g=vu(this.c)).length&&qn(a,"fw",g.join(",")),a.toString()},(e=yu.prototype).Lb=function(a,b,t){var e=new u("popup-closed-by-user"),n=new u("web-storage-unsupported"),r=this,g=!1;return this.ka().then((function(){(function(a){var b={type:"webStorageSupport"};return gu(a).then((function(){return function(a,b){return a.nb.then((function(){return new Se((function(t){a.a.send(b.type,b,t,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(a.i,b)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(r).then((function(t){t||(a&&gr(a),b(n),g=!0)}))})).o((function(){})).then((function(){if(!g)return function(a){return new Se((function(b){return function t(){Dn(2e3).then((function(){if(a&&!a.closed)return t();b()}))}()}))}(a)})).then((function(){if(!g)return Dn(t).then((function(){b(e)}))}))},e.Ub=function(){var a=Lr();return!Fr(a)&&!Wr(a)},e.Qb=function(){return!1},e.Jb=function(a,b,t,e,n,r,g,o){if(!a)return xe(new u("popup-blocked"));if(g&&!Fr())return this.ka().o((function(p){gr(a),n(p)})),e(),Le();this.a||(this.a=mu(bu(this)));var c=this;return this.a.then((function(){var p=c.ka().o((function(t){throw gr(a),n(t),t}));return e(),p})).then((function(){(zo(t),g)||yr(wu(c.u,c.f,c.b,b,t,null,r,c.c,void 0,c.h,o),a)})).o((function(p){throw"auth/network-request-failed"==p.code&&(c.a=null),p}))},e.Kb=function(a,b,t,e){this.a||(this.a=mu(bu(this)));var n=this;return this.a.then((function(){zo(b),yr(wu(n.u,n.f,n.b,a,b,vr(),t,n.c,void 0,n.h,e))})).o((function(t){throw"auth/network-request-failed"==t.code&&(n.a=null),t}))},e.ka=function(){var a=this;return gu(this).then((function(){return a.i.nb})).o((function(){throw a.a=null,new u("network-request-failed")}))},e.Xb=function(){return!0},e.Ca=function(a){this.g.push(a)},e.Qa=function(a){et(this.g,(function(b){return b==a}))},(e=Iu.prototype).get=function(a){return Le(this.a.getItem(a)).then((function(b){return b&&Gr(b)}))},e.set=function(a,b){return Le(this.a.setItem(a,qr(b)))},e.T=function(a){return Le(this.a.removeItem(a))},e.ba=function(){},e.ha=function(){};var Eu,_u=[];function Au(a,b,t){It(a.a)&&a.b.addEventListener("message",a.f),void 0===a.a[b]&&(a.a[b]=[]),a.a[b].push(t)}function Nu(a){this.a=a}function Su(a){this.c=a,this.b=!1,this.a=[]}function ku(a,b,t,e){var n,g,r,o,c=t||{},p=null;if(a.b)return xe(Error("connection_unavailable"));var h=e?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Se((function(t,e){f?(n=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),r=setTimeout((function(){e(Error("unsupported_event"))}),h),p={messageChannel:f,onMessage:g=function(c){c.data.eventId===n&&("ack"===c.data.status?(clearTimeout(r),o=setTimeout((function(){e(Error("timeout"))}),3e3)):"done"===c.data.status?(clearTimeout(o),void 0!==c.data.response?t(c.data.response):e(Error("unknown_error"))):(clearTimeout(r),clearTimeout(o),e(Error("invalid_response"))))}},a.a.push(p),f.port1.addEventListener("message",g),a.c.postMessage({eventType:b,eventId:n,data:c},[f.port2])):e(Error("connection_unavailable"))})).then((function(t){return Ou(a,p),t})).o((function(t){throw Ou(a,p),t}))}function Ou(a,b){if(b){var t=b.messageChannel,e=b.onMessage;t&&(t.port1.removeEventListener("message",e),t.port1.close()),et(a.a,(function(t){return t==b}))}}function Du(){if(!Pu())throw new u("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var a=this;Nr()&&self?(this.l=function(){var a=Nr()?self:null;if(X(_u,(function(t){t.b==a&&(b=t)})),!b){var b=new Tu(a);_u.push(b)}return b}(),Au(this.l,"keyChanged",(function(b,t){return Vu(a).then((function(e){return 0<e.length&&X(a.a,(function(t){t(e)})),{keyProcessed:Z(e,t.key)}}))})),Au(this.l,"ping",(function(){return Le(["keyChanged"])}))):function(){var a=l.navigator;return a&&a.serviceWorker?Le().then((function(){return a.serviceWorker.ready})).then((function(b){return b.active||null})).o((function(){return null})):Le(null)}().then((function(b){(a.h=b)&&(a.g=new Su(new Nu(b)),ku(a.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Z(t[0].value,"keyChanged")&&(a.s=!0)})).o((function(){})))}))}function Ru(a){return new Se((function(b,t){var e=a.u.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(t){}t(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){t(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?b(e):function(a){return new Se((function(b,t){var e=a.u.deleteDatabase("firebaseLocalStorageDb");e.onsuccess=function(){b()},e.onerror=function(e){t(Error(e.target.error))}}))}(a).then((function(){return Ru(a)})).then((function(t){b(t)})).o((function(e){t(e)}))}}))}function Cu(a){return a.m||(a.m=Ru(a)),a.m}function Pu(){try{return!!l.indexedDB}catch(t){return!1}}function Lu(a){return a.objectStore("firebaseLocalStorage")}function xu(a,b){return a.transaction(["firebaseLocalStorage"],b?"readwrite":"readonly")}function Mu(a){return new Se((function(b,t){a.onsuccess=function(t){t&&t.target?b(t.target.result):b()},a.onerror=function(e){t(e.target.error)}}))}function Uu(a,b){return a.g&&a.h&&function(){var a=l.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.h?ku(a.g,"keyChanged",{key:b},a.s).then((function(){})).o((function(){})):Le()}function Vu(a){return Cu(a).then((function(b){var t=Lu(xu(b,!1));return t.getAll?Mu(t.getAll()):new Se((function(e,n){var r=[],g=t.openCursor();g.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},g.onerror=function(t){n(t.target.error)}}))})).then((function(b){var t={},e=[];if(0==a.b){for(e=0;e<b.length;e++)t[b[e].fbase_key]=b[e].value;e=function t(a,b){var e,n=[];for(e in a)e in b?typeof a[e]!=typeof b[e]?n.push(e):"object"==typeof a[e]&&null!=a[e]&&null!=b[e]?0<t(a[e],b[e]).length&&n.push(e):a[e]!==b[e]&&n.push(e):n.push(e);for(e in b)e in a||n.push(e);return n}(a.c,t),a.c=t}return e}))}function ju(a){a.i&&a.i.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function Fu(a){var b=this,t=null;this.a=[],this.type="indexedDB",this.c=a,this.b=Le().then((function(){if(Pu()){var e=Kr(),n="__sak"+e;return Eu||(Eu=new Du),(t=Eu).set(n,e).then((function(){return t.get(n)})).then((function(r){if(r!==e)throw Error("indexedDB not supported!");return t.T(n)})).then((function(){return t})).o((function(){return b.c}))}return b.c})).then((function(t){return b.type=t.type,t.ba((function(t){X(b.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Bu(){if(!function(){var a="Node"==Sr();if(!(a=Gu()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new u("internal-error","The LocalStorage compatibility library was not found.");throw new u("web-storage-unsupported")}this.a=Gu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Gu(){try{var a=l.localStorage,b=Kr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Ku(){this.type="nullStorage"}function Wu(){if(!function(){var a="Node"==Sr();if(!(a=zu()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new u("internal-error","The SessionStorage compatibility library was not found.");throw new u("web-storage-unsupported")}this.a=zu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zu(){try{var a=l.sessionStorage,b=Kr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Hu(){var a={};a.Browser=Ju,a.Node=Qu,a.ReactNative=$u,a.Worker=Zu,this.a=a[Sr()]}Tu.prototype.c=function(a){var b=a.data.eventType,t=a.data.eventId,e=this.a[b];if(e&&0<e.length){a.ports[0].postMessage({status:"ack",eventId:t,eventType:b,response:null});var n=[];X(e,(function(t){n.push(Le().then((function(){return t(a.origin,a.data.data)})))})),Ue(n).then((function(e){var g=[];X(e,(function(t){g.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),X(g,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),a.ports[0].postMessage({status:"done",eventId:t,eventType:b,response:g})}))}},Nu.prototype.postMessage=function(a,b){this.a.postMessage(a,b)},Su.prototype.close=function(){for(;0<this.a.length;)Ou(this,this.a[0]);this.b=!0},(e=Du.prototype).set=function(a,b){var t,e=!1,n=this;return Cu(this).then((function(e){return Mu((e=Lu(xu(t=e,!0))).get(a))})).then((function(r){var g=Lu(xu(t,!0));return r?(r.value=b,Mu(g.put(r))):(n.b++,e=!0,(r={}).fbase_key=a,r.value=b,Mu(g.add(r)))})).then((function(){return n.c[a]=b,Uu(n,a)})).ma((function(){e&&n.b--}))},e.get=function(a){return Cu(this).then((function(b){return Mu(Lu(xu(b,!1)).get(a))})).then((function(b){return b&&b.value}))},e.T=function(a){var b=!1,t=this;return Cu(this).then((function(e){return b=!0,t.b++,Mu(Lu(xu(e,!0)).delete(a))})).then((function(){return delete t.c[a],Uu(t,a)})).ma((function(){b&&t.b--}))},e.ba=function(a){0==this.a.length&&function(a){ju(a),function b(){a.f=setTimeout((function(){a.i=Vu(a).then((function(t){0<t.length&&X(a.a,(function(e){e(t)}))})).then((function(){b()})).o((function(t){"STOP_EVENT"!=t.message&&b()}))}),800)}()}(this),this.a.push(a)},e.ha=function(a){et(this.a,(function(b){return b==a})),0==this.a.length&&ju(this)},(e=Fu.prototype).get=function(a){return this.b.then((function(b){return b.get(a)}))},e.set=function(a,b){return this.b.then((function(t){return t.set(a,b)}))},e.T=function(a){return this.b.then((function(b){return b.T(a)}))},e.ba=function(a){this.a.push(a)},e.ha=function(a){et(this.a,(function(b){return b==a}))},(e=qu.prototype).get=function(a){return Le(this.a[a])},e.set=function(a,b){return this.a[a]=b,Le()},e.T=function(a){return delete this.a[a],Le()},e.ba=function(){},e.ha=function(){},(e=Bu.prototype).get=function(a){var b=this;return Le().then((function(){return Gr(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return Le().then((function(){var e=qr(b);null===e?t.T(a):t.a.setItem(a,e)}))},e.T=function(a){var b=this;return Le().then((function(){b.a.removeItem(a)}))},e.ba=function(a){l.window&&dn(l.window,"storage",a)},e.ha=function(a){l.window&&td(l.window,"storage",a)},(e=Ku.prototype).get=function(){return Le(null)},e.set=function(){return Le()},e.T=function(){return Le()},e.ba=function(){},e.ha=function(){},(e=Wu.prototype).get=function(a){var b=this;return Le().then((function(){return Gr(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return Le().then((function(){var e=qr(b);null===e?t.T(a):t.a.setItem(a,e)}))},e.T=function(a){var b=this;return Le().then((function(){b.a.removeItem(a)}))},e.ba=function(){},e.ha=function(){};var Yu,Xu,Ju={F:Bu,$a:Wu},Qu={F:Bu,$a:Wu},$u={F:Iu,$a:Ku},Zu={F:Bu,$a:Ku},tc={od:"local",NONE:"none",qd:"session"};function ec(){var a=!(Wr(Lr())||!Ar()),b=Fr(),t=Mr();this.m=a,this.h=b,this.l=t,this.a={},Yu||(Yu=new Hu),a=Yu;try{this.g=!dr()&&Jr()||!l.indexedDB?new a.a.F:new Fu(Nr()?new qu:new a.a.F)}catch(t){this.g=new qu,this.h=!0}try{this.i=new a.a.$a}catch(t){this.i=new qu}this.u=new qu,this.f=S(this.Vb,this),this.b={}}function nc(){return Xu||(Xu=new ec),Xu}function rc(a,b){switch(b){case"session":return a.i;case"none":return a.u;default:return a.g}}function ic(a,b){return"firebase:"+a.name+(b?":"+b:"")}function oc(a,b,t){return t=ic(b,t),"local"==b.F&&(a.b[t]=null),rc(a,b.F).T(t)}function sc(a){a.c&&(clearInterval(a.c),a.c=null)}function ac(a){this.a=a,this.b=nc()}(e=ec.prototype).get=function(a,b){return rc(this,a.F).get(ic(a,b))},e.set=function(a,b,t){var e=ic(a,t),n=this,r=rc(this,a.F);return r.set(e,b).then((function(){return r.get(e)})).then((function(g){"local"==a.F&&(n.b[e]=g)}))},e.addListener=function(a,b,t){a=ic(a,b),this.l&&(this.b[a]=l.localStorage.getItem(a)),It(this.a)&&(rc(this,"local").ba(this.f),this.h||(dr()||!Jr())&&l.indexedDB||!this.l||function(a){sc(a),a.c=setInterval((function(){for(var b in a.a){var t=l.localStorage.getItem(b),e=a.b[b];t!=e&&(a.b[b]=t,t=new rn({type:"storage",key:b,target:window,oldValue:e,newValue:t,a:!0}),a.Vb(t))}}),1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(t)},e.removeListener=function(a,b,t){a=ic(a,b),this.a[a]&&(et(this.a[a],(function(e){return e==t})),0==this.a[a].length&&delete this.a[a]),It(this.a)&&(rc(this,"local").ha(this.f),sc(this))},e.Vb=function(a){if(a&&a.f){var b=a.a.key;if(null==b)for(var t in this.a){var e=this.b[t];void 0===e&&(e=null);var n=l.localStorage.getItem(t);n!==e&&(this.b[t]=n,this.ib(t))}else if(0==b.indexOf("firebase:")&&this.a[b]){if(void 0!==a.a.a?rc(this,"local").ha(this.f):sc(this),this.m)if(t=l.localStorage.getItem(b),(e=a.a.newValue)!==t)null!==e?l.localStorage.setItem(b,e):l.localStorage.removeItem(b);else if(this.b[b]===e&&void 0===a.a.a)return;var r=this;t=function(){void 0===a.a.a&&r.b[b]===l.localStorage.getItem(b)||(r.b[b]=l.localStorage.getItem(b),r.ib(b))},te&&ce&&10==ce&&l.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(t,10):t()}}else X(a,S(this.ib,this))},e.ib=function(a){this.a[a]&&X(this.a[a],(function(b){b()}))};var uc,cc={name:"authEvent",F:"local"};function hc(){this.a=nc()}function fc(a,b){this.b=lc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=b,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===uc&&(uc=l.Int32Array?new Int32Array(gc):gc),this.reset()}D(fc,(function(){this.b=-1}));for(var lc=64,dl=lc-1,pc=[],dc=0;dc<dl;dc++)pc[dc]=0;var vc=nt(128,pc);function yc(a){for(var b=a.f,t=a.l,e=0,n=0;n<b.length;)t[e++]=b[n]<<24|b[n+1]<<16|b[n+2]<<8|b[n+3],n=4*e;for(b=16;64>b;b++){n=0|t[b-15],e=0|t[b-2];var r=(0|t[b-16])+((n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3)|0,g=(0|t[b-7])+((e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)|0;t[b]=r+g|0}e=0|a.a[0],n=0|a.a[1];var o=0|a.a[2],c=0|a.a[3],p=0|a.a[4],h=0|a.a[5],f=0|a.a[6];for(r=0|a.a[7],b=0;64>b;b++){var l=((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+(e&n^e&o^n&o)|0;g=(r=r+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))|0)+((g=(g=p&h^~p&f)+(0|uc[b])|0)+(0|t[b])|0)|0,r=f,f=h,h=p,p=c+g|0,c=o,o=n,n=e,e=g+l|0}a.a[0]=a.a[0]+e|0,a.a[1]=a.a[1]+n|0,a.a[2]=a.a[2]+o|0,a.a[3]=a.a[3]+c|0,a.a[4]=a.a[4]+p|0,a.a[5]=a.a[5]+h|0,a.a[6]=a.a[6]+f|0,a.a[7]=a.a[7]+r|0}function mc(a,b,t){void 0===t&&(t=b.length);var e=0,n=a.c;if("string"==typeof b)for(;e<t;)a.f[n++]=b.charCodeAt(e++),n==a.b&&(yc(a),n=0);else{if(!w(b))throw Error("message must be string or array");for(;e<t;){var r=b[e++];if(!("number"==typeof r&&0<=r&&255>=r&&r==(0|r)))throw Error("message must be a byte array");a.f[n++]=r,n==a.b&&(yc(a),n=0)}}a.c=n,a.g+=t}fc.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):it(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){fc.call(this,8,wc)}D(bc,fc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(a,b,t,e,n){this.u=a,this.i=b,this.l=t,this.m=e||null,this.s=n||null,this.h=b+":"+t,this.w=new hc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Tc(a){return new u("invalid-cordova-configuration",a)}function ol(a){var b=new bc;mc(b,a),a=[];var t=8*b.g;56>b.c?mc(b,vc,56-b.c):mc(b,vc,b.b-(b.c-56));for(var e=63;56<=e;e--)b.f[e]=255&t,t/=256;for(yc(b),e=t=0;e<b.i;e++)for(var n=24;0<=n;n-=8)a[t++]=b.a[e]>>n&255;return function(a){return Q(a,(function(b){return 1<(b=b.toString(16)).length?b:"0"+b})).join("")}(a)}function Ec(a,b){for(var t=0;t<a.b.length;t++)try{a.b[t](b)}catch(t){}}function _c(a){return a.f||(a.f=a.ka().then((function(){return new Se((function(b){a.Ca((function t(e){return b(e),a.Qa(t),!1})),function(a){function b(g){e=!0,n&&n.cancel(),Ac(a).then((function(e){var n=t;if(e&&g&&g.url){var p=null;-1!=(n=fo(g.url)).indexOf("/__/auth/callback")&&(p=(p="object"==typeof(p=Gr(Bn(p=Gn(n),"firebaseError")||null))?R(p):null)?new Ho(e.c,e.b,null,null,p,null,e.S()):new Ho(e.c,e.b,n,e.f,null,null,e.S())),n=p||t}Ec(a,n)}))}var t=new Ho("unknown",null,null,null,new u("no-auth-event")),e=!1,n=Dn(500).then((function(){return Ac(a).then((function(){e||Ec(a,t)}))})),r=l.handleOpenURL;l.handleOpenURL=function(g){if(0==g.toLowerCase().indexOf(xr("BuildInfo.packageName",l).toLowerCase()+"://")&&b({url:g}),"function"==typeof r)try{r(g)}catch(t){console.error(t)}},Qo||(Qo=new Xo),function(a){var b=Qo;b.a.push(a),b.b||(b.b=function(t){for(var e=0;e<b.a.length;e++)b.a[e](t)},"function"==typeof(a=xr("universalLinks.subscribe",l))&&a(null,b.b))}(b)}(a)}))}))),a.f}function Ac(a){var b=null;return function(a){return a.b.get(cc,a.a).then((function(b){return Yo(b)}))}(a.g).then((function(t){return b=t,oc((t=a.g).b,cc,t.a)})).then((function(){return b}))}function ul(a){this.a=a,this.b=nc()}(e=Ic.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(_r(void 0)?Er().then((function(){return new Se((function(a,b){var t=l.document,e=setTimeout((function(){b(Error("Cordova framework is not ready."))}),1e3);t.addEventListener("deviceready",(function(){clearTimeout(e),a()}),!1)}))})):xe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof xr("universalLinks.subscribe",l))throw Tc("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",l))throw Tc("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",l))throw Tc("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",l))throw Tc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new u("cordova-not-ready")}))},e.Lb=function(a,b){return b(new u("operation-not-supported-in-this-environment")),Le()},e.Jb=function(){return xe(new u("operation-not-supported-in-this-environment"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(a,b,t,e){if(this.c)return xe(new u("redirect-operation-pending"));var n=this,r=l.document,g=null,o=null,c=null,p=null;return this.c=Le().then((function(){return zo(b),_c(n)})).then((function(){return function(a,b,t,e,n){var r=function(){for(var a=20,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}(),g=new Ho(b,e,null,r,new u("no-auth-event"),null,n),o=xr("BuildInfo.packageName",l);if("string"!=typeof o)throw new u("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",l),p={};if(Lr().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=o;else{if(!Lr().toLowerCase().match(/android/))return xe(new u("operation-not-supported-in-this-environment"));p.apn=o}c&&(p.appDisplayName=c),r=ol(r),p.sessionId=r;var h=wu(a.u,a.i,a.l,b,t,null,e,a.m,p,a.s,n);return a.ka().then((function(){var t=a.h;return a.w.a.set(cc,g.v(),t)})).then((function(){var t=xr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new u("invalid-cordova-configuration");var e=null;t((function(t){if(t){if("function"!=typeof(e=xr("cordova.plugins.browsertab.openUrl",l)))throw new u("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=xr("cordova.InAppBrowser.open",l)))throw new u("invalid-cordova-configuration");t=Lr(),a.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(n,a,b,t,e)})).then((function(){return new Se((function(t,e){o=function(){var e=xr("cordova.plugins.browsertab.close",l);return t(),"function"==typeof e&&e(),n.a&&"function"==typeof n.a.close&&(n.a.close(),n.a=null),!1},n.Ca(o),c=function(){g||(g=Dn(2e3).then((function(){e(new u("redirect-cancelled-by-user"))})))},p=function(){Yr()&&c()},r.addEventListener("resume",c,!1),Lr().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",p,!1)})).o((function(t){return Ac(n).then((function(){throw t}))}))})).ma((function(){c&&r.removeEventListener("resume",c,!1),p&&r.removeEventListener("visibilitychange",p,!1),g&&g.cancel(),o&&n.Qa(o),n.c=null}))},e.Ca=function(a){this.b.push(a),_c(this).o((function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new Ho("unknown",null,null,null,new u("no-auth-event")),a(b))}))},e.Qa=function(a){et(this.b,(function(b){return b==a}))};var Nc={name:"pendingRedirect",F:"session"};function Sc(a){return oc(a.b,Nc,a.a)}function kc(a,b,t){this.i={},this.w=0,this.D=a,this.u=b,this.m=t,this.h=[],this.f=!1,this.l=S(this.s,this),this.b=new Bc,this.B=new Hc,this.g=new ul(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Oc(this.D,this.u,this.m,C)}function Oc(a,b,t,e){var n=r.a.SDK_VERSION||null;return _r()?new Ic(a,b,t,n,e):new yu(a,b,t,n,e)}function Dc(a){a.f||(a.f=!0,a.a.Ca(a.l));var b=a.a;return a.a.ka().o((function(t){throw a.a==b&&a.reset(),t}))}function Rc(a){a.a.Ub()&&Dc(a).o((function(b){var t=new Ho("unknown",null,null,null,new u("operation-not-supported-in-this-environment"));Uc(b)&&a.s(t)})),a.a.Qb()||Gc(a.b)}function Cc(a,b){Z(a.h,b)||a.h.push(b),a.f||function(a){return a.b.get(Nc,a.a).then((function(b){return"pending"==b}))}(a.g).then((function(t){t?Sc(a.g).then((function(){Dc(a).o((function(t){var e=new Ho("unknown",null,null,null,new u("operation-not-supported-in-this-environment"));Uc(t)&&a.s(e)}))})):Rc(a)})).o((function(){Rc(a)}))}function Pc(a,b){et(a.h,(function(t){return t==b}))}kc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Oc(this.D,this.u,this.m),this.i={}},kc.prototype.s=function(a){if(!a)throw new u("invalid-auth-event");if(6e5<=O()-this.w&&(this.i={},this.w=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var b=!1,t=0;t<this.h.length;t++){var e=this.h[t];if(e.Cb(a.c,a.b)){(b=this.c[a.c])&&(b.h(a,e),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.w=O())),b=!0;break}}return Gc(this.b),b};var Lc=new Hr(2e3,1e4),xc=new Hr(3e4,6e4);function Mc(a,b,t,e,n,r,g){return a.a.Jb(b,t,e,(function(){a.f||(a.f=!0,a.a.Ca(a.l))}),(function(){a.reset()}),n,r,g)}function Uc(a){return!(!a||"auth/cordova-not-ready"!=a.code)}function Vc(a,b,t,e,n){var r;return function(a){return a.b.set(Nc,"pending",a.a)}(a.g).then((function(){return a.a.Kb(b,t,e,n).o((function(g){if(Uc(g))throw new u("operation-not-supported-in-this-environment");return r=g,Sc(a.g).then((function(){throw r}))})).then((function(){return a.a.Xb()?new Se((function(){})):Sc(a.g).then((function(){return a.pa()})).then((function(){})).o((function(){}))}))}))}function jc(a,b,t,e,n){return a.a.Lb(e,(function(e){b.la(t,null,e,n)}),Lc.get())}kc.prototype.pa=function(){return this.b.pa()};var Fc={};function qc(a,b,t){var e=b+":"+t;return Fc[e]||(Fc[e]=new kc(a,b,t)),Fc[e]}function Bc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gc(a){a.g||(a.g=!0,zc(a,!1,null,null))}function Kc(a){a.g&&!a.i&&zc(a,!1,null,null)}function Wc(a,b){if(a.b=function(){return Le(b)},a.f.length)for(var t=0;t<a.f.length;t++)a.f[t](b)}function zc(a,b,t,e){b?e?function(a,b){if(a.b=function(){return xe(b)},a.c.length)for(var t=0;t<a.c.length;t++)a.c[t](b)}(a,e):Wc(a,t):Wc(a,{user:null}),a.f=[],a.c=[]}function Hc(){}function Yc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(a){this.Bb=a},enumerable:!1})}function Xc(a,b){this.a=b,ei(this,"verificationId",a)}function Jc(a,b,t,e){return new Go(a).cb(b,t).then((function(t){return new Xc(t,e)}))}function Qc(a){var b=Qi(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new u("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ni(this,{token:a,expirationTime:Xr(1e3*b.exp),authTime:Xr(1e3*b.auth_time),issuedAtTime:Xr(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,signInSecondFactor:b.firebase&&b.firebase.sign_in_second_factor?b.firebase.sign_in_second_factor:null,claims:b})}function $c(a,b,t){var e=b&&b[eh];if(!e)throw new u("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=a,this.f=Tt(b),this.g=t,this.c=new lo(null,e),this.b=[];var n=this;X(b[Zc]||[],(function(t){(t=si(t))&&n.b.push(t)})),ei(this,"auth",this.a),ei(this,"session",this.c),ei(this,"hints",this.b)}Bc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Bc.prototype.h=function(a,b){if(a){this.reset(),this.g=!0;var t=a.c,e=a.b,n=a.a&&"auth/web-storage-unsupported"==a.a.code,r=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.i=!(!n&&!r),"unknown"!=t||n||r?a.a?(zc(this,!0,null,a.a),Le()):b.Da(t,e)?function(a,b,t){t=t.Da(b.c,b.b);var e=b.g,n=b.f,r=b.i,g=b.S(),o=!!b.c.match(/Redirect$/);t(e,n,g,r).then((function(t){zc(a,o,t,null)})).o((function(t){zc(a,o,null,t)}))}(this,a,b):xe(new u("invalid-auth-event")):(zc(this,!1,null,null),Le())}else xe(new u("invalid-auth-event"))},Bc.prototype.pa=function(){var a=this;return new Se((function(b,t){a.b?a.b().then(b,t):(a.f.push(b),a.c.push(t),function(a){var b=new u("timeout");a.a&&a.a.cancel(),a.a=Dn(xc.get()).then((function(){a.b||(a.g=!0,zc(a,!0,null,b))}))}(a))}))},Hc.prototype.h=function(a,b){if(a){var t=a.c,e=a.b;a.a?(b.la(a.c,null,a.a,a.b),Le()):b.Da(t,e)?function(a,b){var t=a.b,e=a.c;b.Da(e,t)(a.g,a.f,a.S(),a.i).then((function(n){b.la(e,n,null,t)})).o((function(n){b.la(e,null,n,t)}))}(a,b):xe(new u("invalid-auth-event"))}else xe(new u("invalid-auth-event"))},Xc.prototype.confirm=function(a){return a=Ko(this.verificationId,a),this.a(a)};var Zc="mfaInfo",eh="mfaPendingCredential";function nh(a,b,t,e){u.call(this,"multi-factor-auth-required",e,b),this.b=new $c(a,b,t),ei(this,"resolver",this.b)}function em(a,b,t){if(a&&q(a.serverResponse)&&"auth/multi-factor-auth-required"===a.code)try{return new nh(b,a.serverResponse,t,a.message)}catch(t){}return null}function rh(){}function ih(a){ei(this,"factorId",a.ea),this.a=a}function oh(a){if(ih.call(this,a),this.a.ea!=Go.PROVIDER_ID)throw new u("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function sh(a,b){for(var t in nn.call(this,a),b)this[t]=b[t]}function ah(a,b){this.a=a,this.b=[],this.c=S(this.wc,this),dn(this.a,"userReloaded",this.c);var t=[];b&&b.multiFactor&&b.multiFactor.enrolledFactors&&X(b.multiFactor.enrolledFactors,(function(e){var n=null,r={};if(e){e.uid&&(r[ci]=e.uid),e.displayName&&(r[ai]=e.displayName),e.enrollmentTime&&(r[ui]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[hi]=e.phoneNumber);try{n=new fi(r)}catch(t){}e=n}else e=null;e&&t.push(e)})),uh(this,t)}function uh(a,b){a.b=b,ei(a,"enrolledFactors",b)}function ch(a,b,t){if(this.h=a,this.i=b,this.g=t,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function hh(a){this.c=a,this.b=this.a=null}function fh(a){return a.b&&1e3*a.b.c||0}function lh(a,b){var t=b.refreshToken;a.b=Ji(b[na]||""),a.a=t}function ph(a,b){return function(a,b){return new Se((function(t,e){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?ca(a,a.u+"?key="+encodeURIComponent(a.c),(function(n){n?n.error?e(au(n)):n.access_token&&n.refresh_token?t(n):e(new u("internal-error")):e(new u("network-request-failed"))}),"POST",nr(b).toString(),a.g,a.m.get()):e(new u("internal-error"))}))}(a.c,b).then((function(t){return a.b=Ji(t.access_token),a.a=t.refresh_token,{accessToken:a.b.toString(),refreshToken:a.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(a.a=null),t}))}function dh(a,b){this.a=a||null,this.b=b||null,ni(this,{lastSignInTime:Xr(b||null),creationTime:Xr(a||null)})}function vh(a,b,t,e,n,r){ni(this,{uid:a,displayName:e||null,photoURL:n||null,email:t||null,phoneNumber:r||null,providerId:b})}function yh(a,b,t){this.N=[],this.l=a.apiKey,this.m=a.appName,this.s=a.authDomain||null,a=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION):null,this.a=new ta(this.l,M(C),a),this.b=new hh(this.a),Eh(this,b[na]),lh(this.b,b),ei(this,"refreshToken",this.b.a),Nh(this,t||{}),An.call(this),this.P=!1,this.s&&Ur()&&(this.i=qc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(a){return new ch((function(){return a.I(!0)}),(function(b){return!(!b||"auth/network-request-failed"!=b.code)}),(function(){var b=fh(a.b)-O()-3e5;return 0<b?b:0}))}(this),this.Z=S(this.Ma,this);var e=this;this.oa=null,this.za=function(t){e.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){gh(e,t.c)},this.$=null,this.O=new ah(this,t),ei(this,"multiFactor",this.O)}function mh(a,b){a.aa&&td(a.aa,"languageCodeChanged",a.za),(a.aa=b)&&dn(b,"languageCodeChanged",a.za)}function gh(a,b){a.W=b,ua(a.a,r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,a.W):null)}function bh(a,b){a.$&&td(a.$,"frameworkChanged",a.ya),(a.$=b)&&dn(b,"frameworkChanged",a.ya)}function wh(a){try{return r.a.app(a.m).auth()}catch(t){throw new u("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function Ih(a){a.D||a.B.b||(a.B.start(),td(a,"tokenChanged",a.Z),dn(a,"tokenChanged",a.Z))}function Th(a){td(a,"tokenChanged",a.Z),a.B.stop()}function Eh(a,b){a.xa=b,ei(a,"_lat",b)}function _h(a){for(var b=[],t=0;t<a.R.length;t++)b.push(a.R[t](a));return Ue(b).then((function(){return a}))}function Ah(a){a.i&&!a.P&&(a.P=!0,Cc(a.i,a))}function Nh(a,b){ni(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,tenantId:b.tenantId||null,metadata:new dh(b.createdAt,b.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Sh(){}function kh(a){return Le().then((function(){if(a.D)throw new u("app-deleted")}))}function Oh(a){return Q(a.providerData,(function(b){return b.providerId}))}function Dh(a,b){b&&(Rh(a,b.providerId),a.providerData.push(b))}function Rh(a,b){et(a.providerData,(function(t){return t.providerId==b}))}function Ch(a,b,t){("uid"!=b||t)&&a.hasOwnProperty(b)&&ei(a,b,t)}function Ph(a,b){a!=b&&(ni(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,tenantId:b.tenantId,providerData:[]}),b.metadata?ei(a,"metadata",function(a){return new dh(a.a,a.b)}(b.metadata)):ei(a,"metadata",new dh),X(b.providerData,(function(t){Dh(a,t)})),function(a,b){a.b=b.b,a.a=b.a}(a.b,b.b),ei(a,"refreshToken",a.b.a),uh(a.O,b.O.b))}function Lh(a){return a.I().then((function(b){var t=a.isAnonymous;return function(a,b){return ou(a.a,Ma,{idToken:b}).then(S(a.Ic,a))}(a,b).then((function(){return t||Ch(a,"isAnonymous",!1),b}))}))}function xh(a,b){b[na]&&a.xa!=b[na]&&(lh(a.b,b),a.dispatchEvent(new sh("tokenChanged")),Eh(a,b[na]),Ch(a,"refreshToken",a.b.a))}function Mh(a,b){return Lh(a).then((function(){if(Z(Oh(a),b))return _h(a).then((function(){throw new u("provider-already-linked")}))}))}function Uh(a,b,t){return ri({user:a,credential:Wo(b),additionalUserInfo:b=no(b),operationType:t})}function Vh(a,b){return xh(a,b),a.reload().then((function(){return a}))}function jh(a,b,t,e,n){if(!Ur())return xe(new u("operation-not-supported-in-this-environment"));if(a.h&&!n)return xe(a.h);var o=eo(t.providerId),g=Kr(a.uid+":::"),c=null;(!Fr()||Ar())&&a.s&&t.isOAuthProvider&&(c=wu(a.s,a.l,a.m,b,t,null,g,r.a.SDK_VERSION||null,null,null,a.tenantId));var h=wr(c,o&&o.ta,o&&o.sa);return e=e().then((function(){if(qh(a),!n)return a.I().then((function(){}))})).then((function(){return Mc(a.i,h,b,t,g,!!c,a.tenantId)})).then((function(){return new Se((function(p,t){a.la(b,null,new u("cancelled-popup-request"),a.g||null),a.f=p,a.w=t,a.g=g,a.c=jc(a.i,a,b,h,g)}))})).then((function(p){return h&&gr(h),p?ri(p):null})).o((function(p){throw h&&gr(h),p})),Bh(a,e,n)}function Fh(a,b,t,e,n){if(!Ur())return xe(new u("operation-not-supported-in-this-environment"));if(a.h&&!n)return xe(a.h);var r=null,g=Kr(a.uid+":::");return e=e().then((function(){if(qh(a),!n)return a.I().then((function(){}))})).then((function(){return a.fa=g,_h(a)})).then((function(t){return a.ga&&(t=(t=a.ga).b.set(Wh,a.v(),t.a)),t})).then((function(){return Vc(a.i,b,t,g,a.tenantId)})).o((function(t){if(r=t,a.ga)return zh(a.ga);throw r})).then((function(){if(r)throw r})),Bh(a,e,n)}function qh(a){if(!a.i||!a.P){if(a.i&&!a.P)throw new u("internal-error");throw new u("auth-domain-config-required")}}function Bh(a,b,t){var e=function(a,b,t){return a.h&&!t?(b.cancel(),xe(a.h)):b.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(a.h||a.dispatchEvent(new sh("userInvalidated")),a.h=t),t}))}(a,b,t);return a.N.push(e),e.ma((function(){tt(a.N,e)})),e.o((function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=em(t.v(),wh(a),S(a.hc,a))),e||t}))}function Gh(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},t={};if(!a.stsTokenManager||!a.stsTokenManager.accessToken)return null;t[na]=a.stsTokenManager.accessToken,t.refreshToken=a.stsTokenManager.refreshToken||null;var e=new yh(b,t,a);return a.providerData&&X(a.providerData,(function(t){t&&Dh(e,ri(t))})),a.redirectEventId&&(e.fa=a.redirectEventId),e}function Kh(a){this.a=a,this.b=nc()}$c.prototype.Pc=function(a){var b=this;return a.ob(this.a.b,this.c).then((function(t){var e=Tt(b.f);return delete e[Zc],delete e[eh],_t(e,t),b.g(e)}))},D(nh,u),rh.prototype.ob=function(a,b,t){return b.type==po?function(a,b,t,e){return t.Fa().then((function(t){return t={idToken:t},void 0!==e&&(t.displayName=e),_t(t,{phoneVerificationInfo:Bo(a.a)}),ou(b,La,t)}))}(this,a,b,t):function(a,b,t){return t.Fa().then((function(t){return _t(t={mfaPendingCredential:t},{phoneVerificationInfo:Bo(a.a)}),ou(b,xa,t)}))}(this,a,b)},D(ih,rh),D(oh,ih),D(sh,nn),(e=ah.prototype).wc=function(a){uh(this,function(a){var b=[];return X(a.mfaInfo||[],(function(t){(t=si(t))&&b.push(t)})),b}(a.ed))},e.Ob=function(){return this.a.I().then((function(a){return new lo(a,null)}))},e.dc=function(a,b){var t=this,e=this.a.a;return this.Ob().then((function(t){return a.ob(e,t,b)})).then((function(e){return xh(t.a,e),t.a.reload()}))},e.$c=function(a){var b=this,t="string"==typeof a?a:a.uid,e=this.a.a;return this.a.I().then((function(n){return ou(e,iu,{idToken:n,mfaEnrollmentId:t})})).then((function(e){var n=J(b.b,(function(g){return g.uid!=t}));return uh(b,n),xh(b.a,e),b.a.reload().o((function(g){if("auth/user-token-expired"!=g.code)throw g}))}))},e.v=function(){return{multiFactor:{enrolledFactors:Q(this.b,(function(a){return a.v()}))}}},ch.prototype.start=function(){this.a=this.c,function t(a,b){a.stop(),a.b=Dn(function(a,b){return b?(a.a=a.c,a.g()):(b=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),b)}(a,b)).then((function(){return function(){var a=l.document,b=null;return Yr()||!a?Le():new Se((function(t){b=function(){Yr()&&(a.removeEventListener("visibilitychange",b,!1),t())},a.addEventListener("visibilitychange",b,!1)})).o((function(t){throw a.removeEventListener("visibilitychange",b,!1),t}))}()})).then((function(){return a.h()})).then((function(){t(a,!0)})).o((function(e){a.i(e)&&t(a,!1)}))}(this,!0)},ch.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},hh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:fh(this)}},hh.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?xe(new u("user-token-expired")):a||!this.b||O()>fh(this)-3e4?this.a?ph(this,{grant_type:"refresh_token",refresh_token:this.a}):Le(null):Le({accessToken:this.b.toString(),refreshToken:this.a})},dh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},D(yh,An),yh.prototype.va=function(a){this.oa=a,aa(this.a,a)},yh.prototype.ja=function(){return this.oa},yh.prototype.Ea=function(){return it(this.W)},yh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},ei(yh.prototype,"providerId","firebase"),(e=yh.prototype).reload=function(){var a=this;return Bh(this,kh(this).then((function(){return Lh(a).then((function(){return _h(a)})).then(Sh)})))},e.mc=function(a){return this.I(a).then((function(b){return new Qc(b)}))},e.I=function(a){var b=this;return Bh(this,kh(this).then((function(){return b.b.getToken(a)})).then((function(t){if(!t)throw new u("internal-error");return t.accessToken!=b.xa&&(Eh(b,t.accessToken),b.dispatchEvent(new sh("tokenChanged"))),Ch(b,"refreshToken",t.refreshToken),t.accessToken})))},e.Ic=function(a){if(!(a=a.users)||!a.length)throw new u("internal-error");Nh(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var b=function(a){return(a=a.providerUserInfo)&&a.length?Q(a,(function(b){return new vh(b.rawId,b.providerId,b.email,b.displayName,b.photoUrl,b.phoneNumber)})):[]}(a),t=0;t<b.length;t++)Dh(this,b[t]);Ch(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new sh("userReloaded",{ed:a}))},e.Jc=function(a){return Zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(a)},e.pb=function(a){var b=this,t=null;return Bh(this,a.c(this.a,this.uid).then((function(e){return xh(b,e),t=Uh(b,e,"reauthenticate"),b.h=null,b.reload()})).then((function(){return t})),!0)},e.Ac=function(a){return Zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(a)},e.mb=function(a){var b=this,t=null;return Bh(this,Mh(this,a.providerId).then((function(){return b.I()})).then((function(t){return a.b(b.a,t)})).then((function(e){return t=Uh(b,e,"link"),Vh(b,e)})).then((function(){return t})))},e.Bc=function(a,b){var t=this;return Bh(this,Mh(this,"phone").then((function(){return Jc(wh(t),a,b,S(t.mb,t))})))},e.Kc=function(a,b){var t=this;return Bh(this,Le().then((function(){return Jc(wh(t),a,b,S(t.pb,t))})),!0)},e.xb=function(a){var b=this;return Bh(this,this.I().then((function(t){return b.a.xb(t,a)})).then((function(t){return xh(b,t),b.reload()})))},e.cd=function(a){var b=this;return Bh(this,this.I().then((function(t){return a.b(b.a,t)})).then((function(t){return xh(b,t),b.reload()})))},e.yb=function(a){var b=this;return Bh(this,this.I().then((function(t){return b.a.yb(t,a)})).then((function(t){return xh(b,t),b.reload()})))},e.zb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return kh(this);var b=this;return Bh(this,this.I().then((function(t){return b.a.zb(t,{displayName:a.displayName,photoUrl:a.photoURL})})).then((function(t){return xh(b,t),Ch(b,"displayName",t.displayName||null),Ch(b,"photoURL",t.photoUrl||null),X(b.providerData,(function(t){"password"===t.providerId&&(ei(t,"displayName",b.displayName),ei(t,"photoURL",b.photoURL))})),_h(b)})).then(Sh))},e.ad=function(a){var b=this;return Bh(this,Lh(this).then((function(t){return Z(Oh(b),a)?function(a,b,t){return ou(a,Ra,{idToken:b,deleteProvider:t})}(b.a,t,[a]).then((function(t){var e={};return X(t.providerUserInfo||[],(function(t){e[t.providerId]=!0})),X(Oh(b),(function(t){e[t]||Rh(b,t)})),e[Go.PROVIDER_ID]||ei(b,"phoneNumber",null),_h(b)})):_h(b).then((function(){throw new u("no-such-provider")}))})))},e.delete=function(){var a=this;return Bh(this,this.I().then((function(b){return ou(a.a,Da,{idToken:b})})).then((function(){a.dispatchEvent(new sh("userDeleted"))}))).then((function(){for(var b=0;b<a.N.length;b++)a.N[b].cancel("app-deleted");mh(a,null),bh(a,null),a.N=[],a.D=!0,Th(a),ei(a,"refreshToken",null),a.i&&Pc(a.i,a)}))},e.Cb=function(a,b){return!!("linkViaPopup"==a&&(this.g||null)==b&&this.f||"reauthViaPopup"==a&&(this.g||null)==b&&this.f||"linkViaRedirect"==a&&(this.fa||null)==b||"reauthViaRedirect"==a&&(this.fa||null)==b)},e.la=function(a,b,t,e){"linkViaPopup"!=a&&"reauthViaPopup"!=a||e!=(this.g||null)||(t&&this.w?this.w(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(a,b){return"linkViaPopup"==a&&b==(this.g||null)?S(this.Hb,this):"reauthViaPopup"==a&&b==(this.g||null)?S(this.Ib,this):"linkViaRedirect"==a&&(this.fa||null)==b?S(this.Hb,this):"reauthViaRedirect"==a&&(this.fa||null)==b?S(this.Ib,this):null},e.Cc=function(a){var b=this;return jh(this,"linkViaPopup",a,(function(){return Mh(b,a.providerId).then((function(){return _h(b)}))}),!1)},e.Lc=function(a){return jh(this,"reauthViaPopup",a,(function(){return Le()}),!0)},e.Dc=function(a){var b=this;return Fh(this,"linkViaRedirect",a,(function(){return Mh(b,a.providerId)}),!1)},e.Mc=function(a){return Fh(this,"reauthViaRedirect",a,(function(){return Le()}),!0)},e.Hb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Bh(this,this.I().then((function(g){return Ea(n.a,{requestUri:a,postBody:e,sessionId:b,idToken:g})})).then((function(g){return r=Uh(n,g,"link"),Vh(n,g)})).then((function(){return r})))},e.Ib=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Bh(this,Le().then((function(){return mo(_a(n.a,{requestUri:a,sessionId:b,postBody:e,tenantId:t}),n.uid)})).then((function(t){return r=Uh(n,t,"reauthenticate"),xh(n,t),n.h=null,n.reload()})).then((function(){return r})),!0)},e.qb=function(a){var b=this,t=null;return Bh(this,this.I().then((function(e){return t=e,void 0===a||It(a)?{}:zi(new Mi(a))})).then((function(e){return b.a.qb(t,e)})).then((function(t){if(b.email!=t)return b.reload()})).then((function(){})))},e.Ab=function(a,b){var t=this,e=null;return Bh(this,this.I().then((function(t){return e=t,void 0===b||It(b)?{}:zi(new Mi(b))})).then((function(n){return t.a.Ab(e,a,n)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.hc=function(a){var b=null,t=this;return Bh(this,a=mo(Le(a),t.uid).then((function(e){return b=Uh(t,e,"reauthenticate"),xh(t,e),t.h=null,t.reload()})).then((function(){return b})),!0)},e.toJSON=function(){return this.v()},e.v=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&_t(a,this.metadata.v()),X(this.providerData,(function(b){a.providerData.push(function(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&(b[t]=a[t]);return b}(b))})),_t(a,this.O.v()),a};var Wh={name:"redirectUser",F:"session"};function zh(a){return oc(a.b,Wh,a.a)}function Hh(a){this.a=a,this.b=nc(),this.c=null,this.f=function(a){var b=Jh("local"),t=Jh("session"),e=Jh("none");return function(a,b,t){var e=ic(b,t),n=rc(a,b.F);return a.get(b,t).then((function(r){var g=null;try{g=Gr(l.localStorage.getItem(e))}catch(t){}if(g&&!r)return l.localStorage.removeItem(e),a.set(b,g,t);g&&r&&"localStorage"!=n.type&&l.localStorage.removeItem(e)}))}(a.b,b,a.a).then((function(){return a.b.get(t,a.a)})).then((function(n){return n?t:a.b.get(e,a.a).then((function(t){return t?e:a.b.get(b,a.a).then((function(g){return g?b:a.b.get(Xh,a.a).then((function(t){return t?Jh(t):b}))}))}))})).then((function(t){return a.c=t,Yh(a,t.F)})).o((function(){a.c||(a.c=b)}))}(this),this.b.addListener(Jh("local"),this.a,S(this.g,this))}function Yh(a,b){var t,e=[];for(t in tc)tc[t]!==b&&e.push(oc(a.b,Jh(tc[t]),a.a));return e.push(oc(a.b,Xh,a.a)),function(a){return new Se((function(b,t){var e=a.length,n=[];if(e)for(var r=function(p,t){e--,n[p]=t,0==e&&b(n)},g=function(p){t(p)},o=0;o<a.length;o++)Me(a[o],k(r,o),g);else b(n)}))}(e)}Hh.prototype.g=function(){var a=this,b=Jh("local");tf(this,(function(){return Le().then((function(){return a.c&&"local"!=a.c.F?a.b.get(b,a.a):null})).then((function(t){if(t)return Yh(a,"local").then((function(){a.c=b}))}))}))};var Xh={name:"persistence",F:"session"};function Jh(a){return{name:"authUser",F:a}}function Qh(a,b){return tf(a,(function(){return a.b.set(a.c,b.v(),a.a)}))}function $h(a){return tf(a,(function(){return oc(a.b,a.c,a.a)}))}function Zh(a,b){return tf(a,(function(){return a.b.get(a.c,a.a).then((function(t){return t&&b&&(t.authDomain=b),Gh(t||{})}))}))}function tf(a,b){return a.f=a.f.then(b,b),a.f}function ef(a){if(this.l=!1,ei(this,"settings",new Yc),ei(this,"app",a),!hf(this).options||!hf(this).options.apiKey)throw new u("invalid-api-key");a=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION):null,this.b=new ta(hf(this).options&&hf(this).options.apiKey,M(C),a),this.P=[],this.m=[],this.O=[],this.$b=r.a.INTERNAL.createSubscribe(S(this.xc,this)),this.W=void 0,this.ac=r.a.INTERNAL.createSubscribe(S(this.yc,this)),uf(this,null),this.i=new Hh(hf(this).options.apiKey+":"+hf(this).name),this.B=new Kh(hf(this).options.apiKey+":"+hf(this).name),this.Z=df(this,function(a){var b=hf(a).options.authDomain,t=function(a){var b=function(a,b){return a.b.get(Wh,a.a).then((function(t){return t&&b&&(t.authDomain=b),Gh(t||{})}))}(a.B,hf(a).options.authDomain).then((function(t){return(a.D=t)&&(t.ga=a.B),zh(a.B)}));return df(a,b)}(a).then((function(){return Zh(a.i,b)})).then((function(t){return t?(t.ga=a.B,a.D&&(a.D.fa||null)==(t.fa||null)?t:t.reload().then((function(){return Qh(a.i,t).then((function(){return t}))})).o((function(e){return"auth/network-request-failed"==e.code?t:$h(a.i)}))):null})).then((function(t){uf(a,t||null)}));return df(a,t)}(this)),this.h=df(this,function(a){return a.Z.then((function(){return sf(a)})).o((function(){})).then((function(){if(!a.l)return a.oa()})).o((function(){})).then((function(){if(!a.l){a.aa=!0;var b=a.i;b.b.addListener(Jh("local"),b.a,a.oa)}}))}(this)),this.aa=!1,this.oa=S(this.Xc,this),this.Ma=S(this.ca,this),this.xa=S(this.jc,this),this.ya=S(this.uc,this),this.za=S(this.vc,this),this.a=null,function(a){var b=hf(a).options.authDomain,t=hf(a).options.apiKey;b&&Ur()&&(a.Zb=a.Z.then((function(){if(!a.l){if(a.a=qc(b,t,hf(a).name),Cc(a.a,a),ff(a)&&Ah(ff(a)),a.D){Ah(a.D);var e=a.D;e.va(a.ja()),mh(e,a),gh(e=a.D,a.N),bh(e,a),a.D=null}return a.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.Ec,this),this.s=0,An.call(this),function(a){Object.defineProperty(a,"lc",{get:function(){return this.ja()},set:function(b){this.va(b)},enumerable:!1}),a.$=null,Object.defineProperty(a,"ti",{get:function(){return this.S()},set:function(b){this.ub(b)},enumerable:!1}),a.R=null}(this),this.N=[]}function nf(a){nn.call(this,"languageCodeChanged"),this.g=a}function rf(a){nn.call(this,"frameworkChanged"),this.c=a}function of(a){return a.Zb||xe(new u("auth-domain-config-required"))}function sf(a){if(!Ur())return xe(new u("operation-not-supported-in-this-environment"));var b=of(a).then((function(){return a.a.pa()})).then((function(t){return t?ri(t):null}));return df(a,b)}function af(a,b){var t={};return t.apiKey=hf(a).options.apiKey,t.authDomain=hf(a).options.authDomain,t.appName=hf(a).name,a.Z.then((function(){return function(a,b,t,e){var n=new yh(a,b);return t&&(n.ga=t),e&&gh(n,e),n.reload().then((function(){return n}))}(t,b,a.B,a.Ea())})).then((function(t){return ff(a)&&t.uid==ff(a).uid?(Ph(ff(a),t),a.ca(t)):(uf(a,t),Ah(t),a.ca(t))})).then((function(){pf(a)}))}function uf(a,b){ff(a)&&(function(a,b){et(a.R,(function(t){return t==b}))}(ff(a),a.Ma),td(ff(a),"tokenChanged",a.xa),td(ff(a),"userDeleted",a.ya),td(ff(a),"userInvalidated",a.za),Th(ff(a))),b&&(b.R.push(a.Ma),dn(b,"tokenChanged",a.xa),dn(b,"userDeleted",a.ya),dn(b,"userInvalidated",a.za),0<a.s&&Ih(b)),ei(a,"currentUser",b),b&&(b.va(a.ja()),mh(b,a),gh(b,a.N),bh(b,a))}function cf(a,b){var t=null,e=null;return df(a,b.then((function(n){return t=Wo(n),e=no(n),af(a,n)}),(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=em(t.v(),a,S(a.ic,a))),e||t})).then((function(){return ri({user:ff(a),credential:t,additionalUserInfo:e,operationType:"signIn"})})))}function hf(a){return a.app}function ff(a){return a.currentUser}function lf(a){return ff(a)&&ff(a)._lat||null}function pf(a){if(a.aa){for(var b=0;b<a.m.length;b++)a.m[b]&&a.m[b](lf(a));if(a.W!==a.getUid()&&a.O.length)for(a.W=a.getUid(),b=0;b<a.O.length;b++)a.O[b]&&a.O[b](lf(a))}}function df(a,b){return a.P.push(b),b.ma((function(){tt(a.P,b)})),b}function vf(){}function yf(){this.a={},this.b=1e12}Hh.prototype.tb=function(a){var b=null,t=this;return function(a){var b=new u("invalid-persistence-type"),t=new u("unsupported-persistence-type");t:{for(e in tc)if(tc[e]==a){var e=!0;break t}e=!1}if(!e||"string"!=typeof a)throw b;switch(Sr()){case"ReactNative":if("session"===a)throw t;break;case"Node":if("none"!==a)throw t;break;default:if(!Mr()&&"none"!==a)throw t}}(a),tf(this,(function(){return a!=t.c.F?t.b.get(t.c,t.a).then((function(e){return b=e,Yh(t,a)})).then((function(){if(t.c=Jh(a),b)return t.b.set(t.c,b,t.a)})):Le()}))},D(ef,An),D(nf,nn),D(rf,nn),(e=ef.prototype).tb=function(a){return df(this,a=this.i.tb(a))},e.va=function(a){this.$===a||this.l||(this.$=a,aa(this.b,this.$),this.dispatchEvent(new nf(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var a=l.navigator;this.va(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},e.Ec=function(a){this.N.push(a),ua(this.b,r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,this.N):null),this.dispatchEvent(new rf(this.N))},e.Ea=function(){return it(this.N)},e.ub=function(a){this.R===a||this.l||(this.R=a,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:hf(this).options.apiKey,authDomain:hf(this).options.authDomain,appName:hf(this).name,currentUser:ff(this)&&ff(this).v()}},e.Cb=function(a,b){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==b&&!!this.f;default:return!1}},e.la=function(a,b,t,e){"signInViaPopup"==a&&this.g==e&&(t&&this.w?this.w(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.g==b&&this.f?S(this.gc,this):null},e.gc=function(a,b,t,e){var n=this,r={requestUri:a,postBody:e,sessionId:b,tenantId:t};return this.c&&(this.c.cancel(),this.c=null),n.Z.then((function(){return cf(n,Ta(n.b,r))}))},e.Vc=function(a){if(!Ur())return xe(new u("operation-not-supported-in-this-environment"));var b=this,t=eo(a.providerId),e=Kr(),n=null;(!Fr()||Ar())&&hf(this).options.authDomain&&a.isOAuthProvider&&(n=wu(hf(this).options.authDomain,hf(this).options.apiKey,hf(this).name,"signInViaPopup",a,null,e,r.a.SDK_VERSION||null,null,null,this.S()));var o=wr(n,t&&t.ta,t&&t.sa);return df(this,t=of(this).then((function(g){return Mc(g,o,"signInViaPopup",a,e,!!n,b.S())})).then((function(){return new Se((function(g,t){b.la("signInViaPopup",null,new u("cancelled-popup-request"),b.g),b.f=g,b.w=t,b.g=e,b.c=jc(b.a,b,"signInViaPopup",o,e)}))})).then((function(g){return o&&gr(o),g?ri(g):null})).o((function(g){throw o&&gr(o),g})))},e.Wc=function(a){if(!Ur())return xe(new u("operation-not-supported-in-this-environment"));var b=this;return df(this,of(this).then((function(){return function(a){return tf(a,(function(){return a.b.set(Xh,a.c.F,a.a)}))}(b.i)})).then((function(){return Vc(b.a,"signInViaRedirect",a,void 0,b.S())})))},e.pa=function(){var a=this;return sf(this).then((function(b){return a.a&&Kc(a.a.b),b})).o((function(b){throw a.a&&Kc(a.a.b),b}))},e.bd=function(a){if(!a)return xe(new u("null-user"));if(this.R!=a.tenantId)return xe(new u("tenant-id-mismatch"));var b=this,t={};t.apiKey=hf(this).options.apiKey,t.authDomain=hf(this).options.authDomain,t.appName=hf(this).name;var e=function(a,b,t,e){var n=a.b,r={};return r[na]=n.b&&n.b.toString(),r.refreshToken=n.a,b=new yh(b||{apiKey:a.l,authDomain:a.s,appName:a.m},r),t&&(b.ga=t),e&&gh(b,e),Ph(b,a),b}(a,t,b.B,b.Ea());return df(this,this.h.then((function(){if(hf(b).options.apiKey!=a.l)return e.reload()})).then((function(){return ff(b)&&a.uid==ff(b).uid?(Ph(ff(b),a),b.ca(a)):(uf(b,e),Ah(e),b.ca(e))})).then((function(){pf(b)})))},e.wb=function(){var a=this;return df(this,this.h.then((function(){return a.a&&Kc(a.a.b),ff(a)?(uf(a,null),$h(a.i).then((function(){pf(a)}))):Le()})))},e.Xc=function(){var a=this;return Zh(this.i,hf(this).options.authDomain).then((function(b){if(!a.l){var t;if(t=ff(a)&&b){t=ff(a).uid;var e=b.uid;t=null!=t&&""!==t&&null!=e&&""!==e&&t==e}if(t)return Ph(ff(a),b),ff(a).I();(ff(a)||b)&&(uf(a,b),b&&(Ah(b),b.ga=a.B),a.a&&Cc(a.a,a),pf(a))}}))},e.ca=function(a){return Qh(this.i,a)},e.jc=function(){pf(this),this.ca(ff(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(a){var b=this;return this.h.then((function(){return cf(b,Le(a))}))},e.xc=function(a){var b=this;this.addAuthTokenListener((function(){a.next(ff(b))}))},e.yc=function(a){var b=this;!function(a,b){a.O.push(b),df(a,a.h.then((function(){!a.l&&Z(a.O,b)&&a.W!==a.getUid()&&(a.W=a.getUid(),b(lf(a)))})))}(this,(function(){a.next(ff(b))}))},e.Gc=function(a,b,t){var e=this;return this.aa&&Promise.resolve().then((function(){I(a)?a(ff(e)):I(a.next)&&a.next(ff(e))})),this.$b(a,b,t)},e.Fc=function(a,b,t){var e=this;return this.aa&&Promise.resolve().then((function(){e.W=e.getUid(),I(a)?a(ff(e)):I(a.next)&&a.next(ff(e))})),this.ac(a,b,t)},e.kc=function(a){var b=this;return df(this,this.h.then((function(){return ff(b)?ff(b).I(a).then((function(t){return{accessToken:t}})):null})))},e.Rc=function(a){var b=this;return this.h.then((function(){return cf(b,ou(b.b,Za,{token:a}))})).then((function(t){var e=t.user;return Ch(e,"isAnonymous",!1),b.ca(e),t}))},e.Sc=function(a,b){var t=this;return this.h.then((function(){return cf(t,ou(t.b,tu,{email:a,password:b}))}))},e.cc=function(a,b){var t=this;return this.h.then((function(){return cf(t,ou(t.b,ka,{email:a,password:b}))}))},e.Ya=function(a){var b=this;return this.h.then((function(){return cf(b,a.ia(b.b))}))},e.Qc=function(a){return Zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(a)},e.vb=function(){var a=this;return this.h.then((function(){var b=ff(a);if(b&&b.isAnonymous){var t=ri({providerId:null,isNewUser:!1});return ri({user:b,credential:null,additionalUserInfo:t,operationType:"signIn"})}return cf(a,a.b.vb()).then((function(t){var e=t.user;return Ch(e,"isAnonymous",!0),a.ca(e),t}))}))},e.getUid=function(){return ff(this)&&ff(this).uid||null},e.bc=function(a){this.addAuthTokenListener(a),this.s++,0<this.s&&ff(this)&&Ih(ff(this))},e.Nc=function(a){var b=this;X(this.m,(function(t){t==a&&b.s--})),0>this.s&&(this.s=0),0==this.s&&ff(this)&&Th(ff(this)),this.removeAuthTokenListener(a)},e.addAuthTokenListener=function(a){var b=this;this.m.push(a),df(this,this.h.then((function(){b.l||Z(b.m,a)&&a(lf(b))})))},e.removeAuthTokenListener=function(a){et(this.m,(function(b){return b==a}))},e.delete=function(){this.l=!0;for(var a=0;a<this.P.length;a++)this.P[a].cancel("app-deleted");return this.P=[],this.i&&(a=this.i).b.removeListener(Jh("local"),a.a,this.oa),this.a&&(Pc(this.a,this),Kc(this.a.b)),Promise.resolve()},e.fc=function(a){return df(this,function(a,b){return ou(a,Oa,{identifier:b,continueUri:Vr()?vr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,a))},e.zc=function(a){return!!jo(a)},e.sb=function(a,b){var t=this;return df(this,Le().then((function(){var t=new Mi(b);if(!t.c)throw new u("argument-error",ji+" must be true when sending sign in link to email");return zi(t)})).then((function(e){return t.b.sb(a,e)})).then((function(){})))},e.fd=function(a){return this.Pa(a).then((function(b){return b.data.email}))},e.jb=function(a,b){return df(this,this.b.jb(a,b).then((function(){})))},e.Pa=function(a){return df(this,this.b.Pa(a).then((function(b){return new pi(b)})))},e.fb=function(a){return df(this,this.b.fb(a).then((function(){})))},e.rb=function(a,b){var t=this;return df(this,Le().then((function(){return void 0===b||It(b)?{}:zi(new Mi(b))})).then((function(e){return t.b.rb(a,e)})).then((function(){})))},e.Uc=function(a,b){return df(this,Jc(this,a,b,S(this.Ya,this)))},e.Tc=function(a,b){var t=this;return df(this,Le().then((function(){var e=b||vr(),n=Vo(a,e);if(!(e=jo(e)))throw new u("argument-error","Invalid email link!");if(e.tenantId!==t.S())throw new u("tenant-id-mismatch");return t.Ya(n)})))},vf.prototype.render=function(){},vf.prototype.reset=function(){},vf.prototype.getResponse=function(){},vf.prototype.execute=function(){};var mf=null;function gf(a,b){return(b=bf(b))&&a.a[b]||null}function bf(a){return(a=void 0===a?1e12:a)?a.toString():null}function wf(a,b){this.g=!1,this.c=b,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=pe(a);var t=this;this.i=function(){t.execute()},this.h?this.execute():dn(this.f,"click",this.i)}function If(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function Tf(){}function Ef(){}yf.prototype.render=function(a,b){return this.a[this.b.toString()]=new wf(a,b),this.b++},yf.prototype.reset=function(a){var b=gf(this,a);a=bf(a),b&&a&&(b.delete(),delete this.a[a])},yf.prototype.getResponse=function(a){return(a=gf(this,a))?a.getResponse():null},yf.prototype.execute=function(a){(a=gf(this,a))&&a.execute()},wf.prototype.getResponse=function(){return If(this),this.b},wf.prototype.execute=function(){If(this);var a=this;this.a||(this.a=setTimeout((function(){a.b=function(){for(var a=50,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}();var b=a.c.callback,t=a.c["expired-callback"];if(b)try{b(a.b)}catch(t){}a.a=setTimeout((function(){if(a.a=null,a.b=null,t)try{t()}catch(t){}a.h&&a.execute()}),6e4)}),500))},wf.prototype.delete=function(){If(this),this.g=!0,clearTimeout(this.a),this.a=null,td(this.f,"click",this.i)},ei(Tf,"FACTOR_ID","phone"),Ef.prototype.g=function(){return mf||(mf=new yf),Le(mf)},Ef.prototype.c=function(){};var _f=null;function Af(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nf=new Nt(Ot,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sf=new Hr(3e4,6e4);Af.prototype.g=function(a){var b=this;return new Se((function(t,e){var n=setTimeout((function(){e(new u("network-request-failed"))}),Sf.get());!l.grecaptcha||a!==b.f&&!b.b?(l[b.a]=function(){if(l.grecaptcha){b.f=a;var g=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=g(t,e),b.b++,t},clearTimeout(n),t(l.grecaptcha)}else clearTimeout(n),e(new u("internal-error"));delete l[b.a]},Le(Hs(Pt(Nf,{onload:b.a,hl:a||""}))).o((function(){clearTimeout(n),e(new u("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(n),t(l.grecaptcha))}))},Af.prototype.c=function(){this.b--};var kf=null;function Of(a,b,t,e,n,r,g){if(ei(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=b,this.g=null,g?(_f||(_f=new Ef),g=_f):(kf||(kf=new Af),g=kf),this.m=g,this.a=t||{theme:"light",type:"image"},this.h=[],this.a[Cf])throw new u("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Pf],!l.document)throw new u("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!pe(b)||!this.i&&pe(b).hasChildNodes())throw new u("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ta(a,r||null,n||null),this.w=e||function(){return null};var o=this;this.l=[];var c=this.a[Df];this.a[Df]=function(t){if(Lf(o,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=xr(c,l);"function"==typeof e&&e(t)}};var p=this.a[Rf];this.a[Rf]=function(){if(Lf(o,null),"function"==typeof p)p();else if("string"==typeof p){var t=xr(p,l);"function"==typeof t&&t()}}}var Df="callback",Rf="expired-callback",Cf="sitekey",Pf="size";function Lf(a,b){for(var t=0;t<a.l.length;t++)try{a.l[t](b)}catch(t){}}function xf(a,b){return a.h.push(b),b.ma((function(){tt(a.h,b)})),b}function Mf(a){if(a.D)throw new u("internal-error","RecaptchaVerifier instance has been destroyed.")}function Uf(a,b,t){var e=!1;try{this.b=t||r.a.app()}catch(t){throw new u("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new u("invalid-api-key");t=this.b.options.apiKey;var n=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{e=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,o):null,Of.call(this,t,a,b,(function(){try{var g=n.b.auth().ja()}catch(t){g=null}return g}),o,M(C),e)}function Vf(a,b,t,e){t:{t=Array.prototype.slice.call(t);for(var n=0,r=!1,g=0;g<b.length;g++)if(b[g].optional)r=!0;else{if(r)throw new u("internal-error","Argument validator encountered a required argument after an optional argument.");n++}if(r=b.length,t.length<n||r<t.length)e="Expected "+(n==r?1==n?"1 argument":n+" arguments":n+"-"+r+" arguments")+" but got "+t.length+".";else{for(n=0;n<t.length;n++)if(r=b[n].optional&&void 0===t[n],!b[n].K(t[n])&&!r){if(b=b[n],0>n||n>=jf.length)throw new u("internal-error","Argument validator received an unsupported number of arguments.");t=jf[n],e=(e?"":t+" argument ")+(b.name?'"'+b.name+'" ':"")+"must be "+b.J+".";break t}e=null}}if(e)throw new u("argument-error",a+" failed: "+e)}(e=Of.prototype).Ga=function(){var a=this;return this.f?this.f:this.f=xf(this,Le().then((function(){if(Vr()&&!Nr())return Er();throw new u("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return a.m.g(a.w())})).then((function(b){return a.g=b,ou(a.s,Ba,{})})).then((function(b){a.a[Cf]=b.recaptchaSiteKey})).o((function(b){throw a.f=null,b})))},e.render=function(){Mf(this);var a=this;return xf(this,this.Ga().then((function(){if(null===a.c){var b=a.u;if(!a.i){var t=pe(b);b=function(a,b,t){var e=arguments,n=document,r=String(e[0]),g=e[1];if(!le&&g&&(g.name||g.type)){if(r=["<",r],g.name&&r.push(' name="',Jt(g.name),'"'),g.type){r.push(' type="',Jt(g.type),'"');var o={};_t(o,g),delete o.type,g=o}r.push(">"),r=r.join("")}return r=be(n,r),g&&("string"==typeof g?r.className=g:Array.isArray(g)?r.className=g.join(" "):de(r,g)),2<e.length&&ge(n,r,e),r}("DIV"),t.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c})))},e.verify=function(){Mf(this);var a=this;return xf(this,this.render().then((function(b){return new Se((function(t){var e=a.g.getResponse(b);if(e)t(e);else{var n=function(e){e&&(function(a,b){et(a.l,(function(t){return t==b}))}(a,n),t(e))};a.l.push(n),a.i&&a.g.execute(a.c)}}))})))},e.reset=function(){Mf(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Mf(this),this.D=!0,this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){a=pe(this.u);for(var b;b=a.firstChild;)a.removeChild(b)}},D(Uf,Of);var jf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ff(a,b){return{name:a||"",J:"a valid string",optional:!!b,K:function(t){return"string"==typeof t}}}function qf(a,b){return{name:a||"",J:"a boolean",optional:!!b,K:function(t){return"boolean"==typeof t}}}function Bf(a,b){return{name:a||"",J:"a valid object",optional:!!b,K:q}}function Gf(a,b){return{name:a||"",J:"a function",optional:!!b,K:I}}function Kf(a,b){return{name:a||"",J:"null",optional:!!b,K:function(t){return null===t}}}function Wf(a){return{name:a?a+"Credential":"credential",J:a?"a valid "+a+" credential":"a valid credential",optional:!1,K:function(b){if(!b)return!1;var t=!a||b.providerId===a;return!(!b.ia||!t)}}}function zf(a,b){return q(a)&&"string"==typeof a.type&&a.type===b&&I(a.Fa)}function Hf(a){return q(a)&&"string"==typeof a.uid}function Yf(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(a){return!(!a||"string"!=typeof a.type||!I(a.verify))}}}function Xf(a,b,t,e){return{name:t||"",J:a.J+" or "+b.J,optional:!!e,K:function(t){return a.K(t)||b.K(t)}}}function Jf(a,b){for(var t in b){var e=b[t].name;a[e]=Zf(e,a[t],b[t].j)}}function Qf(a,b){for(var t in b){var e=b[t].name;e!==t&&Object.defineProperty(a,e,{get:k((function(t){return this[t]}),t),set:k((function(t,e,g,n){Vf(t,[g],[n],!0),this[e]=n}),e,t,b[t].gb),enumerable:!0})}}function $f(a,b,t,e){a[b]=Zf(b,t,e)}function Zf(a,b,t){function e(){var g=Array.prototype.slice.call(arguments);return Vf(r,t,g),b.apply(this,g)}if(!t)return b;var n,r=function(a){return(a=a.split("."))[a.length-1]}(a);for(n in b)e[n]=b[n];for(n in b.prototype)e.prototype[n]=b.prototype[n];return e}Jf(ef.prototype,{fb:{name:"applyActionCode",j:[Ff("code")]},Pa:{name:"checkActionCode",j:[Ff("code")]},jb:{name:"confirmPasswordReset",j:[Ff("code"),Ff("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Ff("email"),Ff("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Ff("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Ff("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Xf(Bf(),Gf(),"nextOrObserver"),Gf("opt_error",!0),Gf("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Xf(Bf(),Gf(),"nextOrObserver"),Gf("opt_error",!0),Gf("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Ff("email"),Xf(Bf("opt_actionCodeSettings",!0),Kf(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Ff("email"),Bf("actionCodeSettings")]},tb:{name:"setPersistence",j:[Ff("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Wf()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Wf()]},Rc:{name:"signInWithCustomToken",j:[Ff("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Ff("email"),Ff("password")]},Tc:{name:"signInWithEmailLink",j:[Ff("email"),Ff("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Ff("phoneNumber"),Yf()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Xf({name:"user",J:"an instance of Firebase User",optional:!1,K:function(b){return!!(b&&b instanceof yh)}},Kf(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ff(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Ff("code")]}}),Qf(ef.prototype,{lc:{name:"languageCode",gb:Xf(Ff(),Kf(),"languageCode")},ti:{name:"tenantId",gb:Xf(Ff(),Kf(),"tenantId")}}),ef.Persistence=tc,ef.Persistence.LOCAL="local",ef.Persistence.SESSION="session",ef.Persistence.NONE="none",Jf(yh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[qf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qf("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Wf()]},mb:{name:"linkWithCredential",j:[Wf()]},Bc:{name:"linkWithPhoneNumber",j:[Ff("phoneNumber"),Yf()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wf()]},pb:{name:"reauthenticateWithCredential",j:[Wf()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Ff("phoneNumber"),Yf()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Xf(Bf("opt_actionCodeSettings",!0),Kf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ff(null,!0)]},ad:{name:"unlink",j:[Ff("provider")]},xb:{name:"updateEmail",j:[Ff("email")]},yb:{name:"updatePassword",j:[Ff("password")]},cd:{name:"updatePhoneNumber",j:[Wf("phone")]},zb:{name:"updateProfile",j:[Bf("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Ff("email"),Xf(Bf("opt_actionCodeSettings",!0),Kf(null,!0),"opt_actionCodeSettings",!0)]}}),Jf(yf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jf(vf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jf(Se.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qf(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:qf("appVerificationDisabledForTesting")}}),Jf(Xc.prototype,{confirm:{name:"confirm",j:[Ff("verificationCode")]}}),$f(yo,"fromJSON",(function(a){a="string"==typeof a?JSON.parse(a):a;for(var b,t=[Eo,Mo,qo,wo],e=0;e<t.length;e++)if(b=t[e](a))return b;return null}),[Xf(Ff(),Bf(),"json")]),$f(Uo,"credential",(function(a,b){return new xo(a,b)}),[Ff("email"),Ff("password")]),Jf(xo.prototype,{v:{name:"toJSON",j:[Ff(null,!0)]}}),Jf(So.prototype,{Aa:{name:"addScope",j:[Ff("scope")]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(So,"credential",ko,[Xf(Ff(),Bf(),"token")]),$f(Uo,"credentialWithLink",Vo,[Ff("email"),Ff("emailLink")]),Jf(Oo.prototype,{Aa:{name:"addScope",j:[Ff("scope")]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(Oo,"credential",Do,[Xf(Ff(),Bf(),"token")]),Jf(Ro.prototype,{Aa:{name:"addScope",j:[Ff("scope")]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(Ro,"credential",Co,[Xf(Ff(),Xf(Bf(),Kf()),"idToken"),Xf(Ff(),Kf(),"accessToken",!0)]),Jf(Po.prototype,{Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(Po,"credential",Lo,[Xf(Ff(),Bf(),"token"),Ff("secret",!0)]),Jf(No.prototype,{Aa:{name:"addScope",j:[Ff("scope")]},credential:{name:"credential",j:[Xf(Ff(),Xf(Bf(),Kf()),"optionsOrIdToken"),Xf(Ff(),Kf(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),Jf(Io.prototype,{v:{name:"toJSON",j:[Ff(null,!0)]}}),Jf(go.prototype,{v:{name:"toJSON",j:[Ff(null,!0)]}}),$f(Go,"credential",Ko,[Ff("verificationId"),Ff("verificationCode")]),Jf(Go.prototype,{cb:{name:"verifyPhoneNumber",j:[Xf(Ff(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?zf(t.session,po)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?zf(t.session,vo)&&Hf(t.multiFactorHint):t.session&&t.multiFactorUid?zf(t.session,vo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Yf()]}}),Jf(Fo.prototype,{v:{name:"toJSON",j:[Ff(null,!0)]}}),Jf(u.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Jf($o.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Jf(th.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Jf(nh.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Jf($c.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.ob}}]}}),Jf(ah.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.ob}},Ff("displayName",!0)]},$c:{name:"unenroll",j:[Xf({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Hf},Ff(),"multiFactorInfoIdentifier")]}}),Jf(Uf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),$f(Si,"parseLink",xi,[Ff("link")]),$f(Tf,"assertion",(function(a){return new oh(a)}),[Wf("phone")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:di,VERIFY_AND_CHANGE_EMAIL:yi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ef,AuthCredential:yo,Error:u};$f(a,"EmailAuthProvider",Uo,[]),$f(a,"FacebookAuthProvider",So,[]),$f(a,"GithubAuthProvider",Oo,[]),$f(a,"GoogleAuthProvider",Ro,[]),$f(a,"TwitterAuthProvider",Po,[]),$f(a,"OAuthProvider",No,[Ff("providerId")]),$f(a,"SAMLAuthProvider",Ao,[Ff("providerId")]),$f(a,"PhoneAuthProvider",Go,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(a){return!!(a&&a instanceof ef)}}]),$f(a,"RecaptchaVerifier",Uf,[Xf(Ff(),{name:"",J:"an HTML element",optional:!1,K:function(a){return!!(a&&a instanceof Element)}},"recaptchaContainer"),Bf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(a){return!!(a&&a instanceof r.a.app.App)}}]),$f(a,"ActionCodeURL",Si,[]),$f(a,"PhoneMultiFactorGenerator",Tf,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(b){return new ef(b=b.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(b){return{getUid:S((b=b.getProvider("auth").getImmediate()).getUid,b),getToken:S(b.kc,b),addAuthTokenListener:S(b.bc,b),removeAuthTokenListener:S(b.Nc,b)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.14.2"),r.a.INTERNAL.extendNamespace({User:yh})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(17))},170:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(60),c=(r=n(2))&&"object"==typeof r&&"default"in r?r.default:r,h=n(110),i=n(79),f=n(109),s=n(171),u=c.SDK_VERSION,a=function(){function t(t){this.uid=t}return t.prototype.t=function(){return null!=this.uid},t.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();a.UNAUTHENTICATED=new a(null),a.i=new a("google-credentials-uid"),a.o=new a("first-party-uid");var l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(e,t),e}(Error),v=function(t,e){this.user=e,this.type="OAuth",this.h={},this.h.Authorization="Bearer "+t},y=function(){function t(){this.u=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype._=function(){},t.prototype.l=function(t){this.u=t,t(a.UNAUTHENTICATED)},t.prototype.T=function(){this.u=null},t}(),p=function(){function t(t){var e=this;this.m=null,this.currentUser=a.UNAUTHENTICATED,this.I=!1,this.R=0,this.u=null,this.forceRefresh=!1,this.m=function(){e.R++,e.currentUser=e.A(),e.I=!0,e.u&&e.u(e.currentUser)},this.R=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.m):(this.m(null),t.get().then((function(t){e.auth=t,e.m&&e.auth.addAuthTokenListener(e.m)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.R,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.R!==e)throw new d(l.ABORTED,"getToken aborted due to token change.");return n?(_e("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new v(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype._=function(){this.forceRefresh=!0},t.prototype.l=function(t){this.u=t,this.I&&t(this.currentUser)},t.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.m),this.m=null,this.u=null},t.prototype.A=function(){var t=this.auth&&this.auth.getUid();return _e(null===t||"string"==typeof t,"Received invalid UID: "+t),new a(t)},t}(),m=function(){function t(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=a.o}return Object.defineProperty(t.prototype,"h",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),w=function(){function t(t,e){this.P=t,this.V=e}return t.prototype.getToken=function(){return Promise.resolve(new m(this.P,this.V))},t.prototype.l=function(t){t(a.o)},t.prototype.T=function(){},t.prototype._=function(){},t}(),I=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new d(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new d(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new d(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new d(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.p=function(t){return this.seconds===t.seconds?Ne(this.nanoseconds,t.nanoseconds):Ne(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),T=function(){function t(t){this.timestamp=t}return t.v=function(e){return new t(e)},t.S=function(){return t.MIN},t.prototype.D=function(t){return this.timestamp.p(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.C=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.k=function(){return this.timestamp},t}();T.MIN=new T(new I(0,0));var g=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ee("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&Ee("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.N=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.N},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.F(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.$(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.M=function(t){return t=void 0===t?1:t,this.$(this.segments,this.offset+t,this.length-t)},t.prototype.L=function(){return this.$(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.B=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.U=function(){return 0===this.length},t.prototype.q=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.W=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.j=function(){return this.segments.slice(this.offset,this.limit())},t.F=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.$=function(t,n,r){return new e(t,n,r)},e.prototype.K=function(){return this.j().join("/")},e.prototype.toString=function(){return this.K()},e.G=function(t){if(t.indexOf("//")>=0)throw new d(l.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e}(g);E.H=new E([]);var _=/^[_a-zA-Z][_a-zA-Z0-9]*$/,b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.$=function(t,n,r){return new e(t,n,r)},e.J=function(t){return _.test(t)},e.prototype.K=function(){return this.j().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.J(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.K()},e.prototype.Y=function(){return 1===this.length&&"__name__"===this.get(0)},e.X=function(){return new e(["__name__"])},e.Z=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new d(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new d(l.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new d(l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new d(l.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e}(g);b.H=new b([]);var A=function(){function t(t){this.path=t}return t.tt=function(e){return new t(E.G(e).M(5))},t.prototype.et=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===E.F(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.F=function(t,e){return E.F(t.path,e.path)},t.st=function(t){return t.length%2==0},t.nt=function(e){return new t(new E(e.slice()))},t}();A.EMPTY=new A(new E([]));var N=function(){function t(t,e){this.F=t,this.root=e||k.EMPTY}return t.prototype.it=function(e,n){return new t(this.F,this.root.it(e,n,this.F).rt(null,null,k.ot,null,null))},t.prototype.remove=function(e){return new t(this.F,this.root.remove(e,this.F).rt(null,null,k.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.U();){var n=this.F(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.U();){var r=this.F(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.U=function(){return this.root.U()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.ht=function(){return this.root.ht()},t.prototype.at=function(){return this.root.at()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ct=function(t){return this.root.ct(t)},t.prototype._t=function(){return new S(this.root,null,this.F,!1)},t.prototype.lt=function(t){return new S(this.root,t,this.F,!1)},t.prototype.dt=function(){return new S(this.root,null,this.F,!0)},t.prototype.ft=function(t){return new S(this.root,t,this.F,!0)},t}(),S=function(){function t(t,e,n,r){this.Tt=r,this.wt=[];for(var i=1;!t.U();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.wt.push(t);break}this.wt.push(t),t=this.Tt?t.right:t.left}}return t.prototype.Et=function(){var t=this.wt.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.U();)this.wt.push(t),t=t.right;else for(t=t.right;!t.U();)this.wt.push(t),t=t.left;return e},t.prototype.It=function(){return this.wt.length>0},t.prototype.Rt=function(){if(0===this.wt.length)return null;var t=this.wt[this.wt.length-1];return{key:t.key,value:t.value}},t}(),k=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.rt=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.U=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ct=function(t){return this.right.ct(t)||t(this.key,this.value)||this.left.ct(t)},t.prototype.min=function(){return this.left.U()?this:this.left.min()},t.prototype.ht=function(){return this.min().key},t.prototype.at=function(){return this.right.U()?this.key:this.right.at()},t.prototype.it=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.rt(null,null,null,r.left.it(t,e,n),null):0===i?r.rt(null,e,null,null,null):r.rt(null,null,null,null,r.right.it(t,e,n))).At()},t.prototype.Pt=function(){if(this.left.U())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.gt()),(e=e.rt(null,null,null,e.left.Pt(),null)).At()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.U()||i.left.Vt()||i.left.left.Vt()||(i=i.gt()),i=i.rt(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.pt()),i.right.U()||i.right.Vt()||i.right.left.Vt()||(i=i.yt()),0===n(e,i.key)){if(i.right.U())return t.EMPTY;r=i.right.min(),i=i.rt(r.key,r.value,null,null,i.right.Pt())}i=i.rt(null,null,null,null,i.right.remove(e,n))}return i.At()},t.prototype.Vt=function(){return this.color},t.prototype.At=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.left.left.Vt()&&(t=t.pt()),t.left.Vt()&&t.right.Vt()&&(t=t.vt()),t},t.prototype.gt=function(){var t=this.vt();return t.right.left.Vt()&&(t=(t=(t=t.rt(null,null,null,null,t.right.pt())).bt()).vt()),t},t.prototype.yt=function(){var t=this.vt();return t.left.left.Vt()&&(t=(t=t.pt()).vt()),t},t.prototype.bt=function(){var e=this.rt(null,null,t.RED,null,this.right.left);return this.right.rt(null,null,this.color,e,null)},t.prototype.pt=function(){var e=this.rt(null,null,t.RED,this.left.right,null);return this.left.rt(null,null,this.color,null,e)},t.prototype.vt=function(){var t=this.left.rt(null,null,!this.left.color,null,null),e=this.right.rt(null,null,!this.right.color,null,null);return this.rt(null,null,!this.color,t,e)},t.prototype.St=function(){var t=this.Dt();return Math.pow(2,t)<=this.size+1},t.prototype.Dt=function(){if(this.Vt()&&this.left.Vt())throw Ee("Red node has red child("+this.key+","+this.value+")");if(this.right.Vt())throw Ee("Right child of ("+this.key+","+this.value+") is red");var t=this.left.Dt();if(t!==this.right.Dt())throw Ee("Black depths differ");return t+(this.Vt()?0:1)},t}();k.EMPTY=null,k.RED=!0,k.ot=!1,k.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ee("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ee("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ee("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ee("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ee("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.rt=function(t,e,n,r,i){return this},t.prototype.it=function(t,e,n){return new k(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.U=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ct=function(t){return!1},t.prototype.ht=function(){return null},t.prototype.at=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.St=function(){return!0},t.prototype.Dt=function(){return 0},t}());var O=function(){function t(t){this.F=t,this.data=new N(this.F)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ht()},t.prototype.last=function(){return this.data.at()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.Ct=function(t,e){for(var n=this.data.lt(t[0]);n.It();){var r=n.Et();if(this.F(r.key,t[1])>=0)return;e(r.key)}},t.prototype.kt=function(t,e){var n;for(n=void 0!==e?this.data.lt(e):this.data._t();n.It();)if(!t(n.Et().key))return},t.prototype.Nt=function(t){var e=this.data.lt(t);return e.It()?e.Et().key:null},t.prototype._t=function(){return new D(this.data._t())},t.prototype.lt=function(t){return new D(this.data.lt(t))},t.prototype.add=function(t){return this.rt(this.data.remove(t).it(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.rt(this.data.remove(t)):this},t.prototype.U=function(){return this.data.U()},t.prototype.Ft=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.F(i,o))return!1}return!0},t.prototype.j=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.rt=function(e){var n=new t(this.F);return n.data=e,n},t}(),D=function(){function t(t){this.$t=t}return t.prototype.Et=function(){return this.$t.Et().key},t.prototype.It=function(){return this.$t.It()},t}();function R(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function C(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var L=function(){function t(t){this.Mt=t}return t.fromBase64String=function(e){return new t(ye.Lt().atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return ye.Lt().btoa(this.Mt)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Mt)},t.prototype.Ot=function(){return 2*this.Mt.length},t.prototype.D=function(t){return Ne(this.Mt,t.Mt)},t.prototype.isEqual=function(t){return this.Mt===t.Mt},t}();function x(t){return null==t}function M(t){return-0===t&&1/t==-1/0}function U(t){return"number"==typeof t&&Number.isInteger(t)&&!M(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function V(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function j(t){var e=H(t.mapValue.fields.__local_write_time__.timestampValue);return new I(e.seconds,e.nanos)}L.xt=new L("");var F=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function B(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?V(t)?4:10:Ee("Invalid value type: "+JSON.stringify(t))}function q(t,e){var n=B(t);if(n!==B(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return j(t).isEqual(j(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=H(t.timestampValue),r=H(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return X(t.bytesValue).isEqual(X(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Y(t.geoPointValue.latitude)===Y(e.geoPointValue.latitude)&&Y(t.geoPointValue.longitude)===Y(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Y(t.integerValue)===Y(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Y(t.doubleValue),r=Y(e.doubleValue);return n===r?M(n)===M(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Se(t.arrayValue.values||[],e.arrayValue.values||[],q);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(R(n)!==R(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!q(n[i],r[i])))return!1;return!0}(t,e);default:return Ee("Unexpected value type: "+JSON.stringify(t))}}function G(t,e){return void 0!==(t.values||[]).find((function(t){return q(t,e)}))}function K(t,e){var n=B(t),r=B(e);if(n!==r)return Ne(n,r);switch(n){case 0:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Y(t.integerValue||t.doubleValue),r=Y(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return W(t.timestampValue,e.timestampValue);case 4:return W(j(t),j(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(t,e){var n=X(t),r=X(e);return n.D(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ne(n[i],r[i]);if(0!==o)return o}return Ne(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ne(Y(t.latitude),Y(e.latitude));return 0!==n?n:Ne(Y(t.longitude),Y(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=K(n[i],r[i]);if(o)return o}return Ne(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Ne(r[s],o[s]);if(0!==u)return u;var a=K(n[r[s]],i[o[s]]);if(0!==a)return a}return Ne(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ee("Invalid value type: "+n)}}function W(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ne(t,e);var n=H(t),r=H(e),i=Ne(n.seconds,r.seconds);return 0!==i?i:Ne(n.nanos,r.nanos)}function z(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=H(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?X(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,A.tt(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Ee("Invalid value type: "+JSON.stringify(e));var n,r}(t)}function H(t){if(_e(!!t,"Cannot normalize null or undefined timestamp."),"string"==typeof t){var e=0,n=F.exec(t);if(_e(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Y(t.seconds),nanos:Y(t.nanos)}}function Y(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function X(t){return"string"==typeof t?L.fromBase64String(t):L.fromUint8Array(t)}function J(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.K()}}function Q(t){return!!t&&"integerValue"in t}function $(t){return!!t&&"arrayValue"in t}function Z(t){return!!t&&"nullValue"in t}function tt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function et(t){return!!t&&"mapValue"in t}var nt=function(){function t(){}return t.prototype.Bt=function(t,e){return function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,t)},t.prototype.Ut=function(t,e){return e},t.prototype.qt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();nt.instance=new nt;var it=function(){function t(t){this.elements=t}return t.prototype.Bt=function(t,e){return this.apply(t)},t.prototype.Ut=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=rt(t),n=function(t){e.some((function(e){return q(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.qt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Se(this.elements,e.elements,q)},t}(),ot=function(){function t(t){this.elements=t}return t.prototype.Bt=function(t,e){return this.apply(t)},t.prototype.Ut=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=rt(t),n=function(t){e=e.filter((function(e){return!q(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.qt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Se(this.elements,e.elements,q)},t}(),st=function(){function t(t,e){this.serializer=t,this.Qt=e}return t.prototype.Bt=function(t,e){var n=this.qt(t),r=this.asNumber(n)+this.asNumber(this.Qt);return Q(n)&&Q(this.Qt)?this.serializer.Wt(r):this.serializer.jt(r)},t.prototype.Ut=function(t,e){return e},t.prototype.qt=function(t){return Q(e=t)||function(t){return!!t&&"doubleValue"in t}(e)?t:{integerValue:0};var e},t.prototype.isEqual=function(e){return e instanceof t&&q(this.Qt,e.Qt)},t.prototype.asNumber=function(t){return Y(t.integerValue||t.doubleValue)},t}();function rt(t){return $(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var at=function(){function t(t){this.fields=t}return t.Kt=function(e){return new t(e)},t.Gt=function(e){var n=new O(b.F);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.zt=function(t){var e=!1;return this.fields.forEach((function(n){n.q(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),ut=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ct=function(t,e){this.version=t,this.transformResults=e},ht=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ht",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Jt=function(t){return void 0!==this.updateTime?t instanceof wt&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof wt},t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();ht.NONE=new ht;var ft=function(){function t(){}return t.prototype.Yt=function(t){},t.Xt=function(t){return t instanceof wt?t.version:T.MIN},t}(),lt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Zt=r,i.type=0,i}return o.__extends(e,t),e.prototype.Ut=function(t,e){this.Yt(t);var n=e.version;return new wt(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=ft.Xt(t);return new wt(this.key,r,this.value,{te:!0})},e.prototype.ee=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Zt.isEqual(t.Zt)},e}(ft),pt=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.se=r,o.Zt=i,o.type=1,o}return o.__extends(e,t),e.prototype.Ut=function(t,e){if(this.Yt(t),!this.Zt.Jt(t))return new Tt(this.key,e.version);var n=this.ne(t);return new wt(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=ft.Xt(t),i=this.ne(t);return new wt(this.key,r,i,{te:!0})},e.prototype.ee=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.se.isEqual(t.se)&&this.Zt.isEqual(t.Zt)},e.prototype.ne=function(t){var e;return e=t instanceof wt?t.data():dt.EMPTY,this.ie(e)},e.prototype.ie=function(t){var e=this,n=t.re();return this.se.fields.forEach((function(t){if(!t.U()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.oe()},e}(ft),vt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Zt=ht.exists(!0),r}return o.__extends(e,t),e.prototype.Ut=function(t,e){if(this.Yt(t),_e(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.Zt.Jt(t))return new Tt(this.key,e.version);var n=this.he(t),r=this.ae(t,e.transformResults),i=e.version,o=this.ue(n.data(),r);return new wt(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=this.he(t),i=this.ce(n,t,e),o=this.ue(r.data(),i);return new wt(this.key,r.version,o,{te:!0})},e.prototype.ee=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof wt?t.field(i.field):void 0,s=i.transform.qt(o||null);null!=s&&(e=null==e?dt._e().set(i.field,s):e.set(i.field,s))}return e?e.oe():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Se(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.Zt.isEqual(t.Zt)},e.prototype.he=function(t){return t},e.prototype.ae=function(t,e){var n=[];_e(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof wt&&(s=t.field(i.field)),n.push(o.Ut(s,e[r]))}return n},e.prototype.ce=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],u=s.transform,a=null;e instanceof wt&&(a=e.field(s.field)),null===a&&n instanceof wt&&(a=n.field(s.field)),r.push(u.Bt(a,t))}return r},e.prototype.ue=function(t,e){for(var n=t.re(),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.oe()},e}(ft),yt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Zt=n,r.type=3,r}return o.__extends(e,t),e.prototype.Ut=function(t,e){return this.Yt(t),new It(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){return this.Yt(t),this.Zt.Jt(t)?new It(this.key,T.S()):t},e.prototype.ee=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},e}(ft),mt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Zt=n,r.type=4,r}return o.__extends(e,t),e.prototype.Ut=function(t,e){Ee("VerifyMutation should only be used in Transactions.")},e.prototype.Bt=function(t,e,n){Ee("VerifyMutation should only be used in Transactions.")},e.prototype.ee=function(t){Ee("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},e}(ft),dt=function(){function t(t){this.proto=t}return t._e=function(){return t.EMPTY.re()},t.prototype.field=function(t){if(t.U())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!et(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.B()])||null},t.prototype.se=function(){return this.le(this.proto.mapValue)},t.prototype.le=function(t){var e=this,n=new O(b.F);return C(t.fields||{},(function(t,r){var i=new b([t]);if(10===B(r)){var o=e.le(r.mapValue).fields;o.U()?n=n.add(i):o.forEach((function(t){n=n.add(i.child(t))}))}else n=n.add(i)})),at.Kt(n)},t.prototype.isEqual=function(t){return q(this.proto,t.proto)},t.prototype.re=function(){return new gt(this)},t}();dt.EMPTY=new dt({mapValue:{}});var gt=function(){function t(t){this.de=t,this.fe=new Map}return t.prototype.set=function(t,e){return this.Te(t,e),this},t.prototype.delete=function(t){return this.Te(t,null),this},t.prototype.Te=function(t,e){for(var n=this.fe,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===B(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.B(),e)},t.prototype.oe=function(){var t=this.me(b.H,this.fe);return null!=t?new dt(t):this.de},t.prototype.me=function(t,e){var n=this,r=!1,i=this.de.field(t),o=et(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.me(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}(),bt=function(){function t(t,e){this.key=t,this.version=e}return t.we=function(t,e){return A.F(t.key,e.key)},t}(),wt=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ee=r,o.te=!!i.te,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return o.__extends(e,t),e.prototype.field=function(t){return this.Ee.field(t)},e.prototype.data=function(){return this.Ee},e.prototype.Ie=function(){return this.Ee.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.te===t.te&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ee.isEqual(t.Ee)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ee.toString()+", {hasLocalMutations: "+this.te+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.te||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.Re=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?K(r,i):Ee("Trying to compare documents on fields that don't exist")},e}(bt),It=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bt),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bt),Et=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Ae=null}return t.prototype.canonicalId=function(){if(null===this.Ae){var t=this.path.K();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map((function(t){return t.canonicalId()})).join(","),t+="|ob:",t+=this.orderBy.map((function(t){return t.canonicalId()})).join(","),x(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.Ae=t}return this.Ae},t.prototype.toString=function(){var t=this.path.K();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),x(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Pe=function(){return A.st(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),_t=function(){function t(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Ve=n,this.filters=r,this.limit=i,this.ge=o,this.startAt=s,this.endAt=u,this.pe=null,this.ye=null,this.startAt&&this.be(this.startAt),this.endAt&&this.be(this.endAt)}return t.ve=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.pe){var t=this.Se(),e=this.De();if(null!==t&&null===e)t.Y()?this.pe=[Ut]:this.pe=[new Mt(t),Ut];else{this.pe=[];for(var n=!1,r=0,i=this.Ve;r<i.length;r++){var o=i[r];this.pe.push(o),o.field.Y()&&(n=!0)}if(!n){var s=this.Ve.length>0?this.Ve[this.Ve.length-1].dir:Ct.ASCENDING;this.pe.push(s===Ct.ASCENDING?Ut:Vt)}}}return this.pe},enumerable:!0,configurable:!0}),t.prototype.Ce=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.Ve.slice(),n,this.limit,this.ge,this.startAt,this.endAt)},t.prototype.ke=function(e){var n=this.Ve.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Ne=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Fe=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.$e=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,e,this.endAt)},t.prototype.Me=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,e)},t.prototype.Le=function(e){return new t(e,null,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Oe=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Ve.length||1===this.Ve.length&&this.Ve[0].field.Y())},t.prototype.canonicalId=function(){return this.xe().canonicalId()+"|lt:"+this.ge},t.prototype.toString=function(){return"Query(target="+this.xe().toString()+"; limitType="+this.ge+")"},t.prototype.isEqual=function(t){return this.xe().isEqual(t.xe())&&this.ge===t.ge},t.prototype.Be=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.Y()}return 0},t.prototype.matches=function(t){return this.Ue(t)&&this.qe(t)&&this.Qe(t)&&this.We(t)},t.prototype.je=function(){return!x(this.limit)&&"F"===this.ge},t.prototype.Ke=function(){return!x(this.limit)&&"L"===this.ge},t.prototype.De=function(){return this.Ve.length>0?this.Ve[0].field:null},t.prototype.Se=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Nt&&n.Ge())return n.field}return null},t.prototype.ze=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Nt&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pe=function(){return this.xe().Pe()},t.prototype.He=function(){return null!==this.collectionGroup},t.prototype.xe=function(){if(!this.ye)if("F"===this.ge)this.ye=new Et(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===Ct.DESCENDING?Ct.ASCENDING:Ct.DESCENDING;t.push(new Mt(r.field,i))}var o=this.endAt?new xt(this.endAt.position,!this.endAt.before):null,s=this.startAt?new xt(this.startAt.position,!this.startAt.before):null;this.ye=new Et(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.ye},t.prototype.Ue=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.et(this.collectionGroup)&&this.path.q(e):A.st(this.path)?this.path.isEqual(e):this.path.W(e)},t.prototype.qe=function(t){for(var e=0,n=this.Ve;e<n.length;e++){var r=n[e];if(!r.field.Y()&&null===t.field(r.field))return!1}return!0},t.prototype.Qe=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.We=function(t){return!(this.startAt&&!this.startAt.Je(this.orderBy,t)||this.endAt&&this.endAt.Je(this.orderBy,t))},t.prototype.be=function(t){},t}(),At=function(){function t(t){this.name=t}return t.G=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return Ee("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t}();At.LESS_THAN=new At("<"),At.LESS_THAN_OR_EQUAL=new At("<="),At.EQUAL=new At("=="),At.GREATER_THAN=new At(">"),At.GREATER_THAN_OR_EQUAL=new At(">="),At.ARRAY_CONTAINS=new At("array-contains"),At.IN=new At("in"),At.ARRAY_CONTAINS_ANY=new At("array-contains-any");var Nt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return o.__extends(e,t),e.create=function(t,n,r){if(t.Y())return n===At.IN?new kt(t,r):new St(t,n,r);if(Z(r)){if(n!==At.EQUAL)throw new d(l.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(tt(r)){if(n!==At.EQUAL)throw new d(l.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===At.ARRAY_CONTAINS?new Ot(t,r):n===At.IN?new Dt(t,r):n===At.ARRAY_CONTAINS_ANY?new Rt(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&B(this.value)===B(e)&&this.Ye(K(e,this.value))},e.prototype.Ye=function(t){switch(this.op){case At.LESS_THAN:return t<0;case At.LESS_THAN_OR_EQUAL:return t<=0;case At.EQUAL:return 0===t;case At.GREATER_THAN:return t>0;case At.GREATER_THAN_OR_EQUAL:return t>=0;default:return Ee("Unknown FieldFilter operator: "+this.op)}},e.prototype.Ge=function(){return[At.LESS_THAN,At.LESS_THAN_OR_EQUAL,At.GREATER_THAN,At.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.K()+this.op.toString()+z(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&q(this.value,t.value)},e.prototype.toString=function(){return this.field.K()+" "+this.op+" "+z(this.value)},e}((function(){})),St=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=A.tt(r.referenceValue),i}return o.__extends(e,t),e.prototype.matches=function(t){var e=A.F(t.key,this.key);return this.Ye(e)},e}(Nt),kt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,At.IN,n)||this).keys=(n.arrayValue.values||[]).map((function(t){return A.tt(t.referenceValue)})),r}return o.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Nt),Ot=function(t){function e(e,n){return t.call(this,e,At.ARRAY_CONTAINS,n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return $(e)&&G(e.arrayValue,this.value)},e}(Nt),Dt=function(t){function e(e,n){return t.call(this,e,At.IN,n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&G(this.value.arrayValue,e)},e}(Nt),Rt=function(t){function e(e,n){return t.call(this,e,At.ARRAY_CONTAINS_ANY,n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!$(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return G(e.value.arrayValue,t)}))},e}(Nt),Ct=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t}();Ct.ASCENDING=new Ct("asc"),Ct.DESCENDING=new Ct("desc");var Pt,Lt,xt=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map((function(t){return z(t)})).join(",")},t.prototype.Je=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(n=i.field.Y()?A.F(A.tt(o.referenceValue),e.key):K(o,e.field(i.field)),i.dir===Ct.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!q(this.position[e],t.position[e]))return!1;return!0},t}(),Mt=function(){function t(t,e){this.field=t,void 0===e&&(e=Ct.ASCENDING),this.dir=e,this.Xe=t.Y()}return t.prototype.compare=function(t,e){var n=this.Xe?wt.we(t,e):wt.Re(this.field,t,e);switch(this.dir){case Ct.ASCENDING:return n;case Ct.DESCENDING:return-1*n;default:return Ee("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.K()+this.dir.toString()},t.prototype.toString=function(){return this.field.K()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Ut=new Mt(b.X(),Ct.ASCENDING),Vt=new Mt(b.X(),Ct.DESCENDING),jt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=T.MIN),void 0===o&&(o=T.MIN),void 0===s&&(s=L.xt),this.target=t,this.targetId=e,this.Ze=n,this.sequenceNumber=r,this.ts=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.es=function(e){return new t(this.target,this.targetId,this.Ze,e,this.ts,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ss=function(e,n){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ns=function(e){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,this.ts,e,this.resumeToken)},t}(),Ft=function(t){this.count=t};function qt(t){switch(t){case l.OK:return Ee("Treated status OK as error");case l.CANCELLED:case l.UNKNOWN:case l.DEADLINE_EXCEEDED:case l.RESOURCE_EXHAUSTED:case l.INTERNAL:case l.UNAVAILABLE:case l.UNAUTHENTICATED:return!1;case l.INVALID_ARGUMENT:case l.NOT_FOUND:case l.ALREADY_EXISTS:case l.PERMISSION_DENIED:case l.FAILED_PRECONDITION:case l.ABORTED:case l.OUT_OF_RANGE:case l.UNIMPLEMENTED:case l.DATA_LOSS:return!0;default:return Ee("Unknown status code: "+t)}}function Bt(t){if(void 0===t)return Ie("GRPC error has no .code"),l.UNKNOWN;switch(t){case Pt.OK:return l.OK;case Pt.CANCELLED:return l.CANCELLED;case Pt.UNKNOWN:return l.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return l.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return l.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return l.INTERNAL;case Pt.UNAVAILABLE:return l.UNAVAILABLE;case Pt.UNAUTHENTICATED:return l.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return l.INVALID_ARGUMENT;case Pt.NOT_FOUND:return l.NOT_FOUND;case Pt.ALREADY_EXISTS:return l.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return l.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return l.FAILED_PRECONDITION;case Pt.ABORTED:return l.ABORTED;case Pt.OUT_OF_RANGE:return l.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return l.UNIMPLEMENTED;case Pt.DATA_LOSS:return l.DATA_LOSS;default:return Ee("Unknown status code: "+t)}}(Lt=Pt||(Pt={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";var Gt=new N(A.F);function Kt(){return Gt}function Wt(){return Kt()}var zt=new N(A.F);function Ht(){return zt}var Yt=new N(A.F);function Xt(){return Yt}var Jt=new O(A.F);function Qt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Jt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var $t=new O(Ne);function Zt(){return $t}var te=function(){function t(t){this.F=t?function(e,n){return t(e,n)||A.F(e.key,n.key)}:function(t,e){return A.F(t.key,e.key)},this.rs=Ht(),this.os=new N(this.F)}return t.hs=function(e){return new t(e.F)},t.prototype.has=function(t){return null!=this.rs.get(t)},t.prototype.get=function(t){return this.rs.get(t)},t.prototype.first=function(){return this.os.ht()},t.prototype.last=function(){return this.os.at()},t.prototype.U=function(){return this.os.U()},t.prototype.indexOf=function(t){var e=this.rs.get(t);return e?this.os.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.os.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.os.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.rt(e.rs.it(t.key,t),e.os.it(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.rt(this.rs.remove(t),this.os.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.os._t(),r=e.os._t();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.rt=function(e,n){var r=new t;return r.F=this.F,r.rs=e,r.os=n,r},t}(),ee=function(){function t(){this.as=new N(A.F)}return t.prototype.track=function(t){var e=t.doc.key,n=this.as.get(e);n?0!==t.type&&3===n.type?this.as=this.as.it(e,t):3===t.type&&1!==n.type?this.as=this.as.it(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.as=this.as.it(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.as=this.as.it(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.as=this.as.remove(e):1===t.type&&2===n.type?this.as=this.as.it(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.as=this.as.it(e,{type:2,doc:t.doc}):Ee("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.as=this.as.it(e,t)},t.prototype.us=function(){var t=[];return this.as.ut((function(e,n){t.push(n)})),t},t}(),ne=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.cs=n,this.docChanges=r,this._s=i,this.fromCache=o,this.ls=s,this.ds=u}return t.fs=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,te.hs(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this._s.U()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ls===t.ls&&this._s.isEqual(t._s)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.cs.isEqual(t.cs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),re=function(){function t(t,e,n,r,i){this.ts=t,this.Ts=e,this.ms=n,this.ws=r,this.Es=i}return t.Is=function(e,n){var r=new Map;return r.set(e,ie.Rs(e,n)),new t(T.MIN,r,Zt(),Kt(),Qt())},t}(),ie=function(){function t(t,e,n,r,i){this.resumeToken=t,this.As=e,this.Ps=n,this.Vs=r,this.gs=i}return t.Rs=function(e,n){return new t(L.xt,n,Qt(),Qt(),Qt())},t}(),oe=function(t,e,n,r){this.ps=t,this.removedTargetIds=e,this.key=n,this.ys=r},se=function(t,e){this.targetId=t,this.bs=e},ae=function(t,e,n,r){void 0===n&&(n=L.xt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ue=function(){function t(){this.vs=0,this.Ss=fe(),this.Ds=L.xt,this.Cs=!1,this.ks=!0}return Object.defineProperty(t.prototype,"As",{get:function(){return this.Cs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ns",{get:function(){return 0!==this.vs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Fs",{get:function(){return this.ks},enumerable:!0,configurable:!0}),t.prototype.$s=function(t){t.Ot()>0&&(this.ks=!0,this.Ds=t)},t.prototype.Ms=function(){var t=Qt(),e=Qt(),n=Qt();return this.Ss.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ee("Encountered invalid change type: "+i)}})),new ie(this.Ds,this.Cs,t,e,n)},t.prototype.Ls=function(){this.ks=!1,this.Ss=fe()},t.prototype.Os=function(t,e){this.ks=!0,this.Ss=this.Ss.it(t,e)},t.prototype.xs=function(t){this.ks=!0,this.Ss=this.Ss.remove(t)},t.prototype.Bs=function(){this.vs+=1},t.prototype.Us=function(){this.vs-=1},t.prototype.qs=function(){this.ks=!0,this.Cs=!0},t}(),ce=function(){function t(t){this.Qs=t,this.Ws=new Map,this.js=Kt(),this.Ks=he(),this.Gs=new O(Ne)}return t.prototype.zs=function(t){for(var e=0,n=t.ps;e<n.length;e++){var r=n[e];t.ys instanceof wt?this.Hs(r,t.ys):t.ys instanceof It&&this.Js(r,t.key,t.ys)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Js(s,t.key,t.ys)}},t.prototype.Ys=function(t){var e=this;this.Xs(t,(function(n){var r=e.Zs(n);switch(t.state){case 0:e.tn(n)&&r.$s(t.resumeToken);break;case 1:r.Us(),r.Ns||r.Ls(),r.$s(t.resumeToken);break;case 2:r.Us(),r.Ns||e.removeTarget(n);break;case 3:e.tn(n)&&(r.qs(),r.$s(t.resumeToken));break;case 4:e.tn(n)&&(e.en(n),r.$s(t.resumeToken));break;default:Ee("Unknown target watch change state: "+t.state)}}))},t.prototype.Xs=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ws.forEach((function(t,r){n.tn(r)&&e(r)}))},t.prototype.sn=function(t){var e=t.targetId,n=t.bs.count,r=this.nn(e);if(r){var i=r.target;if(i.Pe())if(0===n){var o=new A(i.path);this.Js(e,o,new It(o,T.S()))}else _e(1===n,"Single document existence filter with count: "+n);else this.in(e)!==n&&(this.en(e),this.Gs=this.Gs.add(e))}},t.prototype.rn=function(t){var e=this,n=new Map;this.Ws.forEach((function(r,i){var o=e.nn(i);if(o){if(r.As&&o.target.Pe()){var s=new A(o.target.path);null!==e.js.get(s)||e.on(i,s)||e.Js(i,s,new It(s,t))}r.Fs&&(n.set(i,r.Ms()),r.Ls())}}));var r=Qt();this.Ks.forEach((function(t,n){var i=!0;n.kt((function(t){var n=e.nn(t);return!n||2===n.Ze||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new re(t,n,this.Gs,this.js,r);return this.js=Kt(),this.Ks=he(),this.Gs=new O(Ne),i},t.prototype.Hs=function(t,e){if(this.tn(t)){var n=this.on(t,e.key)?2:0;this.Zs(t).Os(e.key,n),this.js=this.js.it(e.key,e),this.Ks=this.Ks.it(e.key,this.hn(e.key).add(t))}},t.prototype.Js=function(t,e,n){if(this.tn(t)){var r=this.Zs(t);this.on(t,e)?r.Os(e,1):r.xs(e),this.Ks=this.Ks.it(e,this.hn(e).delete(t)),n&&(this.js=this.js.it(e,n))}},t.prototype.removeTarget=function(t){this.Ws.delete(t)},t.prototype.in=function(t){var e=this.Zs(t).Ms();return this.Qs.an(t).size+e.Ps.size-e.gs.size},t.prototype.Bs=function(t){this.Zs(t).Bs()},t.prototype.Zs=function(t){var e=this.Ws.get(t);return e||(e=new ue,this.Ws.set(t,e)),e},t.prototype.hn=function(t){var e=this.Ks.get(t);return e||(e=new O(Ne),this.Ks=this.Ks.it(t,e)),e},t.prototype.tn=function(t){var e=null!==this.nn(t);return e||we("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.nn=function(t){var e=this.Ws.get(t);return e&&e.Ns?null:this.Qs.un(t)},t.prototype.en=function(t){var e=this;this.Ws.set(t,new ue),this.Qs.an(t).forEach((function(n){e.Js(t,n,null)}))},t.prototype.on=function(t,e){return this.Qs.an(t).has(e)},t}();function he(){return new N(A.F)}function fe(){return new N(A.F)}var le=function(){var t={};return t[Ct.ASCENDING.name]="ASCENDING",t[Ct.DESCENDING.name]="DESCENDING",t}(),pe=function(){var t={};return t[At.LESS_THAN.name]="LESS_THAN",t[At.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[At.GREATER_THAN.name]="GREATER_THAN",t[At.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[At.EQUAL.name]="EQUAL",t[At.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t[At.IN.name]="IN",t[At.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",t}(),de=function(){function t(t,e){this.cn=t,this.options=e}return t.prototype._n=function(t){var e=void 0===t.code?l.UNKNOWN:Bt(t.code);return new d(e,t.message||"")},t.prototype.ln=function(t){return this.options.dn||x(t)?t:{value:t}},t.prototype.fn=function(t){var e;return x(e="object"==typeof t?t.value:t)?null:e},t.prototype.Wt=function(t){return{integerValue:""+t}},t.prototype.jt=function(t){if(this.options.dn){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:M(t)?"-0":t}},t.prototype.Tn=function(t){return U(t)?this.Wt(t):this.jt(t)},t.prototype.k=function(t){return this.options.dn?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.v=function(t){var e=H(t);return new I(e.seconds,e.nanos)},t.prototype.mn=function(t){return this.options.dn?t.toBase64():t.toUint8Array()},t.prototype.wn=function(t){return this.options.dn?(_e(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),L.fromBase64String(t||"")):(_e(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),L.fromUint8Array(t||new Uint8Array))},t.prototype.toVersion=function(t){return this.k(t.k())},t.prototype.fromVersion=function(t){return _e(!!t,"Trying to deserialize version that isn't set"),T.v(this.v(t))},t.prototype.En=function(t,e){return this.In(e||this.cn).child("documents").child(t).K()},t.prototype.Rn=function(t){var e=E.G(t);return _e(ve(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.An=function(t){return this.En(t.path)},t.prototype.tt=function(t){var e=this.Rn(t);return _e(e.get(1)===this.cn.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.cn.projectId),_e(!e.get(3)&&!this.cn.database||e.get(3)===this.cn.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.cn.database),new A(this.Pn(e))},t.prototype.Vn=function(t){return this.En(t)},t.prototype.gn=function(t){var e=this.Rn(t);return 4===e.length?E.H:this.Pn(e)},Object.defineProperty(t.prototype,"pn",{get:function(){return new E(["projects",this.cn.projectId,"databases",this.cn.database]).K()},enumerable:!0,configurable:!0}),t.prototype.In=function(t){return new E(["projects",t.projectId,"databases",t.database])},t.prototype.Pn=function(t){return _e(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.M(5)},t.prototype.yn=function(t,e){return{name:this.An(t),fields:e.proto.mapValue.fields}},t.prototype.bn=function(t){return{name:this.An(t.key),fields:t.Ie().mapValue.fields,updateTime:this.k(t.version.k())}},t.prototype.vn=function(t,e){var n=this.tt(t.name),r=this.fromVersion(t.updateTime),i=new dt({mapValue:{fields:t.fields}});return new wt(n,r,i,{hasCommittedMutations:!!e})},t.prototype.Sn=function(t){_e(!!t.found,"Tried to deserialize a found document from a missing document."),t.found.name,t.found.updateTime;var e=this.tt(t.found.name),n=this.fromVersion(t.found.updateTime),r=new dt({mapValue:{fields:t.found.fields}});return new wt(e,n,r,{})},t.prototype.Dn=function(t){_e(!!t.missing,"Tried to deserialize a missing document from a found document."),_e(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.tt(t.missing),n=this.fromVersion(t.readTime);return new It(e,n)},t.prototype.Cn=function(t){return"found"in t?this.Sn(t):"missing"in t?this.Dn(t):Ee("invalid batch get response: "+JSON.stringify(t))},t.prototype.kn=function(t){var e;if("targetChange"in t){t.targetChange;var n=this.Nn(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.wn(t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&this._n(o);e=new ae(n,r,i,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var a=this.tt(u.document.name),c=this.fromVersion(u.document.updateTime),h=new dt({mapValue:{fields:u.document.fields}}),f=new wt(a,c,h,{}),l=u.targetIds||[],p=u.removedTargetIds||[];e=new oe(l,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var d=t.documentDelete;d.document;var v=this.tt(d.document),y=d.readTime?this.fromVersion(d.readTime):T.S(),g=new It(v,y),m=d.removedTargetIds||[];e=new oe([],m,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=this.tt(w.document),I=w.removedTargetIds||[];e=new oe([],I,b,null)}else{if(!("filter"in t))return Ee("Unknown change type "+JSON.stringify(t));t.filter;var E=t.filter;E.targetId;var _=E.count||0,A=new Ft(_),N=E.targetId;e=new se(N,A)}return e},t.prototype.Nn=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ee("Got unexpected TargetChange.state: "+t)},t.prototype.Fn=function(t){if(!("targetChange"in t))return T.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?T.MIN:e.readTime?this.fromVersion(e.readTime):T.MIN},t.prototype.$n=function(t){var e,n=this;if(t instanceof lt)e={update:this.yn(t.key,t.value)};else if(t instanceof yt)e={delete:this.An(t.key)};else if(t instanceof pt)e={update:this.yn(t.key,t.data),updateMask:this.Mn(t.se)};else if(t instanceof vt)e={transform:{document:this.An(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.Ln(t)}))}};else{if(!(t instanceof mt))return Ee("Unknown mutation type "+t.type);e={verify:this.An(t.key)}}return t.Zt.Ht||(e.currentDocument=this.On(t.Zt)),e},t.prototype.xn=function(t){var e=this,n=t.currentDocument?this.Bn(t.currentDocument):ht.NONE;if(t.update){t.update.name;var r=this.tt(t.update.name),i=new dt({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.Un(t.updateMask);return new pt(r,i,o,n)}return new lt(r,i,n)}if(t.delete){var s=this.tt(t.delete);return new yt(s,n)}if(t.transform){var u=this.tt(t.transform.document),a=t.transform.fieldTransforms.map((function(t){return e.qn(t)}));return _e(!0===n.exists,'Transforms only support precondition "exists == true"'),new vt(u,a)}if(t.verify){var c=this.tt(t.verify);return new mt(c,n)}return Ee("unknown mutation proto: "+JSON.stringify(t))},t.prototype.On=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ee("Unknown precondition")},t.prototype.Bn=function(t){return void 0!==t.updateTime?ht.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ht.exists(t.exists):ht.NONE},t.prototype.Qn=function(t,e){var n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(T.MIN)&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ct(n,r)},t.prototype.Wn=function(t,e){var n=this;return t&&t.length>0?(_e(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.Qn(t,e)}))):[]},t.prototype.Ln=function(t){var e=t.transform;if(e instanceof nt)return{fieldPath:t.field.K(),setToServerValue:"REQUEST_TIME"};if(e instanceof it)return{fieldPath:t.field.K(),appendMissingElements:{values:e.elements}};if(e instanceof ot)return{fieldPath:t.field.K(),removeAllFromArray:{values:e.elements}};if(e instanceof st)return{fieldPath:t.field.K(),increment:e.Qt};throw Ee("Unknown transform: "+t.transform)},t.prototype.qn=function(t){var e=null;if("setToServerValue"in t)_e("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),e=nt.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];e=new it(n)}else if("removeAllFromArray"in t){var r=t.removeAllFromArray.values||[];e=new ot(r)}else"increment"in t?e=new st(this,t.increment):Ee("Unknown transform proto: "+JSON.stringify(t));var i=b.Z(t.fieldPath);return new ut(i,e)},t.prototype.jn=function(t){return{documents:[this.Vn(t.path)]}},t.prototype.Kn=function(t){var e=t.documents.length;_e(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return _t.ve(this.gn(n)).xe()},t.prototype.Gn=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Vn(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Vn(n.L()),e.structuredQuery.from=[{collectionId:n.B()}]);var r=this.zn(t.filters);r&&(e.structuredQuery.where=r);var i=this.Hn(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ln(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Jn(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Jn(t.endAt)),e},t.prototype.Yn=function(t){var e=this.gn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.Xn(n.where));var u=[];n.orderBy&&(u=this.Zn(n.orderBy));var a=null;n.limit&&(a=this.fn(n.limit));var c=null;n.startAt&&(c=this.ti(n.startAt));var h=null;return n.endAt&&(h=this.ti(n.endAt)),new _t(e,i,u,s,a,"F",c,h).xe()},t.prototype.ei=function(t){var e=this.si(t.Ze);return null==e?null:{"goog-listen-tags":e}},t.prototype.si=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ee("Unrecognized query purpose: "+t)}},t.prototype.xe=function(t){var e,n=t.target;return(e=n.Pe()?{documents:this.jn(n)}:{query:this.Gn(n)}).targetId=t.targetId,t.resumeToken.Ot()>0&&(e.resumeToken=this.mn(t.resumeToken)),e},t.prototype.zn=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof Nt?e.ni(t):Ee("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.Xn=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.ii(t)]:void 0!==t.fieldFilter?[this.ri(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.Xn(t)})).reduce((function(t,e){return t.concat(e)})):Ee("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.Hn=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.oi(t)}))},t.prototype.Zn=function(t){var e=this;return t.map((function(t){return e.hi(t)}))},t.prototype.Jn=function(t){return{before:t.before,values:t.position}},t.prototype.ti=function(t){var e=!!t.before,n=t.values||[];return new xt(n,e)},t.prototype.ai=function(t){return le[t.name]},t.prototype.ui=function(t){switch(t){case"ASCENDING":return Ct.ASCENDING;case"DESCENDING":return Ct.DESCENDING;default:return}},t.prototype.ci=function(t){return pe[t.name]},t.prototype._i=function(t){switch(t){case"EQUAL":return At.EQUAL;case"GREATER_THAN":return At.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return At.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return At.LESS_THAN;case"LESS_THAN_OR_EQUAL":return At.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return At.ARRAY_CONTAINS;case"IN":return At.IN;case"ARRAY_CONTAINS_ANY":return At.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return Ee("Unspecified operator");default:return Ee("Unknown operator")}},t.prototype.li=function(t){return{fieldPath:t.K()}},t.prototype.di=function(t){return b.Z(t.fieldPath)},t.prototype.oi=function(t){return{field:this.li(t.field),direction:this.ai(t.dir)}},t.prototype.hi=function(t){return new Mt(this.di(t.field),this.ui(t.direction))},t.prototype.ri=function(t){return Nt.create(this.di(t.fieldFilter.field),this._i(t.fieldFilter.op),t.fieldFilter.value)},t.prototype.ni=function(t){if(t.op===At.EQUAL){if(tt(t.value))return{unaryFilter:{field:this.li(t.field),op:"IS_NAN"}};if(Z(t.value))return{unaryFilter:{field:this.li(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.li(t.field),op:this.ci(t.op),value:t.value}}},t.prototype.ii=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.di(t.unaryFilter.field);return Nt.create(e,At.EQUAL,{doubleValue:NaN});case"IS_NULL":var n=this.di(t.unaryFilter.field);return Nt.create(n,At.EQUAL,{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee("Unspecified filter");default:return Ee("Unknown filter")}},t.prototype.Mn=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.K())})),{fieldPaths:e}},t.prototype.Un=function(t){var e=(t.fieldPaths||[]).map((function(t){return b.Z(t)}));return at.Gt(e)},t}();function ve(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var ye=function(){function t(){}return t.fi=function(e){t.platform&&Ee("Platform already defined"),t.platform=e},t.Lt=function(){return t.platform||Ee("Platform not set"),t.platform},t}(),me=new h.Logger("@firebase/firestore");function ge(){return me.logLevel}function be(t){me.logLevel=t}function we(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(me.logLevel<=h.LogLevel.DEBUG){var n=e.map(Te);me.debug.apply(me,o.__spreadArrays(["Firestore ("+u+"): "+t],n))}}function Ie(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(me.logLevel<=h.LogLevel.ERROR){var n=e.map(Te);me.error.apply(me,o.__spreadArrays(["Firestore ("+u+"): "+t],n))}}function Te(t){if("string"==typeof t)return t;var e=ye.Lt();try{return e.Ti(t)}catch(e){return t}}function Ee(t){var e="FIRESTORE ("+u+") INTERNAL ASSERTION FAILED: "+t;throw Ie(e),new Error(e)}function _e(t,e){t||Ee(e)}var Ae=function(){function t(){}return t.mi=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t}();function Ne(t,e){return t<e?-1:t>e?1:0}function Se(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ke(t){return t+"\0"}var Oe=function(t,e,n,r,i){this.cn=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},De=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"wi",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.D=function(t){return Ne(this.projectId,t.projectId)||Ne(this.database,t.database)},t}(),Re=function(){function t(t){this.Ei=t,this.Ii={}}return t.prototype.get=function(t){var e=this.Ei(t),n=this.Ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(s.isEqual(t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Ei(t),r=this.Ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Ei(t),n=this.Ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){C(this.Ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.U=function(){return P(this.Ii)},t}(),Ce=function(){function t(t,e,n,r){this.batchId=t,this.Ri=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ut=function(t,e,n){for(var r=n.Ai,i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.Ut(e,s)}}return e},t.prototype.Bt=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.Bt(e,e,this.Ri))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=a.Bt(e,o,this.Ri))}return e},t.prototype.Pi=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Bt(r.key,t.get(r.key));i&&(n=n.it(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Qt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Se(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&Se(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),Pe=function(){function t(t,e,n,r,i){this.batch=t,this.Vi=e,this.Ai=n,this.streamToken=r,this.gi=i}return t.from=function(e,n,r,i){_e(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Xt(),s=e.mutations,u=0;u<s.length;u++)o=o.it(s[u].key,r[u].version);return new t(e,n,r,i,o)},t}(),Le=function(){function t(){this.pi=new O(xe.we),this.yi=new O(xe.bi)}return t.prototype.U=function(){return this.pi.U()},t.prototype.vi=function(t,e){var n=new xe(t,e);this.pi=this.pi.add(n),this.yi=this.yi.add(n)},t.prototype.Si=function(t,e){var n=this;t.forEach((function(t){return n.vi(t,e)}))},t.prototype.Di=function(t,e){this.Ci(new xe(t,e))},t.prototype.ki=function(t,e){var n=this;t.forEach((function(t){return n.Di(t,e)}))},t.prototype.Ni=function(t){var e=this,n=A.EMPTY,r=new xe(n,t),i=new xe(n,t+1),o=[];return this.yi.Ct([r,i],(function(t){e.Ci(t),o.push(t.key)})),o},t.prototype.Fi=function(){var t=this;this.pi.forEach((function(e){return t.Ci(e)}))},t.prototype.Ci=function(t){this.pi=this.pi.delete(t),this.yi=this.yi.delete(t)},t.prototype.$i=function(t){var e=A.EMPTY,n=new xe(e,t),r=new xe(e,t+1),i=Qt();return this.yi.Ct([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new xe(t,0),n=this.pi.Nt(e);return null!==n&&t.isEqual(n.key)},t}(),xe=function(){function t(t,e){this.key=t,this.Li=e}return t.we=function(t,e){return A.F(t.key,e.key)||Ne(t.Li,e.Li)},t.bi=function(t,e){return Ne(t.Li,e.Li)||A.F(t.key,e.key)},t}(),Me=function(){function t(t){var e=this;this.Oi=null,this.xi=null,this.result=void 0,this.error=void 0,this.Bi=!1,this.Ui=!1,t((function(t){e.Bi=!0,e.result=t,e.Oi&&e.Oi(t)}),(function(t){e.Bi=!0,e.error=t,e.xi&&e.xi(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Ui&&Ee("Called next() or catch() twice for PersistencePromise"),this.Ui=!0,this.Bi?this.error?this.qi(n,this.error):this.Qi(e,this.result):new t((function(t,i){r.Oi=function(n){r.Qi(e,n).next(t,i)},r.xi=function(e){r.qi(n,e).next(t,i)}}))},t.prototype.Wi=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.ji=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Qi=function(e,n){return e?this.ji((function(){return e(n)})):t.resolve(n)},t.prototype.qi=function(e,n){return e?this.ji((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Ki=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Gi=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Ki(r)},t}(),Ue=function(){function t(){this.zi=new Re((function(t){return t.toString()})),this.Hi=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Ji},set:function(t){this.Ji=t},enumerable:!0,configurable:!0}),t.prototype.Yi=function(t,e){this.Xi(),this.readTime=e,this.zi.set(t.key,t)},t.prototype.Zi=function(t,e){this.Xi(),e&&(this.readTime=e),this.zi.set(t,null)},t.prototype.tr=function(t,e){this.Xi();var n=this.zi.get(e);return void 0!==n?Me.resolve(n):this.er(t,e)},t.prototype.getEntries=function(t,e){return this.sr(t,e)},t.prototype.apply=function(t){return this.Xi(),this.Hi=!0,this.nr(t)},t.prototype.Xi=function(){},t}(),Ve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",je=function(){function t(){this.ir=[]}return t.prototype.rr=function(t){this.ir.push(t)},t.prototype.or=function(){this.ir.forEach((function(t){return t()}))},t}(),Fe=function(){function t(t,e,n){this.hr=t,this.ar=e,this.ur=n}return t.prototype.cr=function(t,e){var n=this;return this.ar._r(t,e).next((function(r){return n.lr(t,e,r)}))},t.prototype.lr=function(t,e,n){return this.hr.tr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Bt(e,t);return t}))},t.prototype.dr=function(t,e,n){var r=Wt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Bt(t,e);r=r.it(t,e)})),r},t.prototype.Tr=function(t,e){var n=this;return this.hr.getEntries(t,e).next((function(e){return n.mr(t,e)}))},t.prototype.mr=function(t,e){var n=this;return this.ar.wr(t,e).next((function(r){var i=n.dr(t,e,r),o=Kt();return i.forEach((function(t,e){e||(e=new It(t,T.S())),o=o.it(t,e)})),o}))},t.prototype.Er=function(t,e,n){return e.Pe()?this.Ir(t,e.path):e.He()?this.Rr(t,e,n):this.Ar(t,e,n)},t.prototype.Ir=function(t,e){return this.cr(t,new A(e)).next((function(t){var e=Ht();return t instanceof wt&&(e=e.it(t.key,t)),e}))},t.prototype.Rr=function(t,e,n){var r=this,i=e.collectionGroup,o=Ht();return this.ur.Pr(t,i).next((function(s){return Me.forEach(s,(function(s){var u=e.Le(s.child(i));return r.Ar(t,u,n).next((function(t){t.forEach((function(t,e){o=o.it(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ar=function(t,e,n){var r,i,o=this;return this.hr.Er(t,e,n).next((function(n){return r=n,o.ar.Vr(t,e)})).next((function(e){return i=e,o.gr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=a.Bt(h,h,o.Ri);r=f instanceof wt?r.it(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.gr=function(t,e,n){for(var r=Qt(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof pt&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.hr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof wt&&(c=c.it(t,e))})),c}))},t}(),qe=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.pr=n,this.yr=r}return t.br=function(e,n){for(var r=Qt(),i=Qt(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Be=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.vr=function(t){return n.Sr(t)},this.Dr=function(t){return e.Cr(t)})}return t.prototype.Sr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Dr&&this.Dr(t),t},t}();Be.kr=-1;var Ge=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Ke=function(){function t(t,e,n,r,i){this.Nr=t,this.Fr=e,this.$r=n,this.op=r,this.Mr=i,this.Lr=new Ge,this.then=this.Lr.promise.then.bind(this.Lr.promise),this.catch=this.Lr.promise.catch.bind(this.Lr.promise),this.Lr.promise.catch((function(t){}))}return t.Or=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.xr=setTimeout((function(){return e.Br()}),t)},t.prototype.Ur=function(){return this.Br()},t.prototype.cancel=function(t){null!==this.xr&&(this.clearTimeout(),this.Lr.reject(new d(l.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Br=function(){var t=this;this.Nr.qr((function(){return null!==t.xr?(t.clearTimeout(),t.op().then((function(e){return t.Lr.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.xr&&(this.Mr(this),clearTimeout(this.xr),this.xr=null)},t}(),We=function(){function t(){this.Qr=Promise.resolve(),this.Wr=!1,this.jr=[],this.Kr=null,this.Gr=!1,this.zr=[]}return Object.defineProperty(t.prototype,"Hr",{get:function(){return this.Wr},enumerable:!0,configurable:!0}),t.prototype.qr=function(t){this.enqueue(t)},t.prototype.Jr=function(t){this.Yr(),this.Xr(t)},t.prototype.Zr=function(t){return this.Yr(),this.Xr(t)},t.prototype.to=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.Yr(),this.Wr?[3,2]:(this.Wr=!0,[4,this.Zr(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.Yr(),this.Wr?new Promise((function(t){})):this.Xr(t)},t.prototype.Xr=function(t){var e=this,n=this.Qr.then((function(){return e.Gr=!0,t().catch((function(t){throw e.Kr=t,e.Gr=!1,Ie("INTERNAL UNHANDLED ERROR: ",t.stack||t.message||""),t})).then((function(t){return e.Gr=!1,t}))}));return this.Qr=n,n},t.prototype.eo=function(t,e,n){var r=this;this.Yr(),this.zr.indexOf(t)>-1&&(e=0);var i=Ke.Or(this,t,e,n,(function(t){return r.so(t)}));return this.jr.push(i),i},t.prototype.Yr=function(){this.Kr&&Ee("AsyncQueue is already failed: "+(this.Kr.stack||this.Kr.message))},t.prototype.no=function(){},t.prototype.io=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Qr];case 1:e.sent(),e.label=2;case 2:if(t!==this.Qr)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ro=function(t){for(var e=0,n=this.jr;e<n.length;e++)if(n[e].Fr===t)return!0;return!1},t.prototype.oo=function(t){var e=this;return this.io().then((function(){e.jr.sort((function(t,e){return t.$r-e.$r}));for(var n=0,r=e.jr;n<r.length;n++){var i=r[n];if(i.Ur(),"all"!==t&&i.Fr===t)break}return e.io()}))},t.prototype.ho=function(t){this.zr.push(t)},t.prototype.so=function(t){var e=this.jr.indexOf(t);this.jr.splice(e,1)},t}();function ze(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Ne(n,i);return 0===s?Ne(r,o):s}var He=function(){function t(t){this.ao=t,this.buffer=new O(ze),this.uo=0}return t.prototype.co=function(){return++this.uo},t.prototype._o=function(t){var e=[t,this.co()];if(this.buffer.size<this.ao)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ze(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Ye={lo:!1,do:0,fo:0,To:0},Xe=function(){function t(t,e,n){this.mo=t,this.wo=e,this.Eo=n}return t.Io=function(e){return new t(e,t.Ro,t.Ao)},t}();Xe.Po=-1,Xe.Vo=1048576,Xe.po=41943040,Xe.Ro=10,Xe.Ao=1e3,Xe.yo=new Xe(Xe.po,Xe.Ro,Xe.Ao),Xe.DISABLED=new Xe(Xe.Po,0,0);var Je=function(){function t(t,e){this.bo=t,this.Nr=e,this.vo=!1,this.So=null}return t.prototype.start=function(t){this.bo.Do.mo!==Xe.Po&&this.Co(t)},t.prototype.stop=function(){this.So&&(this.So.cancel(),this.So=null)},Object.defineProperty(t.prototype,"ko",{get:function(){return null!==this.So},enumerable:!0,configurable:!0}),t.prototype.Co=function(t){var e=this,n=this.vo?3e5:6e4;we("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.So=this.Nr.eo("lru_garbage_collection",n,(function(){return e.So=null,e.vo=!0,t.No(e.bo).then((function(){return e.Co(t)})).catch(Ze)}))},t}(),Qe=function(){function t(t,e){this.Fo=t,this.Do=e}return t.prototype.$o=function(t,e){return this.Fo.Mo(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Lo=function(t,e){var n=this;if(0===e)return Me.resolve(Be.kr);var r=new He(e);return this.Fo.Xs(t,(function(t){return r._o(t.sequenceNumber)})).next((function(){return n.Fo.Oo(t,(function(t){return r._o(t)}))})).next((function(){return r.maxValue}))},t.prototype.xo=function(t,e,n){return this.Fo.xo(t,e,n)},t.prototype.Bo=function(t,e){return this.Fo.Bo(t,e)},t.prototype.Uo=function(t,e){var n=this;return this.Do.mo===Xe.Po?(we("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(Ye)):this.qo(t).next((function(r){return r<n.Do.mo?(we("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.Do.mo),Ye):n.Qo(t,e)}))},t.prototype.qo=function(t){return this.Fo.qo(t)},t.prototype.Qo=function(t,e){var n,i,r,s,u,a,o,c=this,f=Date.now();return this.$o(t,this.Do.wo).next((function(e){return e>c.Do.Eo?(we("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.Do.Eo+" from "+e),i=c.Do.Eo):i=e,s=Date.now(),c.Lo(t,i)})).next((function(r){return n=r,u=Date.now(),c.xo(t,n,e)})).next((function(e){return r=e,a=Date.now(),c.Bo(t,n)})).next((function(t){return o=Date.now(),ge()<=h.LogLevel.DEBUG&&we("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+i+" in "+(u-s)+"ms\n\tRemoved "+r+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(o-a)+"ms\nTotal Duration: "+(o-f)+"ms"),Me.resolve({lo:!0,do:i,fo:r,To:t})}))},t}(),$e=function(){function t(t,e,n){this.persistence=t,this.Wo=e,this.jo=new Le,this.Ko=new N(Ne),this.Go=new Re((function(t){return t.canonicalId()})),this.zo=T.MIN,this.persistence.Jo.Ho(this.jo),this.ar=t.Yo(n),this.Xo=t.Zo(),this.th=t.eh(),this.sh=new Fe(this.Xo,this.ar,this.persistence.nh()),this.Wo.ih(this.sh)}return t.prototype.start=function(){return this.rh()},t.prototype.oh=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r=this;return o.__generator(this,(function(o){switch(o.label){case 0:return e=this.ar,n=this.sh,[4,this.persistence.runTransaction("Handle user change","readonly",(function(o){var i;return r.ar.hh(o).next((function(s){return i=s,e=r.persistence.Yo(t),n=new Fe(r.Xo,e,r.persistence.nh()),e.hh(o)})).next((function(t){for(var e=[],r=[],s=Qt(),u=0,a=i;u<a.length;u++){var c=a[u];e.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=t;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];s=s.add(g.key)}}return n.Tr(o,s).next((function(t){return{ah:t,uh:e,_h:r}}))}))}))];case 1:return i=o.sent(),[2,(this.ar=e,this.sh=n,this.Wo.ih(this.sh),i)]}}))}))},t.prototype.lh=function(t){var e,n=this,r=I.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Qt());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.sh.Tr(o,i).next((function(i){e=i;for(var s=[],u=0,a=t;u<a.length;u++){var c=a[u],h=c.ee(e.get(c.key));null!=h&&s.push(new pt(c.key,h,h.se(),ht.exists(!0)))}return n.ar.dh(o,r,s,t)}))})).then((function(t){var n=t.Pi(e);return{batchId:t.batchId,zi:n}}))},t.prototype.fh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ar.Th(n,t).next((function(t){return t?e.sh.Tr(n,t):Me.resolve(null)}))}))},t.prototype.mh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Xo.wh({Eh:!0});return e.ar.mh(n,t.batch,t.streamToken).next((function(){return e.Ih(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.ar.Rh(n)})).next((function(){return e.sh.Tr(n,r)}))}))},t.prototype.Ah=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ar.Ph(n,t).next((function(t){return _e(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.ar.Vh(n,t)})).next((function(){return e.ar.Rh(n)})).next((function(){return e.sh.Tr(n,r)}))}))},t.prototype.gh=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ar.gh(e)}))},t.prototype.ph=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(e){return t.ar.ph(e)}))},t.prototype.yh=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(n){return e.ar.yh(n,t)}))},t.prototype.bh=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.th.bh(e)}))},t.prototype.vh=function(e){var n=this,r=e.ts,i=this.Ko;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.Xo.wh({Eh:!0});i=n.Ko;var u=[];e.Ts.forEach((function(e,s){var a=i.get(s);if(a){u.push(n.th.Sh(o,e.gs,s).next((function(){return n.th.Dh(o,e.Ps,s)})));var c=e.resumeToken;if(c.Ot()>0){var h=a.ss(c,r).es(o.Ch);i=i.it(s,h),t.kh(a,h,e)&&u.push(n.th.Nh(o,h))}}}));var a=Kt(),c=Qt();if(e.ws.forEach((function(t,e){c=c.add(t)})),u.push(s.getEntries(o,c).next((function(t){e.ws.forEach((function(i,c){var h=t.get(i);c instanceof It&&c.version.isEqual(T.MIN)?(s.Zi(i,r),a=a.it(i,c)):null==h||c.version.D(h.version)>0||0===c.version.D(h.version)&&h.hasPendingWrites?(s.Yi(c,r),a=a.it(i,c)):we("LocalStore","Ignoring outdated watch update for ",i,". Current version:",h.version," Watch version:",c.version),e.Es.has(i)&&u.push(n.persistence.Jo.Fh(o,i))}))}))),!r.isEqual(T.MIN)){var h=n.th.bh(o).next((function(t){return n.th.$h(o,o.Ch,r)}));u.push(h)}return Me.Ki(u).next((function(){return s.apply(o)})).next((function(){return n.sh.mr(o,a)}))})).then((function(t){return n.Ko=i,t}))},t.kh=function(t,e,n){return _e(e.resumeToken.Ot()>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.Ot()||e.ts.C()-t.ts.C()>=this.Mh||n.Ps.size+n.Vs.size+n.gs.size>0},t.prototype.Lh=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.jo.Si(i.pr,o),this.jo.ki(i.yr,o),!i.fromCache){var s=this.Ko.get(o),u=s.ts,a=s.ns(u);this.Ko=this.Ko.it(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(n){return Me.forEach(t,(function(t){return Me.forEach(t.yr,(function(t){return e.persistence.Jo.Di(n,t)}))}))}))},t.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ar.xh(n,t)}))},t.prototype.Bh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.sh.cr(n,t)}))},t.prototype.Uh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.th.qh(n,t).next((function(i){return i?(r=i,Me.resolve(r)):e.th.Qh(n).next((function(i){return r=new jt(t,i,0,n.Ch),e.th.Wh(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.Ko.get(n.targetId)&&(e.Ko=e.Ko.it(n.targetId,n),e.Go.set(t,n.targetId)),n}))},t.prototype.qh=function(t,e){var n=this.Go.get(e);return void 0!==n?Me.resolve(this.Ko.get(n)):this.th.qh(t,e)},t.prototype.jh=function(t,e){var n=this,r=this.Ko.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.jo.Ni(t);return e?Me.resolve():Me.forEach(o,(function(t){return n.persistence.Jo.Di(i,t)})).next((function(){n.persistence.Jo.removeTarget(i,r)}))})).then((function(){n.Ko=n.Ko.remove(t),n.Go.delete(r.target)}))},t.prototype.Kh=function(t,e){var n=this,r=T.MIN,i=Qt();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.qh(o,t.xe()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.th.Gh(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.Wo.Er(o,t,e?r:T.MIN,e?i:Qt())})).next((function(t){return{documents:t,zh:i}}))}))},t.prototype.Hh=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",(function(n){return e.th.Gh(n,t)}))},t.prototype.Jh=function(){return this.persistence.Jh()},t.prototype.Yh=function(t){this.ar.Xh(t)},t.prototype.Zh=function(t){this.persistence.Zh(t)},t.prototype.Ih=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Me.resolve();return o.forEach((function(r){s=s.next((function(){return n.tr(t,r)})).next((function(t){var o=t,s=e.gi.get(r);_e(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.D(s)<0)&&(o=i.Ut(r,o,e))&&n.Yi(o,e.Vi)}))})),s.next((function(){return r.ar.Vh(t,i)}))},t.prototype.No=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Uo(n,e.Ko)}))},t.prototype.ta=function(t){var e=this,n=this.Ko.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.th.un(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.ea=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Xo.ea(e,t.zo)})).then((function(e){var n=e.sa,r=e.readTime;return t.zo=r,n}))},t.prototype.rh=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Xo.na(t)}))];case 1:return t.zo=n.sent(),[2]}}))}))},t}();function Ze(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){if(t.code!==l.FAILED_PRECONDITION||t.message!==Ve)throw t;return we("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function tn(t,e){if(0!==e.length)throw new d(l.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+gn(e.length,"argument")+".")}function en(t,e,n){if(e.length!==n)throw new d(l.INVALID_ARGUMENT,"Function "+t+"() requires "+gn(n,"argument")+", but was called with "+gn(e.length,"argument")+".")}function nn(t,e,n){if(e.length<n)throw new d(l.INVALID_ARGUMENT,"Function "+t+"() requires at least "+gn(n,"argument")+", but was called with "+gn(e.length,"argument")+".")}function rn(t,e,n,r){if(e.length<n||e.length>r)throw new d(l.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+gn(e.length,"argument")+".")}function on(t,e,n,r){hn(t,e,mn(n)+" argument",r)}function sn(t,e,n,r){void 0!==r&&on(t,e,n,r)}function an(t,e,n,r){hn(t,e,n+" option",r)}function un(t,e,n,r){void 0!==r&&an(t,e,n,r)}function cn(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,u=i;s<u.length;s++){var a=u[s];if(a===r)return;o.push(ln(a))}var c=ln(r);throw new d(l.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function hn(t,e,n,r){if(!("object"===e?fn(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=ln(r);throw new d(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function fn(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function ln(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ee("Unknown wrong type: "+typeof t)}function pn(t,e,n){if(void 0===n)throw new d(l.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+mn(e)+" argument, but it was undefined.")}function dn(t,e,n){C(e,(function(e,r){if(n.indexOf(e)<0)throw new d(l.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function vn(t,e,n,r){var i=ln(r);return new d(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+mn(n)+" argument to be a "+e+", but it was: "+i)}function yn(t,e,n){if(n<=0)throw new d(l.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+mn(e)+" argument to be a positive number, but it was: "+n+".")}function mn(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function gn(t,e){return t+" "+e+(1===t?"":"s")}function bn(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new d(l.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function wn(){if("undefined"==typeof Uint8Array)throw new d(l.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function In(){if(!ye.Lt().ia)throw new d(l.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}$e.Mh=3e8;var Tn=function(){function t(t){In(),this.ra=t}return t.fromBase64String=function(e){en("Blob.fromBase64String",arguments,1),on("Blob.fromBase64String","string",1,e),In();try{return new t(L.fromBase64String(e))}catch(e){throw new d(l.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(en("Blob.fromUint8Array",arguments,1),wn(),!(e instanceof Uint8Array))throw vn("Blob.fromUint8Array","Uint8Array",1,e);return new t(L.fromUint8Array(e))},t.prototype.toBase64=function(){return en("Blob.toBase64",arguments,0),In(),this.ra.toBase64()},t.prototype.toUint8Array=function(){return en("Blob.toUint8Array",arguments,0),wn(),this.ra.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ra.isEqual(t.ra)},t}(),En=bn(Tn,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),_n=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new d(l.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+gn(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(on("FieldPath","string",n,t[n]),0===t[n].length)throw new d(l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.oa=new b(t)}return t.documentId=function(){return t.ha},t.prototype.isEqual=function(e){if(!(e instanceof t))throw vn("isEqual","FieldPath",1,e);return this.oa.isEqual(e.oa)},t}();_n.ha=new _n(b.X().K());var An=new RegExp("[~\\*/\\[\\]]"),Nn=function(){function t(t){this.aa=t}return t.delete=function(){return tn("FieldValue.delete",arguments),Sn.instance},t.serverTimestamp=function(){return tn("FieldValue.serverTimestamp",arguments),kn.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return nn("FieldValue.arrayUnion",arguments,1),new On(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return nn("FieldValue.arrayRemove",arguments,1),new Dn(t)},t.increment=function(t){return on("FieldValue.increment","number",1,t),en("FieldValue.increment",arguments,1),new Rn(t)},t.prototype.isEqual=function(t){return this===t},t}(),Sn=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return o.__extends(e,t),e}(Nn);Sn.instance=new Sn;var kn=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(e,t),e}(Nn);kn.instance=new kn;var On=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.arrayUnion")||this).ua=e,n}return o.__extends(e,t),e}(Nn),Dn=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.arrayRemove")||this).ua=e,n}return o.__extends(e,t),e}(Nn),Rn=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.increment")||this).ca=e,n}return o.__extends(e,t),e}(Nn),Cn=bn(Nn,"Use FieldValue.<field>() instead."),Pn=function(){function t(t,e){if(en("GeoPoint",arguments,2),on("GeoPoint","number",1,t),on("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new d(l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new d(l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._a=t,this.la=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.la},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._a===t._a&&this.la===t.la},t.prototype.p=function(t){return Ne(this._a,t._a)||Ne(this.la,t.la)},t}(),Ln=/^__.*__$/,xn=function(){function t(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}return t.prototype.da=function(t,e){var n=[];return null!==this.se?n.push(new pt(t,this.data,this.se,e)):n.push(new lt(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new vt(t,this.fieldTransforms)),n},t}(),Mn=function(){function t(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}return t.prototype.da=function(t,e){var n=[new pt(t,this.data,this.se,e)];return this.fieldTransforms.length>0&&n.push(new vt(t,this.fieldTransforms)),n},t}();function Un(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee("Unexpected case for UserDataSource: "+t)}}var Vn=function(){function t(t,e,n,r,i,o){this.fa=t,this.methodName=e,this.path=n,this.Ta=r,void 0===i&&this.ma(),this.Ta=void 0!==r&&r,this.fieldTransforms=i||[],this.se=o||[]}return t.prototype.wa=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.fa,this.methodName,n,!1,this.fieldTransforms,this.se);return r.Ea(e),r},t.prototype.Ia=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.fa,this.methodName,n,!1,this.fieldTransforms,this.se);return r.ma(),r},t.prototype.Ra=function(e){return new t(this.fa,this.methodName,null,!0,this.fieldTransforms,this.se)},t.prototype.Aa=function(t){var e=null===this.path||this.path.U()?"":" (found in field "+this.path.toString()+")";return new d(l.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.se.find((function(e){return t.q(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.q(e.field)}))},t.prototype.ma=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Ea(this.path.get(t))},t.prototype.Ea=function(t){if(0===t.length)throw this.Aa("Document fields must not be empty");if(Un(this.fa)&&Ln.test(t))throw this.Aa('Document fields cannot begin and end with "__"')},t}(),jn=function(t,e){this.cn=t,this.key=e},Fn=function(){function t(t,e){this.serializer=t,this.Pa=e}return t.prototype.Va=function(t,e){var n=new Vn(0,t,b.H);Bn("Data must be an object, but it was:",n,e);var r=this.ga(e,n);return new xn(new dt(r),null,n.fieldTransforms)},t.prototype.pa=function(t,e,n){var r=new Vn(2,t,b.H);Bn("Data must be an object, but it was:",r,e);var i,o,s=this.ga(e,r);if(n){for(var u=new O(b.F),a=0,c=n;a<c.length;a++){var h=c[a],p=void 0;if(h instanceof _n)p=h.oa;else{if("string"!=typeof h)throw Ee("Expected stringOrFieldPath to be a string or a FieldPath");p=Kn(t,h)}if(!r.contains(p))throw new d(l.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");u=u.add(p)}i=at.Kt(u),o=r.fieldTransforms.filter((function(t){return i.zt(t.field)}))}else i=at.Gt(r.se),o=r.fieldTransforms;return new xn(new dt(s),i,o)},t.prototype.ya=function(t,e){var n=this,r=new Vn(1,t,b.H);Bn("Data must be an object, but it was:",r,e);var i=new O(b.F),o=dt._e();C(e,(function(e,s){var u=Kn(t,e),a=r.Ia(u);if((s=n.ba(s,a))instanceof Sn)i=i.add(u);else{var c=n.va(s,a);null!=c&&(i=i.add(u),o.set(u,c))}}));var s=at.Kt(i);return new Mn(o.oe(),s,r.fieldTransforms)},t.prototype.Sa=function(t,e,n,r){var i=new Vn(1,t,b.H),o=[Gn(t,e)],s=[n];if(r.length%2!=0)throw new d(l.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var u=0;u<r.length;u+=2)o.push(Gn(t,r[u])),s.push(r[u+1]);for(var a=new O(b.F),c=dt._e(),h=0;h<o.length;++h){var p=o[h],f=i.Ia(p),v=this.ba(s[h],f);if(v instanceof Sn)a=a.add(p);else{var y=this.va(v,f);null!=y&&(a=a.add(p),c.set(p,y))}}var m=at.Kt(a);return new Mn(c.oe(),m,i.fieldTransforms)},t.prototype.Da=function(t,e,n){void 0===n&&(n=!1);var r=new Vn(n?4:3,t,b.H);return this.va(e,r)},t.prototype.ba=function(t,e){try{return this.Pa(t)}catch(t){var n=Wn(t);throw e.Aa(n)}},t.prototype.va=function(t,e){if(qn(t=this.ba(t,e)))return Bn("Unsupported field value:",e,t),this.ga(t,e);if(t instanceof Nn)return this.Ca(t,e),null;if(e.path&&e.se.push(e.path),t instanceof Array){if(e.Ta&&4!==e.fa)throw e.Aa("Nested arrays are not supported");return this.ka(t,e)}return this.Na(t,e)},t.prototype.ga=function(t,e){var n=this,r={};return P(t)?e.path&&e.path.length>0&&e.se.push(e.path):C(t,(function(t,i){var o=n.va(i,e.wa(t));null!=o&&(r[t]=o)})),{mapValue:{fields:r}}},t.prototype.ka=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],u=this.va(s,e.Ra(r));null==u&&(u={nullValue:"NULL_VALUE"}),n.push(u),r++}return{arrayValue:{values:n}}},t.prototype.Ca=function(t,e){if(!Un(e.fa))throw e.Aa(t.aa+"() can only be used with update() and set()");if(null===e.path)throw e.Aa(t.aa+"() is not currently supported inside arrays");if(t instanceof Sn){if(2!==e.fa)throw 1===e.fa?e.Aa("FieldValue.delete() can only appear at the top level of your update data"):e.Aa("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.se.push(e.path)}else if(t instanceof kn)e.fieldTransforms.push(new ut(e.path,nt.instance));else if(t instanceof On){var n=this.Fa(t.aa,t.ua),r=new it(n);e.fieldTransforms.push(new ut(e.path,r))}else if(t instanceof Dn){var i=this.Fa(t.aa,t.ua),o=new ot(i);e.fieldTransforms.push(new ut(e.path,o))}else if(t instanceof Rn){var s=this.Da("FieldValue.increment",t.ca),u=new st(this.serializer,s);e.fieldTransforms.push(new ut(e.path,u))}else Ee("Unknown FieldValue type: "+t)},t.prototype.Na=function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return this.serializer.Tn(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=I.fromDate(t);return{timestampValue:this.serializer.k(n)}}if(t instanceof I){var r=new I(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:this.serializer.k(r)}}if(t instanceof Pn)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tn)return{bytesValue:this.serializer.mn(t)};if(t instanceof jn)return{referenceValue:this.serializer.En(t.key.path,t.cn)};throw e.Aa("Unsupported field value: "+ln(t))},t.prototype.Fa=function(t,e){var n=this;return e.map((function(e,r){var i=new Vn(3,t,b.H);return n.va(e,i.Ra(r))}))},t}();function qn(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof I||t instanceof Pn||t instanceof Tn||t instanceof jn||t instanceof Nn)}function Bn(t,e,n){if(!qn(n)||!fn(n)){var r=ln(n);throw"an object"===r?e.Aa(t+" a custom object"):e.Aa(t+" "+r)}}function Gn(t,e){if(e instanceof _n)return e.oa;if("string"==typeof e)return Kn(t,e);throw new d(l.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Kn(t,e){try{return function(t){if(t.search(An)>=0)throw new d(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(_n.bind.apply(_n,o.__spreadArrays([void 0],t.split("."))))}catch(e){throw new d(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).oa}catch(e){var n=Wn(e);throw new d(l.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Wn(t){return t instanceof Error?t.message:t.toString()}var zn=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.$a=t,this.Fr=e,this.Ma=n,this.La=r,this.Oa=i,this.xa=0,this.Ba=null,this.Ua=Date.now(),this.reset()}return t.prototype.reset=function(){this.xa=0},t.prototype.qa=function(){this.xa=this.Oa},t.prototype.Qa=function(t){var e=this;this.cancel();var n=Math.floor(this.xa+this.Wa()),r=Math.max(0,Date.now()-this.Ua),i=Math.max(0,n-r);this.xa>0&&we("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.xa+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ba=this.$a.eo(this.Fr,i,(function(){return e.Ua=Date.now(),t()})),this.xa*=this.La,this.xa<this.Ma&&(this.xa=this.Ma),this.xa>this.Oa&&(this.xa=this.Oa)},t.prototype.cancel=function(){null!==this.Ba&&(this.Ba.cancel(),this.Ba=null)},t.prototype.Wa=function(){return(Math.random()-.5)*this.xa},t}(),Hn=function(){function t(t,e,n,r,i,o){this.$a=t,this.ja=n,this.Ka=r,this.Ga=i,this.listener=o,this.state=0,this.za=0,this.Ha=null,this.stream=null,this.Ja=new zn(t,e)}return t.prototype.Ya=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Xa=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Za()},t.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Ya()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.tu=function(){this.state=0,this.Ja.reset()},t.prototype.eu=function(){var t=this;this.Xa()&&null===this.Ha&&(this.Ha=this.$a.eo(this.ja,6e4,(function(){return t.su()})))},t.prototype.nu=function(t){this.iu(),this.stream.send(t)},t.prototype.su=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.Xa()?[2,this.close(0)]:[2]}))}))},t.prototype.iu=function(){this.Ha&&(this.Ha.cancel(),this.Ha=null)},t.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return this.iu(),this.Ja.cancel(),this.za++,3!==t?this.Ja.reset():e&&e.code===l.RESOURCE_EXHAUSTED?(Ie(e.toString()),Ie("Using maximum backoff delay to prevent overloading the backend."),this.Ja.qa()):e&&e.code===l.UNAUTHENTICATED&&this.Ga._(),null!==this.stream&&(this.ru(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ou(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ru=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hu(this.za),n=this.za;this.Ga.getToken().then((function(e){t.za===n&&t.au(e)}),(function(n){e((function(){var e=new d(l.UNKNOWN,"Fetching auth token failed: "+n.message);return t.uu(e)}))}))},t.prototype.au=function(t){var e=this,n=this.hu(this.za);this.stream=this.cu(t),this.stream._u((function(){n((function(){return e.state=2,e.listener._u()}))})),this.stream.ou((function(t){n((function(){return e.uu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Za=function(){var t=this;this.state=4,this.Ja.Qa((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.uu=function(t){return we("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hu=function(t){var e=this;return function(n){e.$a.qr((function(){return e.za===t?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Yn=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return o.__extends(e,t),e.prototype.cu=function(t){return this.Ka.lu("Listen",t)},e.prototype.onMessage=function(t){this.Ja.reset();var e=this.serializer.kn(t),n=this.serializer.Fn(t);return this.listener.du(e,n)},e.prototype.fu=function(t){var e={};e.database=this.serializer.pn,e.addTarget=this.serializer.xe(t);var n=this.serializer.ei(t);n&&(e.labels=n),this.nu(e)},e.prototype.Tu=function(t){var e={};e.database=this.serializer.pn,e.removeTarget=t,this.nu(e)},e}(Hn),Xn=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.mu=!1,s.lastStreamToken=L.xt,s}return o.__extends(e,t),Object.defineProperty(e.prototype,"wu",{get:function(){return this.mu},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.mu=!1,t.prototype.start.call(this)},e.prototype.ru=function(){this.mu&&this.Eu([])},e.prototype.cu=function(t){return this.Ka.lu("Write",t)},e.prototype.onMessage=function(t){if(_e(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.wn(t.streamToken),this.mu){this.Ja.reset();var e=this.serializer.Wn(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Iu(n,e)}return _e(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.mu=!0,this.listener.Ru()},e.prototype.Au=function(){var t={};t.database=this.serializer.pn,this.nu(t)},e.prototype.Eu=function(t){var e=this,n={streamToken:this.serializer.mn(this.lastStreamToken),writes:t.map((function(t){return e.serializer.$n(t)}))};this.nu(n)},e}(Hn),Jn=function(){function t(t,e,n,r){this.$a=t,this.Ka=e,this.credentials=n,this.serializer=r}return t.prototype.Pu=function(t){return new Xn(this.$a,this.Ka,this.credentials,this.serializer,t)},t.prototype.Vu=function(t){return new Yn(this.$a,this.Ka,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.pn,writes:t.map((function(t){return e.serializer.$n(t)}))};return this.gu("Commit",n).then((function(t){return e.serializer.Wn(t.writeResults,t.commitTime)}))},t.prototype.pu=function(t){var e=this,n={database:this.serializer.pn,documents:t.map((function(t){return e.serializer.An(t)}))};return this.yu("BatchGetDocuments",n).then((function(n){var r=Kt();n.forEach((function(t){var n=e.serializer.Cn(t);r=r.it(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);_e(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.gu=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.Ka.gu(t,e,r)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&n.credentials._(),t}))},t.prototype.yu=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.Ka.yu(t,e,r)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&n.credentials._(),t}))},t}(),Qn=function(){function t(t){this.bu=t,this.vu=Xt(),this.mutations=[],this.Su=!1,this.Du=null,this.Cu=new Set}return t.prototype.pu=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(this.ku(),this.mutations.length>0)throw new d(l.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.bu.pu(t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof It||t instanceof wt?n.Nu(t):Ee("Document in a transaction was a "+t.constructor.name)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.da(t,this.Zt(t))),this.Cu.add(t)},t.prototype.update=function(t,e){try{this.write(e.da(t,this.Fu(t)))}catch(t){this.Du=t}this.Cu.add(t)},t.prototype.delete=function(t){this.write([new yt(t,this.Zt(t))]),this.Cu.add(t)},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:if(this.ku(),this.Du)throw this.Du;return t=this.vu,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new mt(t,e.Zt(t)))})),[4,this.bu.commit(this.mutations)];case 1:return n.sent(),this.Su=!0,[2]}}))}))},t.prototype.Nu=function(t){var e;if(t instanceof wt)e=t.version;else{if(!(t instanceof It))throw Ee("Document in a transaction was a "+t.constructor.name);e=T.S()}var n=this.vu.get(t.key);if(null!==n){if(!e.isEqual(n))throw new d(l.ABORTED,"Document version changed between two reads.")}else this.vu=this.vu.it(t.key,e)},t.prototype.Zt=function(t){var e=this.vu.get(t);return!this.Cu.has(t)&&e?ht.updateTime(e):ht.NONE},t.prototype.Fu=function(t){var e=this.vu.get(t);if(!this.Cu.has(t)&&e){if(e.isEqual(T.S()))throw new d(l.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ht.updateTime(e)}return ht.exists(!0)},t.prototype.write=function(t){this.ku(),this.mutations=this.mutations.concat(t)},t.prototype.ku=function(){},t}(),$n=function(){function t(t,e){this.Nr=t,this.$u=e,this.state="Unknown",this.Mu=0,this.Lu=null,this.Ou=!0}return t.prototype.xu=function(){var t=this;0===this.Mu&&(this.Bu("Unknown"),this.Lu=this.Nr.eo("online_state_timeout",1e4,(function(){return t.Lu=null,t.Uu("Backend didn't respond within 10 seconds."),t.Bu("Offline"),Promise.resolve()})))},t.prototype.qu=function(t){"Online"===this.state?this.Bu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Qu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.Bu("Offline")))},t.prototype.set=function(t){this.Qu(),this.Mu=0,"Online"===t&&(this.Ou=!1),this.Bu(t)},t.prototype.Bu=function(t){t!==this.state&&(this.state=t,this.$u(t))},t.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ou?(Ie(e),this.Ou=!1):we("OnlineStateTracker",e)},t.prototype.Qu=function(){null!==this.Lu&&(this.Lu.cancel(),this.Lu=null)},t}(),Zn=function(){function t(t,e,n,i,r){var s=this;this.Wu=t,this.bu=e,this.ju=[],this.Ku=new Map,this.Gu=null,this.networkEnabled=!1,this.isPrimary=!1,this.zu=r,this.zu.Hu((function(t){n.qr((function(){return o.__awaiter(s,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Ju()?(we("RemoteStore","Restarting streams for network reachability change."),[4,this.Yu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Xu=new $n(n,i),this.Zu=this.bu.Vu({_u:this.tc.bind(this),ou:this.ec.bind(this),du:this.sc.bind(this)}),this.nc=this.bu.Pu({_u:this.ic.bind(this),ou:this.rc.bind(this),Ru:this.oc.bind(this),Iu:this.Iu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.Ju()?(t=this.nc,[4,this.Wu.ph()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.hc()?this.ac():this.Xu.set("Unknown"),[4,this.uc()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.Xu.set("Offline"),[2]}}))}))},t.prototype.cc=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.nc.stop()];case 1:return t.sent(),[4,this.Zu.stop()];case 2:return t.sent(),this.ju.length>0&&(we("RemoteStore","Stopping write stream with "+this.ju.length+" pending writes"),this.ju=[]),this._c(),[2]}}))}))},t.prototype.lc=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return we("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.zu.lc(),this.Xu.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Ku.has(t.targetId)||(this.Ku.set(t.targetId,t),this.hc()?this.ac():this.Zu.Xa()&&this.dc(t))},t.prototype.fc=function(t){this.Ku.delete(t),this.Zu.Xa()&&this.Tc(t),0===this.Ku.size&&(this.Zu.Xa()?this.Zu.eu():this.Ju()&&this.Xu.set("Unknown"))},t.prototype.un=function(t){return this.Ku.get(t)||null},t.prototype.an=function(t){return this.mc.an(t)},t.prototype.dc=function(t){this.Gu.Bs(t.targetId),this.Zu.fu(t)},t.prototype.Tc=function(t){this.Gu.Bs(t),this.Zu.Tu(t)},t.prototype.ac=function(){this.Gu=new ce(this),this.Zu.start(),this.Xu.xu()},t.prototype.hc=function(){return this.Ju()&&!this.Zu.Ya()&&this.Ku.size>0},t.prototype.Ju=function(){return this.isPrimary&&this.networkEnabled},t.prototype._c=function(){this.Gu=null},t.prototype.tc=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){return this.Ku.forEach((function(e,n){t.dc(e)})),[2]}))}))},t.prototype.ec=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this._c(),this.hc()?(this.Xu.qu(t),this.ac()):this.Xu.set("Unknown"),[2]}))}))},t.prototype.sc=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.Xu.set("Online"),t instanceof ae&&2===t.state&&t.cause?[2,this.wc(t)]:(t instanceof oe?this.Gu.zs(t):t instanceof se?this.Gu.sn(t):this.Gu.Ys(t),e.isEqual(T.MIN)?[3,4]:[4,this.Wu.bh()]);case 1:return n=r.sent(),e.D(n)>=0?[4,this.Ec(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:r.label=4;case 4:return[2]}}))}))},t.prototype.Ec=function(t){var e=this,n=this.Gu.rn(t);return n.Ts.forEach((function(n,r){if(n.resumeToken.Ot()>0){var i=e.Ku.get(r);i&&e.Ku.set(r,i.ss(n.resumeToken,t))}})),n.ms.forEach((function(t){var n=e.Ku.get(t);if(n){e.Ku.set(t,n.ss(L.xt,n.ts)),e.Tc(t);var r=new jt(n.target,t,1,n.sequenceNumber);e.dc(r)}})),this.mc.vh(n)},t.prototype.wc=function(t){var e=this,n=t.cause,i=Promise.resolve();return t.targetIds.forEach((function(t){i=i.then((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.Ku.has(t)?[2,(this.Ku.delete(t),this.Gu.removeTarget(t),this.mc.Ic(t,n))]:[2]}))}))}))})),i},t.prototype.uc=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:return this.Rc()?(t=this.ju.length>0?this.ju[this.ju.length-1].batchId:-1,[4,this.Wu.Oh(t)]):[3,5];case 1:return null!==(e=n.sent())?[3,2]:(0===this.ju.length&&this.nc.eu(),[3,4]);case 2:return this.Ac(e),[4,this.uc()];case 3:n.sent(),n.label=4;case 4:n.label=5;case 5:return this.Pc()&&this.Vc(),[2]}}))}))},t.prototype.Rc=function(){return this.Ju()&&this.ju.length<10},t.prototype.gc=function(){return this.ju.length},t.prototype.Ac=function(t){this.ju.push(t),this.nc.Xa()&&this.nc.wu&&this.nc.Eu(t.mutations)},t.prototype.Pc=function(){return this.Ju()&&!this.nc.Ya()&&this.ju.length>0},t.prototype.Vc=function(){this.nc.start()},t.prototype.ic=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.nc.Au(),[2]}))}))},t.prototype.oc=function(){var t=this;return this.Wu.yh(this.nc.lastStreamToken).then((function(){for(var e=0,n=t.ju;e<n.length;e++){var r=n[e];t.nc.Eu(r.mutations)}})).catch(Ze)},t.prototype.Iu=function(t,e){var n=this,r=this.ju.shift(),i=Pe.from(r,t,e,this.nc.lastStreamToken);return this.mc.pc(i).then((function(){return n.uc()}))},t.prototype.rc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){return t&&this.ju.length>0?[2,(e=this.nc.wu?this.yc(t):this.bc(t),e.then((function(){n.Pc()&&n.Vc()})))]:[2]}))}))},t.prototype.bc=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return qt(t.code)?[2,(we("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.nc.lastStreamToken),this.nc.lastStreamToken=L.xt,this.Wu.yh(L.xt).catch(Ze))]:[2]}))}))},t.prototype.yc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i=this;return o.__generator(this,(function(r){return qt(n=t.code)&&n!==l.ABORTED?(e=this.ju.shift(),[2,(this.nc.tu(),this.mc.vc(e.batchId,t).then((function(){return i.uc()})))]):[2]}))}))},t.prototype.Sc=function(){return new Qn(this.bu)},t.prototype.Yu=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.Xu.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.Dc=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Ju()?(we("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Yu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Cc=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:[4,this.cc()];case 3:e.sent(),this.Xu.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function er(t,e){return"firestore_clients_"+t+"_"+e}function nr(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function rr(t,e){return"firestore_targets_"+t+"_"+e}var tr=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.kc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new d(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Ie("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Nc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ir=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.kc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new d(r.error.code,r.error.message)),i?new t(e,r.state,o):(Ie("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Nc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),or=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.kc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Zt(),s=0;i&&s<r.activeTargetIds.length;++s)i=U(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ie("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),sr=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.kc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ie("SharedClientState","Failed to parse online state: "+e),null)},t}(),ar=function(){function t(){this.activeTargetIds=Zt()}return t.prototype.Fc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.$c=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Nc=function(){var t={activeTargetIds:this.activeTargetIds.j(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ur=function(){function t(e,n,r,i,o){if(this.$a=e,this.platform=n,this.persistenceKey=r,this.Mc=i,this.mc=null,this.$u=null,this.vr=null,this.Lc={},this.Oc=this.xc.bind(this),this.ko=!1,this.Bc=[],!t.Uc(this.platform))throw new d(l.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.qc=er(this.persistenceKey,this.Mc),this.Qc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Lc[this.Mc]=new ar,this.Wc=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.jc=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Kc=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Gc=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Oc)}return t.Uc=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n,i,r,s,u,a,c,h,f,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.mc.Jh()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Mc&&(r=this.getItem(er(this.persistenceKey,i)))&&(s=or.kc(i,r))&&(this.Lc[s.clientId]=s);for(this.zc(),(u=this.storage.getItem(this.Gc))&&(a=this.Hc(u))&&this.Jc(a),c=0,h=this.Bc;c<h.length;c++)f=h[c],this.xc(f);return this.Bc=[],this.platform.window.addEventListener("unload",(function(){return l.lc()})),this.ko=!0,[2]}}))}))},t.prototype.Cr=function(t){this.setItem(this.Qc,JSON.stringify(t))},t.prototype.Yc=function(){var t=Zt();return C(this.Lc,(function(e,n){t=t.Ft(n.activeTargetIds)})),t},t.prototype.Xc=function(t){for(var e in this.Lc)if(this.Lc.hasOwnProperty(e)&&this.Lc[e].activeTargetIds.has(t))return!0;return!1},t.prototype.Zc=function(t){this.t_(t,"pending")},t.prototype.e_=function(t,e,n){this.t_(t,e,n),this.s_(t)},t.prototype.n_=function(t){var e="not-current";if(this.Xc(t)){var n=this.storage.getItem(rr(this.persistenceKey,t));if(n){var r=ir.kc(t,n);r&&(e=r.state)}}return this.i_.Fc(t),this.zc(),e},t.prototype.r_=function(t){this.i_.$c(t),this.zc()},t.prototype.o_=function(t){return this.i_.activeTargetIds.has(t)},t.prototype.h_=function(t){this.removeItem(rr(this.persistenceKey,t))},t.prototype.a_=function(t,e,n){this.u_(t,e,n)},t.prototype.oh=function(t,e,n){var r=this;e.forEach((function(t){r.s_(t)})),this.currentUser=t,n.forEach((function(t){r.Zc(t)}))},t.prototype.c_=function(t){this.__(t)},t.prototype.lc=function(){this.ko&&(this.platform.window.removeEventListener("storage",this.Oc),this.removeItem(this.qc),this.ko=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return we("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){we("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){we("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.xc=function(t){var e=this;if(t.storageArea===this.storage){if(we("SharedClientState","EVENT",t.key,t.newValue),t.key===this.qc)return void Ie("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.$a.qr((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,i,r,s,u;return o.__generator(this,(function(o){if(this.ko){if(null!==t.key)if(this.Wc.test(t.key)){if(null==t.newValue)return e=this.l_(t.key),[2,this.d_(e,null)];if(n=this.f_(t.key,t.newValue))return[2,this.d_(n.clientId,n)]}else if(this.jc.test(t.key)){if(null!==t.newValue&&(i=this.T_(t.key,t.newValue)))return[2,this.m_(i)]}else if(this.Kc.test(t.key)){if(null!==t.newValue&&(r=this.w_(t.key,t.newValue)))return[2,this.E_(r)]}else if(t.key===this.Gc){if(null!==t.newValue&&(s=this.Hc(t.newValue)))return[2,this.Jc(s)]}else t.key===this.Qc&&(u=function(t){var e=Be.kr;if(null!=t)try{var n=JSON.parse(t);_e("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Ie("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Be.kr&&this.vr(u)}else this.Bc.push(t);return[2]}))}))}))}},Object.defineProperty(t.prototype,"i_",{get:function(){return this.Lc[this.Mc]},enumerable:!0,configurable:!0}),t.prototype.zc=function(){this.setItem(this.qc,this.i_.Nc())},t.prototype.t_=function(t,e,n){var r=new tr(this.currentUser,t,e,n),i=nr(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Nc())},t.prototype.s_=function(t){var e=nr(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.__=function(t){var e={clientId:this.Mc,onlineState:t};this.storage.setItem(this.Gc,JSON.stringify(e))},t.prototype.u_=function(t,e,n){var r=rr(this.persistenceKey,t),i=new ir(t,e,n);this.setItem(r,i.Nc())},t.prototype.l_=function(t){var e=this.Wc.exec(t);return e?e[1]:null},t.prototype.f_=function(t,e){var n=this.l_(t);return or.kc(n,e)},t.prototype.T_=function(t,e){var n=this.jc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return tr.kc(new a(i),r,e)},t.prototype.w_=function(t,e){var n=this.Kc.exec(t),r=Number(n[1]);return ir.kc(r,e)},t.prototype.Hc=function(t){return sr.kc(t)},t.prototype.m_=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.mc.I_(t.batchId,t.state,t.error)]:(we("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.E_=function(t){return this.mc.R_(t.targetId,t.state,t.error)},t.prototype.d_=function(t,e){var n=this,i=this.Yc();e?this.Lc[t]=e:delete this.Lc[t];var r=this.Yc(),s=[],u=[];return r.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return i.has(t)||s.push(t),[2]}))}))})),i.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return r.has(t)||u.push(t),[2]}))}))})),this.mc.A_(s,u)},t.prototype.Jc=function(t){this.Lc[t.clientId]&&this.$u(t.onlineState)},t}(),cr=function(){function t(){this.P_=new ar,this.V_={},this.mc=null,this.$u=null,this.vr=null}return t.prototype.Zc=function(t){},t.prototype.e_=function(t,e,n){},t.prototype.n_=function(t){return this.P_.Fc(t),this.V_[t]||"not-current"},t.prototype.a_=function(t,e,n){this.V_[t]=e},t.prototype.r_=function(t){this.P_.$c(t)},t.prototype.o_=function(t){return this.P_.activeTargetIds.has(t)},t.prototype.h_=function(t){delete this.V_[t]},t.prototype.Yc=function(){return this.P_.activeTargetIds},t.prototype.Xc=function(t){return this.P_.activeTargetIds.has(t)},t.prototype.start=function(){return this.P_=new ar,Promise.resolve()},t.prototype.oh=function(t,e,n){},t.prototype.c_=function(t){},t.prototype.lc=function(){},t.prototype.Cr=function(t){},t}(),fr=function(){function t(t){this.g_=t}return t.prototype.next=function(){return this.g_+=2,this.g_},t.p_=function(){return new t(0)},t.y_=function(){return new t(-1)},t}(),lr=function(t){this.key=t},hr=function(t){this.key=t},pr=function(){function t(t,e){this.query=t,this.b_=e,this.v_=null,this.As=!1,this.S_=Qt(),this._s=Qt(),this.D_=new te(t.Be.bind(t))}return Object.defineProperty(t.prototype,"C_",{get:function(){return this.b_},enumerable:!0,configurable:!0}),t.prototype.k_=function(t,e){var n=this,r=e?e.N_:new ee,i=e?e.D_:this.D_,o=e?e._s:this._s,s=i,u=!1,a=this.query.je()&&i.size===this.query.limit?i.last():null,c=this.query.Ke()&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof wt?e:null;f&&(f=n.query.matches(f)?f:null);var l=!!h&&n._s.has(h.key),p=!!f&&(f.te||n._s.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.F_(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.query.Be(f,a)>0||c&&n.query.Be(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.je()||this.query.Ke())for(;s.size>this.query.limit;){var h=this.query.je()?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{D_:s,N_:r,M_:u,_s:o}},t.prototype.F_=function(t,e){return t.te&&e.hasCommittedMutations&&!e.te},t.prototype.nr=function(t,e,n){var r=this,i=this.D_;this.D_=t.D_,this._s=t._s;var o=t.N_.us();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.Be(t.doc,e.doc)})),this.L_(n);var s=e?this.O_():[],u=0===this.S_.size&&this.As?1:0,a=u!==this.v_;return this.v_=u,0!==o.length||a?{snapshot:new ne(this.query,t.D_,i,o,t._s,0===u,a,!1),x_:s}:{x_:s}},t.prototype.B_=function(t){return this.As&&"Offline"===t?(this.As=!1,this.nr({D_:this.D_,N_:new ee,_s:this._s,M_:!1},!1)):{x_:[]}},t.prototype.U_=function(t){return!this.b_.has(t)&&!!this.D_.has(t)&&!this.D_.get(t).te},t.prototype.L_=function(t){var e=this;t&&(t.Ps.forEach((function(t){return e.b_=e.b_.add(t)})),t.Vs.forEach((function(t){})),t.gs.forEach((function(t){return e.b_=e.b_.delete(t)})),this.As=t.As)},t.prototype.O_=function(){var t=this;if(!this.As)return[];var e=this.S_;this.S_=Qt(),this.D_.forEach((function(e){t.U_(e.key)&&(t.S_=t.S_.add(e.key))}));var n=[];return e.forEach((function(e){t.S_.has(e)||n.push(new hr(e))})),this.S_.forEach((function(t){e.has(t)||n.push(new lr(t))})),n},t.prototype.q_=function(t){this.b_=t.zh,this.S_=Qt();var e=this.k_(t.documents);return this.nr(e,!0)},t.prototype.Q_=function(){return ne.fs(this.query,this.D_,this._s,0===this.v_)},t}(),dr=function(){function t(t,e,n,r){this.Nr=t,this.W_=e,this.updateFunction=n,this.Lr=r,this.j_=5,this.Ja=new zn(this.Nr,"retry_transaction")}return t.prototype.K_=function(){this.G_()},t.prototype.G_=function(){var t=this;this.Ja.Qa((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return o.__generator(this,(function(r){return t=this.W_.Sc(),(e=this.z_(t))&&e.then((function(e){n.Nr.qr((function(){return t.commit().then((function(){n.Lr.resolve(e)})).catch((function(t){n.H_(t)}))}))})).catch((function(t){n.H_(t)})),[2]}))}))}))},t.prototype.z_=function(t){try{var e=this.updateFunction(t);return!x(e)&&e.catch&&e.then?e:(this.Lr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Lr.reject(t),null}},t.prototype.H_=function(t){var e=this;this.j_>0&&this.J_(t)?(this.j_-=1,this.Nr.qr((function(){return e.G_(),Promise.resolve()}))):this.Lr.reject(t)},t.prototype.J_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qt(e)}return!1},t}(),vr=function(t,e,n){this.query=t,this.targetId=e,this.view=n},yr=function(t){this.key=t,this.Y_=!1},mr=function(){function t(t,e,n,r,i){this.Wu=t,this.W_=e,this.X_=n,this.currentUser=r,this.Z_=i,this.tl=null,this.el=new Re((function(t){return t.canonicalId()})),this.sl=new Map,this.nl=[],this.il=new N(A.F),this.rl=new Map,this.ol=new Le,this.hl={},this.al=new Map,this.ul=fr.y_(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"cl",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){this.tl=t},t.prototype.listen=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s;return o.__generator(this,(function(o){switch(o.label){case 0:return this._l("listen()"),(i=this.el.get(t))?(e=i.targetId,this.X_.n_(e),n=i.view.Q_(),[3,4]):[3,1];case 1:return[4,this.Wu.Uh(t.xe())];case 2:return r=o.sent(),s=this.X_.n_(r.targetId),e=r.targetId,[4,this.ll(t,e,"current"===s)];case 3:n=o.sent(),this.isPrimary&&this.W_.listen(r),o.label=4;case 4:return[2,(this.tl.du([n]),e)]}}))}))},t.prototype.ll=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i,r,s,u,a,c;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.Wu.Kh(t,!0)];case 1:return i=o.sent(),r=new pr(t,i.zh),s=r.k_(i.documents),u=ie.Rs(e,n&&"Offline"!==this.onlineState),a=r.nr(s,!0===this.isPrimary,u),c=new vr(t,e,r),[2,(this.el.set(t,c),this.sl.has(e)?this.sl.get(e).push(t):this.sl.set(e,[t]),a.snapshot)]}}))}))},t.prototype.dl=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.Wu.Kh(t.query,!0)];case 1:return e=r.sent(),n=t.view.q_(e),[2,(this.isPrimary&&this.fl(t.targetId,n.x_),n)]}}))}))},t.prototype.fc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i=this;return o.__generator(this,(function(r){switch(r.label){case 0:return this._l("unlisten()"),e=this.el.get(t),(n=this.sl.get(e.targetId)).length>1?[2,(this.sl.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),void this.el.delete(t))]:this.isPrimary?(this.X_.r_(e.targetId),this.X_.Xc(e.targetId)?[3,2]:[4,this.Wu.jh(e.targetId,!1).then((function(){i.X_.h_(e.targetId),i.W_.fc(e.targetId),i.Tl(e.targetId)})).catch(Ze)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.Tl(e.targetId),[4,this.Wu.jh(e.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this._l("write()"),[4,this.Wu.lh(t)];case 1:return n=r.sent(),this.X_.Zc(n.batchId),this.ml(n.batchId,e),[4,this.wl(n.zi)];case 2:return r.sent(),[4,this.W_.uc()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new dr(t,this.W_,e,n).K_()},t.prototype.vh=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:this._l("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Wu.vh(t)];case 2:return e=r.sent(),t.Ts.forEach((function(t,e){var r=n.rl.get(e);r&&(_e(t.Ps.size+t.Vs.size+t.gs.size<=1,"Limbo resolution for single document contains multiple changes."),t.Ps.size>0?r.Y_=!0:t.Vs.size>0?_e(r.Y_,"Received change for limbo target document without add."):t.gs.size>0&&(_e(r.Y_,"Received remove for limbo target document without add."),r.Y_=!1))})),[4,this.wl(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Ze(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.B_=function(t,e){if(this.isPrimary&&0===e||!this.isPrimary&&1===e){this._l("applyOnlineStateChange()");var n=[];this.el.forEach((function(e,r){var i=r.view.B_(t);i.snapshot&&n.push(i.snapshot)})),this.tl.El(t),this.tl.du(n),this.onlineState=t,this.isPrimary&&this.X_.c_(t)}},t.prototype.Ic=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,i,r,s,u,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this._l("rejectListens()"),this.X_.a_(t,"rejected",e),n=this.rl.get(t),(i=n&&n.key)?(this.il=this.il.remove(i),this.rl.delete(t),this.Il(),r=(r=new N(A.F)).it(i,new It(i,T.S())),s=Qt().add(i),u=new re(T.MIN,new Map,new O(Ne),r,s),[2,this.vh(u)]):[4,this.Wu.jh(t,!1).then((function(){return a.Tl(t,e)})).catch(Ze)];case 1:return o.sent(),[2]}}))}))},t.prototype.I_=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i;return o.__generator(this,(function(r){switch(r.label){case 0:return this._l("applyBatchState()"),[4,this.Wu.fh(t)];case 1:return null===(i=r.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.W_.uc()];case 2:return r.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.Rl(t,n||null),this.Wu.Yh(t)):Ee("Unknown batchState: "+e),r.label=4;case 4:return[4,this.wl(i)];case 5:return r.sent(),[3,7];case 6:we("SyncEngine","Cannot apply mutation batch with id: "+t),r.label=7;case 7:return[2]}}))}))},t.prototype.pc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:this._l("applySuccessfulWrite()"),e=t.batch.batchId,this.Rl(e,null),this.Al(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Wu.mh(t)];case 2:return n=r.sent(),this.X_.e_(e,"acknowledged"),[4,this.wl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ze(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.vc=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:this._l("rejectFailedWrite()"),this.Rl(t,e),this.Al(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Wu.Ah(t)];case 2:return n=r.sent(),this.X_.e_(t,"rejected",e),[4,this.wl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ze(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Pl=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.W_.Ju()||we("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.Wu.gh()];case 1:return-1===(e=r.sent())?[2,void t.resolve()]:((n=this.al.get(e)||[]).push(t),this.al.set(e,n),[2])}}))}))},t.prototype.Al=function(t){(this.al.get(t)||[]).forEach((function(t){t.resolve()})),this.al.delete(t)},t.prototype.Vl=function(t){this.al.forEach((function(e){e.forEach((function(e){e.reject(new d(l.CANCELLED,t))}))})),this.al.clear()},t.prototype.ml=function(t,e){var n=this.hl[this.currentUser.s()];n||(n=new N(Ne)),n=n.it(t,e),this.hl[this.currentUser.s()]=n},t.prototype.Rl=function(t,e){var n=this.hl[this.currentUser.s()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.hl[this.currentUser.s()]=n}},t.prototype.Tl=function(t,e){var n=this;void 0===e&&(e=null),this.X_.r_(t);for(var r=0,i=this.sl.get(t);r<i.length;r++){var o=i[r];this.el.delete(o),e&&this.tl.gl(o,e)}if(this.sl.delete(t),this.isPrimary){var s=this.ol.$i(t);this.ol.Ni(t),s.forEach((function(t){n.ol.Mi(t)||n.pl(t)}))}},t.prototype.pl=function(t){var e=this.il.get(t);null!==e&&(this.W_.fc(e),this.il=this.il.remove(t),this.rl.delete(e),this.Il())},t.prototype.fl=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof lr?(this.ol.vi(i.key,t),this.yl(i)):i instanceof hr?(we("SyncEngine","Document no longer in limbo: "+i.key),this.ol.Di(i.key,t),this.ol.Mi(i.key)||this.pl(i.key)):Ee("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.yl=function(t){var e=t.key;this.il.get(e)||(we("SyncEngine","New document in limbo: "+e),this.nl.push(e),this.Il())},t.prototype.Il=function(){for(;this.nl.length>0&&this.il.size<this.Z_;){var t=this.nl.shift(),e=this.ul.next();this.rl.set(e,new yr(t)),this.il=this.il.it(t,e),this.W_.listen(new jt(_t.ve(t.path).xe(),e,2,Be.kr))}},t.prototype.bl=function(){return this.il},t.prototype.vl=function(){return this.nl},t.prototype.wl=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,i,r,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=[],i=[],r=[],this.el.forEach((function(o,u){r.push(Promise.resolve().then((function(){var e=u.view.k_(t);return e.M_?s.Wu.Kh(u.query,!1).then((function(t){var n=t.documents;return u.view.k_(n,e)})):e})).then((function(t){var r=e&&e.Ts.get(u.targetId),o=u.view.nr(t,!0===s.isPrimary,r);if(s.fl(u.targetId,o.x_),o.snapshot){s.isPrimary&&s.X_.a_(u.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var a=qe.br(u.targetId,o.snapshot);i.push(a)}})))})),[4,Promise.all(r)];case 1:return o.sent(),this.tl.du(n),[4,this.Wu.Lh(i)];case 2:return o.sent(),[2]}}))}))},t.prototype._l=function(t){},t.prototype.Dc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.Vl("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.Wu.oh(t)]):[3,3];case 1:return n=r.sent(),this.X_.oh(t,n.uh,n._h),[4,this.wl(n.ah)];case 2:r.sent(),r.label=3;case 3:return[4,this.W_.Dc()];case 4:return r.sent(),[2]}}))}))},t.prototype.Cc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s,u,a,c=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.W_.Cc(!0)]);case 1:return o.sent(),e=this.X_.Yc(),[4,this.Sl(e.j())];case 2:for(n=o.sent(),i=0,r=n;i<r.length;i++)s=r[i],this.W_.listen(s);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,u=[],a=Promise.resolve(),this.sl.forEach((function(t,e){c.X_.o_(e)?u.push(e):a=a.then((function(){return c.Tl(e),c.Wu.jh(e,!0)})),c.W_.fc(e)})),[4,a]);case 4:return o.sent(),[4,this.Sl(u)];case 5:return o.sent(),this.Dl(),[4,this.W_.Cc(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},t.prototype.Dl=function(){var t=this;this.rl.forEach((function(e,n){t.W_.fc(n)})),this.ol.Fi(),this.rl=new Map,this.il=new N(A.F)},t.prototype.Sl=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s,u,a,c,h,f,l,p,d;return o.__generator(this,(function(o){switch(o.label){case 0:e=[],n=[],i=0,r=t,o.label=1;case 1:return i<r.length?(s=r[i],u=void 0,(a=this.sl.get(s))&&0!==a.length?[4,this.Wu.jh(s,!0)]:[3,8]):[3,14];case 2:return o.sent(),[4,this.Wu.Uh(a[0].xe())];case 3:u=o.sent(),c=0,h=a,o.label=4;case 4:return c<h.length?(f=h[c],l=this.el.get(f),[4,this.dl(l)]):[3,7];case 5:(p=o.sent()).snapshot&&n.push(p.snapshot),o.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return[4,this.Wu.ta(s)];case 9:return d=o.sent(),[4,this.Wu.Uh(d)];case 10:return u=o.sent(),[4,this.ll(this.Cl(d),s,!1)];case 11:o.sent(),o.label=12;case 12:e.push(u),o.label=13;case 13:return i++,[3,1];case 14:return[2,(this.tl.du(n),e)]}}))}))},t.prototype.Cl=function(t){return new _t(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},t.prototype.Jh=function(){return this.Wu.Jh()},t.prototype.R_=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i,r;return o.__generator(this,(function(o){switch(o.label){case 0:return this.isPrimary?(we("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.sl.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Wu.ea()];case 3:return i=o.sent(),r=re.Is(t,"current"===e),[4,this.wl(i,r)];case 4:return o.sent(),[3,8];case 5:return[4,this.Wu.jh(t,!0)];case 6:return o.sent(),this.Tl(t,n),[3,8];case 7:Ee("Unexpected target state: "+e),o.label=8;case 8:return[2]}}))}))},t.prototype.A_=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,i,r,s,u,a,c,h,f,l,p=this;return o.__generator(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[3,10];n=0,i=t,d.label=1;case 1:return n<i.length?(r=i[n],[4,this.Wu.ta(r)]):[3,6];case 2:return s=d.sent(),[4,this.Wu.Uh(s)];case 3:return u=d.sent(),[4,this.ll(this.Cl(s),u.targetId,!1)];case 4:d.sent(),this.W_.listen(u),d.label=5;case 5:return n++,[3,1];case 6:a=function(t){return o.__generator(this,(function(e){switch(e.label){case 0:return c.sl.has(t)?[4,c.Wu.jh(t,!1).then((function(){p.W_.fc(t),p.Tl(t)})).catch(Ze)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=this,h=0,f=e,d.label=7;case 7:return h<f.length?(l=f[h],[5,a(l)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.Wu.Zh(!0),this.W_.enableNetwork()},t.prototype.disableNetwork=function(){return this.Wu.Zh(!1),this.W_.disableNetwork()},t.prototype.an=function(t){var e=this.rl.get(t);if(e&&e.Y_)return Qt().add(e.key);var n=Qt(),r=this.sl.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],u=this.el.get(s);n=n.Ft(u.view.C_)}return n},t}(),gr=function(){this.kl=null,this.targetId=0,this.Nl=[]},wr=function(){function t(t){this.mc=t,this.Fl=new Re((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.$l=new Set,this.mc.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.Fl.get(e);return r||(n=!0,r=new gr,this.Fl.set(e,r)),r.Nl.push(t),t.B_(this.onlineState),r.kl&&t.Ml(r.kl)&&this.Ll(),n?this.mc.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.fc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r;return o.__generator(this,(function(o){return e=t.query,n=!1,(i=this.Fl.get(e))&&(r=i.Nl.indexOf(t))>=0&&(i.Nl.splice(r,1),n=0===i.Nl.length),n?[2,(this.Fl.delete(e),this.mc.fc(e))]:[2]}))}))},t.prototype.du=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.Fl.get(o);if(s){for(var u=0,a=s.Nl;u<a.length;u++)a[u].Ml(i)&&(e=!0);s.kl=i}}e&&this.Ll()},t.prototype.gl=function(t,e){var n=this.Fl.get(t);if(n)for(var r=0,i=n.Nl;r<i.length;r++)i[r].onError(e);this.Fl.delete(t)},t.prototype.El=function(t){this.onlineState=t;var e=!1;this.Fl.forEach((function(n,r){for(var i=0,o=r.Nl;i<o.length;i++)o[i].B_(t)&&(e=!0)})),e&&this.Ll()},t.prototype.Ol=function(t){this.$l.add(t),t.next()},t.prototype.xl=function(t){this.$l.delete(t)},t.prototype.Ll=function(){this.$l.forEach((function(t){t.next()}))},t}(),Ir=function(){function t(t,e,n){this.query=t,this.Bl=e,this.Ul=!1,this.ql=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Ml=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ne(t.query,t.docs,t.cs,e,t._s,t.fromCache,t.ls,!0)}var o=!1;return this.Ul?this.Ql(t)&&(this.Bl.next(t),o=!0):this.Wl(t,this.onlineState)&&(this.jl(t),o=!0),this.ql=t,o},t.prototype.onError=function(t){this.Bl.error(t)},t.prototype.B_=function(t){this.onlineState=t;var e=!1;return this.ql&&!this.Ul&&this.Wl(this.ql,t)&&(this.jl(this.ql),e=!0),e},t.prototype.Wl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Kl&&n||t.docs.U()&&"Offline"!==e)},t.prototype.Ql=function(t){if(t.docChanges.length>0)return!0;var e=this.ql&&this.ql.hasPendingWrites!==t.hasPendingWrites;return!(!t.ls&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.jl=function(t){t=ne.fs(t.query,t.docs,t._s,t.fromCache),this.Ul=!0,this.Bl.next(t)},t}(),Tr=function(){function t(){}return t.prototype.ih=function(t){this.Gl=t},t.prototype.Er=function(t,e,n,i){var r=this;return e.Oe()||n.isEqual(T.MIN)?this.zl(t,e):this.Gl.Tr(t,i).next((function(s){var u=r.Hl(e,s);return(e.je()||e.Ke())&&r.M_(e.ge,u,i,n)?r.zl(t,e):(ge()<=h.LogLevel.DEBUG&&we("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),r.Gl.Er(t,e,n).next((function(t){return u.forEach((function(e){t=t.it(e.key,e)})),t})))}))},t.prototype.Hl=function(t,e){var n=new O((function(e,n){return t.Be(e,n)}));return e.forEach((function(e,r){r instanceof wt&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.M_=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.D(r)>0)},t.prototype.zl=function(t,e){return ge()<=h.LogLevel.DEBUG&&we("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Gl.Er(t,e,T.MIN)},t}();function Er(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=br(e)),e=_r(t.get(n),e);return br(e)}function _r(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function br(t){return t+""}function Ar(t){var e=t.length;if(_e(e>=2,"Invalid path "+t),2===e)return _e(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),E.H;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Ee('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ee('Invalid encoded resource path: "'+t+'"')}o=s+2}return new E(r)}var Nr=function(){function t(e){this.db=e,12.2===t.Jl(i.getUA())&&Ie("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Yl=function(e,n,r){return we("SimpleDb","Opening database:",e),new Me((function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;i(new t(n))},s.onblocked=function(){o(new d(l.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new d(l.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(t){we("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,s.transaction,t.oldVersion,Qr).next((function(){we("SimpleDb","Database upgrade to version "+Qr+" complete")}))}})).Wi()},t.delete=function(t){return we("SimpleDb","Removing database:",t),Dr(window.indexedDB.deleteDatabase(t)).Wi()},t.Uc=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.Xl())return!0;if(void 0===window.navigator)return!1;var e=i.getUA(),n=t.Jl(e),r=0<n&&n<10,o=t.Zl(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.Xl=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.td)},t.ed=function(t,e){return t.store(e)},t.Jl=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Zl=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.sd=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i,r,s,u,a;return o.__generator(this,(function(c){switch(c.label){case 0:i="readonly"===t,r=0,s=function(){var t,s,a,c,h;return o.__generator(this,(function(o){switch(o.label){case 0:++r,t=kr.open(u.db,i?"readonly":"readwrite",e),o.label=1;case 1:return o.trys.push([1,3,,4]),s=n(t).catch((function(e){return t.abort(e),Me.reject(e)})).Wi(),a={},s.catch((function(){})),[4,t.nd];case 2:return[2,(a.value=(o.sent(),s),a)];case 3:return c=o.sent(),h="FirebaseError"!==c.name&&r<3,we("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,h),h?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Sr=function(){function t(t){this.rd=t,this.od=!1,this.hd=null}return Object.defineProperty(t.prototype,"Bi",{get:function(){return this.od},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ad",{get:function(){return this.hd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.rd=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.od=!0},t.prototype.ud=function(t){this.hd=t},t.prototype.delete=function(){return Dr(this.rd.delete())},t}(),kr=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this._d=new Ge,this.transaction.oncomplete=function(){e._d.resolve()},this.transaction.onabort=function(){t.error?e._d.reject(t.error):e._d.resolve()},this.transaction.onerror=function(t){var n=Cr(t.target.error);e._d.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"nd",{get:function(){return this._d.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this._d.reject(t),this.aborted||(we("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Or(e)},t}(),Or=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(we("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(we("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dr(n)},t.prototype.add=function(t){return we("SimpleDb","ADD",this.store.name,t,t),Dr(this.store.add(t))},t.prototype.get=function(t){var e=this;return Dr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),we("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return we("SimpleDb","DELETE",this.store.name,t),Dr(this.store.delete(t))},t.prototype.count=function(){return we("SimpleDb","COUNT",this.store.name),Dr(this.store.count())},t.prototype.ld=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.dd(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.fd=function(t,e){we("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Td=!1;var r=this.cursor(n);return this.dd(r,(function(t,e,n){return n.delete()}))},t.prototype.md=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.dd(r,e)},t.prototype.wd=function(t){var e=this.cursor({});return new Me((function(n,r){e.onerror=function(t){var e=Cr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.dd=function(t,e){var n=[];return new Me((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Sr(i),s=e(i.primaryKey,i.value,o);if(s instanceof Me){var u=s.catch((function(t){return o.done(),Me.reject(t)}));n.push(u)}o.Bi?r():null===o.ad?i.continue():i.continue(o.ad)}else r()}})).next((function(){return Me.Ki(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Td?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Dr(t){return new Me((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Cr(t.target.error);n(e)}}))}var Rr=!1;function Cr(t){var e=Nr.Jl(i.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new d("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Rr||(Rr=!0,setTimeout((function(){throw r}),0)),r}}return t}var Pr=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ur=n,this.Jo=r,this.Ed={}}return t.Id=function(e,n,r,i){return _e(""!==e.uid,"UserID must not be an empty string."),new t(e.t()?e.uid:"",n,r,i)},t.prototype.Rd=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mr(t).md({index:ni.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.mh=function(t,e,n){return this.Ad(t).next((function(e){return e.lastStreamToken=n.toBase64(),Vr(t).put(e)}))},t.prototype.ph=function(t){return this.Ad(t).next((function(t){return L.fromBase64String(t.lastStreamToken)}))},t.prototype.yh=function(t,e){return this.Ad(t).next((function(n){return n.lastStreamToken=e.toBase64(),Vr(t).put(n)}))},t.prototype.dh=function(t,e,n,r){var i=this,o=Ur(t),s=Mr(t);return s.add({}).next((function(u){_e("number"==typeof u,"Auto-generated key is not a number");for(var a=new Ce(u,e,n,r),c=i.serializer.Pd(i.userId,a),h=[],f=new O((function(t,e){return Ne(t.K(),e.K())})),l=0,p=r;l<p.length;l++){var d=p[l],v=ri.key(i.userId,d.key.path,u);f=f.add(d.key.path.L()),h.push(s.put(c)),h.push(o.put(v,ri.PLACEHOLDER))}return f.forEach((function(e){h.push(i.ur.Vd(t,e))})),t.rr((function(){i.Ed[u]=a.keys()})),Me.Ki(h).next((function(){return a}))}))},t.prototype.Ph=function(t,e){var n=this;return Mr(t).get(e).next((function(t){return t?(_e(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.gd(t)):null}))},t.prototype.Th=function(t,e){var n=this;return this.Ed[e]?Me.resolve(this.Ed[e]):this.Ph(t,e).next((function(t){if(t){var r=t.keys();return n.Ed[e]=r,r}return null}))},t.prototype.xh=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Mr(t).md({index:ni.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(_e(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.gd(e)),i.done()})).next((function(){return o}))},t.prototype.gh=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Mr(t).md({index:ni.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.hh=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mr(t).ld(ni.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.gd(t)}))}))},t.prototype._r=function(t,e){var n=this,r=ri.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ur(t).md({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Ar(a);if(u===n.userId&&e.path.isEqual(h))return Mr(t).get(c).next((function(t){if(!t)throw Ee("Dangling document-mutation reference found: "+r+" which points to "+c);_e(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.gd(t))}));s.done()})).next((function(){return o}))},t.prototype.wr=function(t,e){var n=this,r=new O(Ne),i=[];return e.forEach((function(e){var o=ri.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Ur(t).md({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Ar(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Me.Ki(i).next((function(){return n.pd(t,r)}))},t.prototype.Vr=function(t,e){var n=this,r=e.path,i=r.length+1,o=ri.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new O(Ne);return Ur(t).md({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Ar(a);s===n.userId&&r.q(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.pd(t,u)}))},t.prototype.pd=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Mr(t).get(e).next((function(t){if(null===t)throw Ee("Dangling document-mutation reference found, which points to "+e);_e(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.gd(t))})))})),Me.Ki(i).next((function(){return r}))},t.prototype.Vh=function(t,e){var n=this;return xr(t.yd,this.userId,e).next((function(r){return t.rr((function(){n.Xh(e.batchId)})),Me.forEach(r,(function(e){return n.Jo.bd(t,e)}))}))},t.prototype.Xh=function(t){delete this.Ed[t]},t.prototype.Rh=function(t){var e=this;return this.Rd(t).next((function(n){if(!n)return Me.resolve();var r=IDBKeyRange.lowerBound(ri.prefixForUser(e.userId)),i=[];return Ur(t).md({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ar(t[1]);i.push(o)}else r.done()})).next((function(){_e(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.K()})))}))}))},t.prototype.Mi=function(t,e){return Lr(t,this.userId,e)},t.prototype.Ad=function(t){var e=this;return Vr(t).get(this.userId).next((function(t){return t||new ei(e.userId,-1,"")}))},t}();function Lr(t,e,n){var r=ri.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ur(t).md({range:o,Td:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function xr(t,e,n){var r=t.store(ni.store),i=t.store(ri.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.md({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){_e(1===u,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=ri.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Me.Ki(o).next((function(){return c}))}function Mr(t){return wi.ed(t,ni.store)}function Ur(t){return wi.ed(t,ri.store)}function Vr(t){return wi.ed(t,ei.store)}var jr=function(){function t(t,e){this.Jo=t,this.serializer=e}return t.prototype.Qh=function(t){var e=this;return this.vd(t).next((function(n){var r=new fr(n.highestTargetId);return n.highestTargetId=r.next(),e.Sd(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.bh=function(t){return this.vd(t).next((function(t){return T.v(new I(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Dd=function(t){return Br(t.yd)},t.prototype.$h=function(t,e,n){var r=this;return this.vd(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.k()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Sd(t,i)}))},t.prototype.Wh=function(t,e){var n=this;return this.Cd(t,e).next((function(){return n.vd(t).next((function(r){return r.targetCount+=1,n.kd(e,r),n.Sd(t,r)}))}))},t.prototype.Nh=function(t,e){return this.Cd(t,e)},t.prototype.Nd=function(t,e){var n=this;return this.Fd(t,e.targetId).next((function(){return Fr(t).delete(e.targetId)})).next((function(){return n.vd(t)})).next((function(e){return _e(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.Sd(t,e)}))},t.prototype.xo=function(t,e,n){var r=this,i=0,o=[];return Fr(t).md((function(s,u){var a=r.serializer.$d(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Nd(t,a)))})).next((function(){return Me.Ki(o)})).next((function(){return i}))},t.prototype.Xs=function(t,e){var n=this;return Fr(t).md((function(t,r){var i=n.serializer.$d(r);e(i)}))},t.prototype.vd=function(t){return qr(t.yd)},t.prototype.Sd=function(t,e){return(n=t,wi.ed(n,hi.store)).put(hi.key,e);var n},t.prototype.Cd=function(t,e){return Fr(t).put(this.serializer.Md(e))},t.prototype.kd=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Ld=function(t){return this.vd(t).next((function(t){return t.targetCount}))},t.prototype.qh=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Fr(t).md({range:i,index:ui.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.$d(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},t.prototype.Dh=function(t,e,n){var r=this,i=[],o=Gr(t);return e.forEach((function(e){var s=Er(e.path);i.push(o.put(new ci(n,s))),i.push(r.Jo.vi(t,e))})),Me.Ki(i)},t.prototype.Sh=function(t,e,n){var r=this,i=Gr(t);return Me.forEach(e,(function(e){var o=Er(e.path);return Me.Ki([i.delete([n,o]),r.Jo.Di(t,e)])}))},t.prototype.Fd=function(t,e){var n=Gr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Gh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Gr(t),i=Qt();return r.md({range:n,Td:!0},(function(t,e,n){var r=Ar(t[1]),o=new A(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=Er(e.path),r=IDBKeyRange.bound([n],[ke(n)],!1,!0),i=0;return Gr(t).md({index:ci.documentTargetsIndex,Td:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.un=function(t,e){var n=this;return Fr(t).get(e).next((function(t){return t?n.serializer.$d(t):null}))},t}();function Fr(t){return wi.ed(t,ui.store)}function qr(t){return Nr.ed(t,hi.store).get(hi.key).next((function(t){return _e(null!==t,"Missing metadata row."),t}))}function Br(t){return qr(t).next((function(t){return t.highestListenSequenceNumber}))}function Gr(t){return wi.ed(t,ci.store)}var Kr=function(){function t(t,e){this.serializer=t,this.ur=e}return t.prototype.Yi=function(t,e,n){return zr(t).put(Hr(e),n)},t.prototype.Zi=function(t,e){var n=zr(t),r=Hr(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Od(t,r)}))},t.prototype.tr=function(t,e){var n=this;return zr(t).get(Hr(e)).next((function(t){return n.xd(t)}))},t.prototype.Bd=function(t,e){var n=this;return zr(t).get(Hr(e)).next((function(t){var e=n.xd(t);return e?{Ud:e,size:Yr(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Wt();return this.qd(t,e,(function(t,e){var i=n.xd(e);r=r.it(t,i)})).next((function(){return r}))},t.prototype.Qd=function(t,e){var n=this,r=Wt(),i=new N(A.F);return this.qd(t,e,(function(t,e){var o=n.xd(e);o?(r=r.it(t,o),i=i.it(t,Yr(e))):(r=r.it(t,null),i=i.it(t,0))})).next((function(){return{Wd:r,jd:i}}))},t.prototype.qd=function(t,e,n){if(e.U())return Me.resolve();var r=IDBKeyRange.bound(e.first().path.j(),e.last().path.j()),i=e._t(),o=i.Et();return zr(t).md({range:r},(function(t,e,r){for(var s=A.nt(t);o&&A.F(o,s)<0;)n(o,null),o=i.Et();o&&o.isEqual(s)&&(n(o,e),o=i.It()?i.Et():null),o?r.ud(o.path.j()):r.done()})).next((function(){for(;o;)n(o,null),o=i.It()?i.Et():null}))},t.prototype.Er=function(t,e,n){var r=this,i=Ht(),o=e.path.length+1,s={};if(n.isEqual(T.MIN)){var u=e.path.j();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.j(),c=this.serializer.Kd(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=si.collectionReadTimeIndex}return zr(t).md(s,(function(t,n,s){if(t.length===o){var u=r.serializer.Gd(n);e.path.q(u.key.path)?u instanceof wt&&e.matches(u)&&(i=i.it(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.ea=function(t,e){var n=this,r=Kt(),i=this.serializer.Kd(e),o=zr(t),s=IDBKeyRange.lowerBound(i,!0);return o.md({index:si.readTimeIndex,range:s},(function(t,e){var o=n.serializer.Gd(e);r=r.it(o.key,o),i=e.readTime})).next((function(){return{sa:r,readTime:n.serializer.zd(i)}}))},t.prototype.na=function(t){var e=this,n=zr(t),r=T.MIN;return n.md({index:si.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.zd(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.wh=function(e){return new t.Hd(this,!!e&&e.Eh)},t.prototype.Jd=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Wr(t).get(ai.key).next((function(t){return _e(!!t,"Missing document cache metadata"),t}))},t.prototype.Od=function(t,e){return Wr(t).put(ai.key,e)},t.prototype.xd=function(t){if(t){var e=this.serializer.Gd(t);return e instanceof It&&e.version.isEqual(T.S())?null:e}return null},t}();function Wr(t){return wi.ed(t,ai.store)}function zr(t){return wi.ed(t,si.store)}function Hr(t){return t.path.j()}function Yr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ee("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}Kr.Hd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Yd=e,r.Eh=n,r.Xd=new Re((function(t){return t.toString()})),r}return o.__extends(e,t),e.prototype.nr=function(t){var e=this,n=[],r=0,i=new O((function(t,e){return Ne(t.K(),e.K())}));return this.zi.forEach((function(o,s){var u=e.Xd.get(o);if(s){var a=e.Yd.serializer.Zd(s,e.readTime);i=i.add(o.path.L());var c=Yr(a);r+=c-u,n.push(e.Yd.Yi(t,o,a))}else if(r-=u,e.Eh){var h=e.Yd.serializer.Zd(new It(o,T.S()),e.readTime);n.push(e.Yd.Yi(t,o,h))}else n.push(e.Yd.Zi(t,o))})),i.forEach((function(r){n.push(e.Yd.ur.Vd(t,r))})),n.push(this.Yd.updateMetadata(t,r)),Me.Ki(n)},e.prototype.er=function(t,e){var n=this;return this.Yd.Bd(t,e).next((function(t){return null===t?(n.Xd.set(e,0),null):(n.Xd.set(e,t.size),t.Ud)}))},e.prototype.sr=function(t,e){var n=this;return this.Yd.Qd(t,e).next((function(t){var e=t.Wd;return t.jd.forEach((function(t,e){n.Xd.set(t,e)})),e}))},e}(Ue);var Xr=function(){function t(){this.tf=new Jr}return t.prototype.Vd=function(t,e){return this.tf.add(e),Me.resolve()},t.prototype.Pr=function(t,e){return Me.resolve(this.tf.getEntries(e))},t}(),Jr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.B(),n=t.L(),r=this.index[e]||new O(E.F),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.B(),n=t.L(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new O(E.F)).j()},t}(),Qr=10,$r=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;_e(n<r&&n>=0&&r<=Qr,"Unexpected schema upgrade from v"+n+" to v"+r+".");var o=new kr(e);n<1&&r>=1&&(function(t){t.createObjectStore(ti.store)}(t),function(t){t.createObjectStore(ei.store,{keyPath:ei.keyPath}),t.createObjectStore(ni.store,{keyPath:ni.keyPath,autoIncrement:!0}).createIndex(ni.userMutationsIndex,ni.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ri.store)}(t),pi(t),function(t){t.createObjectStore(si.store)}(t));var s=Me.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ci.store),t.deleteObjectStore(ui.store),t.deleteObjectStore(hi.store)}(t),pi(t)),s=s.next((function(){return function(t){var e=t.store(hi.store),n=new hi(0,0,T.MIN.k(),0);return e.put(hi.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ni.store).ld().next((function(n){t.deleteObjectStore(ni.store),t.createObjectStore(ni.store,{keyPath:ni.keyPath,autoIncrement:!0}).createIndex(ni.userMutationsIndex,ni.userMutationsKeyPath,{unique:!0});var r=e.store(ni.store),i=n.map((function(t){return r.put(t)}));return Me.Ki(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(di.store,{keyPath:di.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ai.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(si.store);e.createIndex(si.readTimeIndex,si.readTimeIndexPath,{unique:!1}),e.createIndex(si.collectionReadTimeIndex,si.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(si.store).md((function(t,n){e+=Yr(n)})).next((function(){var n=new ai(e);return t.store(ai.store).put(ai.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(ei.store),r=t.store(ni.store);return n.ld().next((function(n){return Me.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ld(ni.userMutationsIndex,i).next((function(r){return Me.forEach(r,(function(r){_e(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.gd(r);return xr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(ci.store),n=t.store(si.store);return Br(t).next((function(t){var r=[];return n.md((function(n,i){var o=new E(n),s=function(t){return[0,Er(t)]}(o);r.push(e.get(s).next((function(n){return n?Me.resolve():function(n){return e.put(new ci(0,Er(n),t))}(o)})))})).next((function(){return Me.Ki(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(fi.store,{keyPath:fi.keyPath});var n=e.store(fi.store),r=new Jr,i=function(t){if(r.add(t)){var e=t.B(),i=t.L();return n.put({collectionId:e,parent:Er(i)})}};return e.store(si.store).md({Td:!0},(function(t,e){var n=new E(t);return i(n.L())})).next((function(){return e.store(ri.store).md({Td:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ar(n));return i(r.L())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(ui.store);return n.md((function(t,r){var i=e.serializer.$d(r),o=e.serializer.Md(i);return n.put(o)}))},t}(),Zr=function(t,e){this.seconds=t,this.nanoseconds=e},ti=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ti.store="owner",ti.key="owner";var ei=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ei.store="mutationQueues",ei.keyPath="userId";var ni=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ni.store="mutations",ni.keyPath="batchId",ni.userMutationsIndex="userMutationsIndex",ni.userMutationsKeyPath=["userId","batchId"];var ri=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Er(e)]},t.key=function(t,e,n){return[t,Er(e),n]},t}();ri.store="documentMutations",ri.PLACEHOLDER=new ri;var ii=function(t,e){this.path=t,this.readTime=e},oi=function(t,e){this.path=t,this.version=e},si=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};si.store="remoteDocuments",si.readTimeIndex="readTimeIndex",si.readTimeIndexPath="readTime",si.collectionReadTimeIndex="collectionReadTimeIndex",si.collectionReadTimeIndexPath=["parentPath","readTime"];var ai=function(t){this.byteSize=t};ai.store="remoteDocumentGlobal",ai.key="remoteDocumentGlobalKey";var ui=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ui.store="targets",ui.keyPath="targetId",ui.queryTargetsIndexName="queryTargetsIndex",ui.queryTargetsKeyPath=["canonicalId","targetId"];var ci=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ci.store="targetDocuments",ci.keyPath=["targetId","path"],ci.documentTargetsIndex="documentTargetsIndex",ci.documentTargetsKeyPath=["path","targetId"];var hi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};hi.key="targetGlobalKey",hi.store="targetGlobal";var fi=function(t,e){this.collectionId=t,this.parent=e};function pi(t){t.createObjectStore(ci.store,{keyPath:ci.keyPath}).createIndex(ci.documentTargetsIndex,ci.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ui.store,{keyPath:ui.keyPath}).createIndex(ui.queryTargetsIndexName,ui.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(hi.store)}fi.store="collectionParents",fi.keyPath=["collectionId","parent"];var di=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};di.store="clientMetadata",di.keyPath="clientId";var vi=o.__spreadArrays(o.__spreadArrays(o.__spreadArrays([ei.store,ni.store,ri.store,si.store,ui.store,ti.store,hi.store,ci.store],[di.store]),[ai.store]),[fi.store]),li=function(){function t(){this.ef=new Jr}return t.prototype.Vd=function(t,e){var n=this;if(!this.ef.has(e)){var r=e.B(),i=e.L();t.rr((function(){n.ef.add(e)}));var o={collectionId:r,parent:Er(i)};return yi(t).put(o)}return Me.resolve()},t.prototype.Pr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ke(e),""],!1,!0);return yi(t).ld(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ar(o.parent))}return n}))},t}();function yi(t){return wi.ed(t,fi.store)}var mi=function(){function t(t){this.sf=t}return t.prototype.Gd=function(t){if(t.document)return this.sf.vn(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=A.nt(t.noDocument.path),n=this.nf(t.noDocument.readTime);return new It(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=A.nt(t.unknownDocument.path),i=this.nf(t.unknownDocument.version);return new Tt(r,i)}return Ee("Unexpected DbRemoteDocument")},t.prototype.Zd=function(t,e){var n=this.Kd(e),r=t.key.path.L().j();if(t instanceof wt){var i=this.sf.bn(t),o=t.hasCommittedMutations;return new si(null,null,i,o,n,r)}if(t instanceof It){var s=t.key.path.j(),u=this.if(t.version),a=t.hasCommittedMutations;return new si(null,new ii(s,u),null,a,n,r)}if(t instanceof Tt){var c=t.key.path.j(),h=this.if(t.version);return new si(new oi(c,h),null,null,!0,n,r)}return Ee("Unexpected MaybeDocument")},t.prototype.Kd=function(t){var e=t.k();return[e.seconds,e.nanoseconds]},t.prototype.zd=function(t){var e=new I(t[0],t[1]);return T.v(e)},t.prototype.if=function(t){var e=t.k();return new Zr(e.seconds,e.nanoseconds)},t.prototype.nf=function(t){var e=new I(t.seconds,t.nanoseconds);return T.v(e)},t.prototype.Pd=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.sf.$n(t)})),i=e.mutations.map((function(t){return n.sf.$n(t)}));return new ni(t,e.batchId,e.Ri.toMillis(),r,i)},t.prototype.gd=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.sf.xn(t)})),r=t.mutations.map((function(t){return e.sf.xn(t)})),i=I.fromMillis(t.localWriteTimeMs);return new Ce(t.batchId,i,n,r)},t.prototype.$d=function(t){var e,n=this.nf(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.nf(t.lastLimboFreeSnapshotVersion):T.MIN;return e=void 0!==t.query.documents?this.sf.Kn(t.query):this.sf.Yn(t.query),new jt(e,t.targetId,0,t.lastListenSequenceNumber,n,r,L.fromBase64String(t.resumeToken))},t.prototype.Md=function(t){var e,n=this.if(t.ts),r=this.if(t.lastLimboFreeSnapshotVersion);e=t.target.Pe()?this.sf.jn(t.target):this.sf.Gn(t.target);var i=t.resumeToken.toBase64();return new ui(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),gi="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",bi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).yd=e,r.Ch=n,r}return o.__extends(e,t),e}(je),wi=function(){function t(e,n,r,i,o,s,u,a){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.$a=s,this.rf=a,this.hf=!1,this.isPrimary=!1,this.networkEnabled=!0,this.af=null,this.inForeground=!1,this.uf=null,this.cf=null,this._f=Number.NEGATIVE_INFINITY,this.lf=function(t){return Promise.resolve()},this.Jo=new Ei(this,o),this.df=n+t.ff,this.serializer=new mi(u),this.document=i.document,this.th=new jr(this.Jo,this.serializer),this.ur=new li,this.hr=new Kr(this.serializer,this.ur),!i.window||!i.window.localStorage)throw new d(l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.Tf=this.window.localStorage}return t.ed=function(t,e){if(t instanceof bi)return Nr.ed(t.yd,e);throw Ee("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.mf=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!t.Uc())throw new d(l.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.wf,e.$a,e.serializer,e.rf)).start()];case 1:return[2,(r.sent(),n)]}}))}))},t.prototype.start=function(){var t=this;return Nr.Yl(this.df,Qr,new $r(this.serializer)).then((function(e){return t.Ef=e,t.If()})).then((function(){return t.Rf(),t.Af(),t.Pf(),t.Ef.runTransaction("readonly",[hi.store],(function(t){return Br(t)}))})).then((function(e){t.Vf=new Be(e,t.rf)})).then((function(){t.hf=!0})).catch((function(e){return t.Ef&&t.Ef.close(),Promise.reject(e)}))},t.prototype.gf=function(t){var e=this;return this.lf=function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.ko?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.pf=function(t){var e=this;this.Ef.sd((function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Zh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.$a.qr((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.ko?[4,this.If()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.If=function(){var t=this;return this.Ef.runTransaction("readwrite",vi,(function(e){return Ti(e).put(new di(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.yf(e).next((function(e){e||(t.isPrimary=!1,t.$a.qr((function(){return t.lf(!1)})))}))})).next((function(){return t.bf(e)})).next((function(n){return t.isPrimary&&!n?t.vf(e).next((function(){return!1})):!!n&&t.Sf(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return we("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.$a.qr((function(){return t.lf(e)})),t.isPrimary=e}))},t.prototype.yf=function(t){var e=this;return Ii(t).get(ti.key).next((function(t){return Me.resolve(e.Df(t))}))},t.prototype.Cf=function(t){return Ti(t).delete(this.clientId)},t.prototype.kf=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.Nf(this._f,18e5)?[3,2]:(this._f=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(n){var r=t.ed(n,di.store);return r.ld().next((function(t){var n=e.Ff(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Me.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.$f(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.Pf=function(){var t=this;this.cf=this.$a.eo("client_metadata_refresh",4e3,(function(){return t.If().then((function(){return t.kf()})).then((function(){return t.Pf()}))}))},t.prototype.Df=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bf=function(t){var e=this;return Ii(t).get(ti.key).next((function(n){if(null!==n&&e.Nf(n.leaseTimestampMs,5e3)&&!e.Mf(n.ownerId)){if(e.Df(n)&&e.networkEnabled)return!0;if(!e.Df(n)){if(!n.allowTabSynchronization)throw new d(l.FAILED_PRECONDITION,gi);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ti(t).ld().next((function(t){return void 0===e.Ff(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&we("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.lc=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:return this.hf=!1,this.Lf(),this.cf&&(this.cf.cancel(),this.cf=null),this.Of(),this.xf(),[4,this.Ef.runTransaction("readwrite",[ti.store,di.store],(function(e){return t.vf(e).next((function(){return t.Cf(e)}))}))];case 1:return e.sent(),this.Ef.close(),this.Bf(),[2]}}))}))},t.prototype.Ff=function(t,e){var n=this;return t.filter((function(t){return n.Nf(t.updateTimeMs,e)&&!n.Mf(t.clientId)}))},t.prototype.Jh=function(){var t=this;return this.Ef.runTransaction("readonly",[di.store],(function(e){return Ti(e).ld().next((function(e){return t.Ff(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return t.Uc()?(n=e+t.ff,[4,Nr.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),t.prototype.Yo=function(t){return Pr.Id(t,this.serializer,this.ur,this.Jo)},t.prototype.eh=function(){return this.th},t.prototype.Zo=function(){return this.hr},t.prototype.nh=function(){return this.ur},t.prototype.runTransaction=function(t,e,n){var r=this;we("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Ef.runTransaction(o,vi,(function(o){return i=new bi(o,r.Vf.next()),"readwrite-primary"===e?r.yf(o).next((function(t){return!!t||r.bf(o)})).next((function(e){if(!e)throw Ie("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.$a.qr((function(){return r.lf(!1)})),new d(l.FAILED_PRECONDITION,Ve);return n(i)})).next((function(t){return r.Sf(o).next((function(){return t}))})):r.Uf(o).next((function(){return n(i)}))})).then((function(t){return i.or(),t}))},t.prototype.Uf=function(t){var e=this;return Ii(t).get(ti.key).next((function(t){if(null!==t&&e.Nf(t.leaseTimestampMs,5e3)&&!e.Mf(t.ownerId)&&!e.Df(t)&&!t.allowTabSynchronization)throw new d(l.FAILED_PRECONDITION,gi)}))},t.prototype.Sf=function(t){var e=new ti(this.clientId,this.allowTabSynchronization,Date.now());return Ii(t).put(ti.key,e)},t.Uc=function(){return Nr.Uc()},t.qf=function(t){var e=t.cn.projectId;return t.cn.wi||(e+="."+t.cn.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.vf=function(t){var e=this,n=Ii(t);return n.get(ti.key).next((function(t){return e.Df(t)?(we("IndexedDbPersistence","Releasing primary lease."),n.delete(ti.key)):Me.resolve()}))},t.prototype.Nf=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ie("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Rf=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.uf=function(){t.$a.qr((function(){return t.inForeground="visible"===t.document.visibilityState,t.If()}))},this.document.addEventListener("visibilitychange",this.uf),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Of=function(){this.uf&&(this.document.removeEventListener("visibilitychange",this.uf),this.uf=null)},t.prototype.Af=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.af=function(){t.Lf(),t.$a.qr((function(){return t.lc()}))},this.window.addEventListener("unload",this.af))},t.prototype.xf=function(){this.af&&(this.window.removeEventListener("unload",this.af),this.af=null)},t.prototype.Mf=function(t){try{var e=null!==this.Tf.getItem(this.$f(t));return we("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Ie("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Lf=function(){try{this.Tf.setItem(this.$f(this.clientId),String(Date.now()))}catch(t){Ie("Failed to set zombie client id.",t)}},t.prototype.Bf=function(){try{this.Tf.removeItem(this.$f(this.clientId))}catch(t){}},t.prototype.$f=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ii(t){return t.store(ti.store)}function Ti(t){return t.store(di.store)}wi.ff="main";var Ei=function(){function t(t,e){this.db=t,this.Qf=null,this.bo=new Qe(this,e)}return t.prototype.Mo=function(t){var e=this.Wf(t);return this.db.eh().Ld(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Wf=function(t){var e=0;return this.Oo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Xs=function(t,e){return this.db.eh().Xs(t,e)},t.prototype.Oo=function(t,e){return this.jf(t,(function(t,n){return e(n)}))},t.prototype.Ho=function(t){this.Qf=t},t.prototype.vi=function(t,e){return _i(t,e)},t.prototype.Di=function(t,e){return _i(t,e)},t.prototype.xo=function(t,e,n){return this.db.eh().xo(t,e,n)},t.prototype.bd=function(t,e){return _i(t,e)},t.prototype.Kf=function(t,e){return this.Qf.Mi(e)?Me.resolve(!0):function(t,e){var n=!1;return Vr(t).wd((function(r){return Lr(t,r,e).next((function(t){return t&&(n=!0),Me.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Bo=function(t,e){var n=this,r=this.db.Zo().wh(),i=[],o=0;return this.jf(t,(function(s,u){if(u<=e){var a=n.Kf(t,s).next((function(e){if(!e)return o++,r.tr(t,s).next((function(){return r.Zi(s),Gr(t).delete([0,Er(s.path)])}))}));i.push(a)}})).next((function(){return Me.Ki(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.es(t.Ch);return this.db.eh().Nh(t,n)},t.prototype.Fh=function(t,e){return _i(t,e)},t.prototype.jf=function(t,e){var n,r=Gr(t),i=Be.kr;return r.md({index:ci.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==Be.kr&&e(new A(Ar(n)),i),i=u,n=s):i=Be.kr})).next((function(){i!==Be.kr&&e(new A(Ar(n)),i)}))},t.prototype.qo=function(t){return this.db.Zo().Jd(t)},t}();function _i(t,e){return Gr(t).put(function(t,e){return new ci(0,Er(t.path),e)}(e,t.Ch))}var Ai=function(){function t(t,e){this.ur=t,this.Jo=e,this.ar=[],this.Gf=1,this.lastStreamToken=L.xt,this.zf=new O(xe.we)}return t.prototype.Rd=function(t){return Me.resolve(0===this.ar.length)},t.prototype.mh=function(t,e,n){var r=e.batchId,i=this.Hf(r,"acknowledged");return _e(0===i,"Can only acknowledge the first batch in the mutation queue"),this.ar[i],this.lastStreamToken=n,Me.resolve()},t.prototype.ph=function(t){return Me.resolve(this.lastStreamToken)},t.prototype.yh=function(t,e){return this.lastStreamToken=e,Me.resolve()},t.prototype.dh=function(t,e,n,r){var i=this.Gf;this.Gf++,this.ar.length>0&&this.ar[this.ar.length-1];var o=new Ce(i,e,n,r);this.ar.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.zf=this.zf.add(new xe(a.key,i)),this.ur.Vd(t,a.key.path.L())}return Me.resolve(o)},t.prototype.Ph=function(t,e){return Me.resolve(this.Jf(e))},t.prototype.Th=function(t,e){var n=this.Jf(e);return Me.resolve(n.keys())},t.prototype.xh=function(t,e){var n=e+1,r=this.Yf(n),i=r<0?0:r;return Me.resolve(this.ar.length>i?this.ar[i]:null)},t.prototype.gh=function(){return Me.resolve(0===this.ar.length?-1:this.Gf-1)},t.prototype.hh=function(t){return Me.resolve(this.ar.slice())},t.prototype._r=function(t,e){var n=this,r=new xe(e,0),i=new xe(e,Number.POSITIVE_INFINITY),o=[];return this.zf.Ct([r,i],(function(t){var e=n.Jf(t.Li);o.push(e)})),Me.resolve(o)},t.prototype.wr=function(t,e){var n=this,r=new O(Ne);return e.forEach((function(t){var e=new xe(t,0),i=new xe(t,Number.POSITIVE_INFINITY);n.zf.Ct([e,i],(function(t){r=r.add(t.Li)}))})),Me.resolve(this.Xf(r))},t.prototype.Vr=function(t,e){var n=e.path,r=n.length+1,i=n;A.st(i)||(i=i.child(""));var o=new xe(new A(i),0),s=new O(Ne);return this.zf.kt((function(t){var e=t.key.path;return!!n.q(e)&&(e.length===r&&(s=s.add(t.Li)),!0)}),o),Me.resolve(this.Xf(s))},t.prototype.Xf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Jf(t);null!==r&&n.push(r)})),n},t.prototype.Vh=function(t,e){var n=this;_e(0===this.Hf(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.ar.shift();var r=this.zf;return Me.forEach(e.mutations,(function(i){var o=new xe(i.key,e.batchId);return r=r.delete(o),n.Jo.bd(t,i.key)})).next((function(){n.zf=r}))},t.prototype.Xh=function(t){},t.prototype.Mi=function(t,e){var n=new xe(e,0),r=this.zf.Nt(n);return Me.resolve(e.isEqual(r&&r.key))},t.prototype.Rh=function(t){return this.ar.length,Me.resolve()},t.prototype.Hf=function(t,e){return this.Yf(t)},t.prototype.Yf=function(t){return 0===this.ar.length?0:t-this.ar[0].batchId},t.prototype.Jf=function(t){var e=this.Yf(t);return e<0||e>=this.ar.length?null:this.ar[e]},t}(),Ni=function(){function t(t,e){this.ur=t,this.Zf=e,this.docs=new N(A.F),this.size=0}return t.prototype.Yi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zf(e);return this.docs=this.docs.it(r,{Ud:e,size:s,readTime:n}),this.size+=s-o,this.ur.Vd(t,r.path.L())},t.prototype.Zi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.tr=function(t,e){var n=this.docs.get(e);return Me.resolve(n?n.Ud:null)},t.prototype.getEntries=function(t,e){var n=this,r=Wt();return e.forEach((function(t){var e=n.docs.get(t);r=r.it(t,e?e.Ud:null)})),Me.resolve(r)},t.prototype.Er=function(t,e,n){for(var r=Ht(),i=new A(e.path.child("")),o=this.docs.lt(i);o.It();){var s=o.Et(),u=s.key,a=s.value,c=a.Ud,h=a.readTime;if(!e.path.q(u.path))break;h.D(n)<=0||c instanceof wt&&e.matches(c)&&(r=r.it(c.key,c))}return Me.resolve(r)},t.prototype.tT=function(t,e){return Me.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ea=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.na=function(t){return Me.resolve(T.MIN)},t.prototype.wh=function(e){return new t.Hd(this)},t.prototype.Jd=function(t){return Me.resolve(this.size)},t}();Ni.Hd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Yd=e,n}return o.__extends(e,t),e.prototype.nr=function(t){var e=this,n=[];return this.zi.forEach((function(r,i){i?n.push(e.Yd.Yi(t,i,e.readTime)):e.Yd.Zi(r)})),Me.Ki(n)},e.prototype.er=function(t,e){return this.Yd.tr(t,e)},e.prototype.sr=function(t,e){return this.Yd.getEntries(t,e)},e}(Ue);var Si=function(){function t(t){this.persistence=t,this.eT=new Re((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=T.MIN,this.highestTargetId=0,this.sT=0,this.nT=new Le,this.targetCount=0,this.iT=fr.p_()}return t.prototype.Xs=function(t,e){return this.eT.forEach((function(t,n){return e(n)})),Me.resolve()},t.prototype.bh=function(t){return Me.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Dd=function(t){return Me.resolve(this.sT)},t.prototype.Qh=function(t){return this.highestTargetId=this.iT.next(),Me.resolve(this.highestTargetId)},t.prototype.$h=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.sT&&(this.sT=e),Me.resolve()},t.prototype.Cd=function(t){this.eT.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.iT=new fr(e),this.highestTargetId=e),t.sequenceNumber>this.sT&&(this.sT=t.sequenceNumber)},t.prototype.Wh=function(t,e){return this.Cd(e),this.targetCount+=1,Me.resolve()},t.prototype.Nh=function(t,e){return this.Cd(e),Me.resolve()},t.prototype.Nd=function(t,e){return this.eT.delete(e.target),this.nT.Ni(e.targetId),this.targetCount-=1,Me.resolve()},t.prototype.xo=function(t,e,n){var r=this,i=0,o=[];return this.eT.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.eT.delete(s),o.push(r.Fd(t,u.targetId)),i++)})),Me.Ki(o).next((function(){return i}))},t.prototype.Ld=function(t){return Me.resolve(this.targetCount)},t.prototype.qh=function(t,e){var n=this.eT.get(e)||null;return Me.resolve(n)},t.prototype.un=function(t,e){return Ee("Not yet implemented.")},t.prototype.Dh=function(t,e,n){this.nT.Si(e,n);var r=this.persistence.Jo,i=[];return r&&e.forEach((function(e){i.push(r.vi(t,e))})),Me.Ki(i)},t.prototype.Sh=function(t,e,n){this.nT.ki(e,n);var r=this.persistence.Jo,i=[];return r&&e.forEach((function(e){i.push(r.Di(t,e))})),Me.Ki(i)},t.prototype.Fd=function(t,e){return this.nT.Ni(e),Me.resolve()},t.prototype.Gh=function(t,e){var n=this.nT.$i(e);return Me.resolve(n)},t.prototype.Mi=function(t,e){return Me.resolve(this.nT.Mi(e))},t}(),ki=function(){function t(t,e){var n=this;this.clientId=t,this.rT={},this.Vf=new Be(0),this.hf=!1,this.hf=!0,this.Jo=e(this),this.th=new Si(this),this.ur=new Xr,this.hr=new Ni(this.ur,(function(t){return n.Jo.oT(t)}))}return t.prototype.lc=function(){return this.hf=!1,Promise.resolve()},Object.defineProperty(t.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),t.prototype.Jh=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.gf=function(t){return t(!0)},t.prototype.pf=function(){},t.prototype.Zh=function(t){},t.prototype.nh=function(){return this.ur},t.prototype.Yo=function(t){var e=this.rT[t.s()];return e||(e=new Ai(this.ur,this.Jo),this.rT[t.s()]=e),e},t.prototype.eh=function(){return this.th},t.prototype.Zo=function(){return this.hr},t.prototype.runTransaction=function(t,e,n){var r=this;we("MemoryPersistence","Starting transaction:",t);var i=new Oi(this.Vf.next());return this.Jo.hT(),n(i).next((function(t){return r.Jo.aT(i).next((function(){return t}))})).Wi().then((function(t){return i.or(),t}))},t.prototype.uT=function(t,e){return Me.Gi(Object.values(this.rT).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),Oi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ch=e,n}return o.__extends(e,t),e}(je),Di=function(){function t(t){this.persistence=t,this.Qf=null,this.cT=null}return t._T=function(e){return new t(e)},Object.defineProperty(t.prototype,"lT",{get:function(){if(this.cT)return this.cT;throw Ee("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.Ho=function(t){this.Qf=t},t.prototype.vi=function(t,e){return this.lT.delete(e),Me.resolve()},t.prototype.Di=function(t,e){return this.lT.add(e),Me.resolve()},t.prototype.bd=function(t,e){return this.lT.add(e),Me.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.eh();return r.Gh(t,e.targetId).next((function(t){t.forEach((function(t){return n.lT.add(t)}))})).next((function(){return r.Nd(t,e)}))},t.prototype.hT=function(){this.cT=new Set},t.prototype.aT=function(t){var e=this,n=this.persistence.Zo().wh();return Me.forEach(this.lT,(function(r){return e.dT(t,r).next((function(t){t||n.Zi(r)}))})).next((function(){return e.cT=null,n.apply(t)}))},t.prototype.Fh=function(t,e){var n=this;return this.dT(t,e).next((function(t){t?n.lT.delete(e):n.lT.add(e)}))},t.prototype.oT=function(t){return 0},t.prototype.dT=function(t,e){var n=this;return Me.Gi([function(){return n.persistence.eh().Mi(t,e)},function(){return n.persistence.uT(t,e)},function(){return Me.resolve(n.Qf.Mi(e))}])},t}(),Ri=function(){function t(){}return t.prototype.initialize=function(t,e,n,i,r,s,u,a){return o.__awaiter(this,void 0,void 0,(function(){var c,h,p,f,v=this;return o.__generator(this,(function(y){switch(y.label){case 0:if(c=wi.qf(e),h=n.fT(e.cn),!ur.Uc(n))throw new d(l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return this.X_=a.synchronizeTabs?new ur(t,n,c,r,s):new cr,this.X_.$u=function(t){return v.mc.B_(t,1)},p=this,[4,wi.mf({allowTabSynchronization:a.synchronizeTabs,persistenceKey:c,clientId:r,platform:n,$a:t,serializer:h,wf:Xe.Io(a.cacheSizeBytes),rf:this.X_})];case 1:return p.persistence=y.sent(),f=this.persistence.Jo.bo,this.TT=new Je(f,t),this.Wu=new $e(this.persistence,new Tr,s),this.W_=new Zn(this.Wu,i,t,(function(t){return v.mc.B_(t,0)}),n.mT()),this.mc=new mr(this.Wu,this.W_,this.X_,s,u),this.wT=new wr(this.mc),this.W_.mc=this.mc,this.X_.mc=this.mc,[4,this.X_.start()];case 2:return y.sent(),[4,this.W_.start()];case 3:return y.sent(),[4,this.Wu.start()];case 4:return y.sent(),[4,this.persistence.gf((function(t){return o.__awaiter(v,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.mc.Cc(t)];case 1:return e.sent(),t&&!this.TT.ko?this.TT.start(this.Wu):t||this.TT.stop(),[2]}}))}))}))];case 5:return y.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t){var e=wi.qf(t);return wi.clearPersistence(e)},t}(),Ci="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Pi=function(){function t(t){void 0===t&&(t=Di._T),this.ET=t}return t.prototype.initialize=function(t,e,n,i,r,s,u,a){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(o){switch(o.label){case 0:if(a.IT)throw new d(l.FAILED_PRECONDITION,Ci);return this.persistence=new ki(r,this.ET),this.TT=null,this.X_=new cr,this.Wu=new $e(this.persistence,new Tr,s),this.W_=new Zn(this.Wu,i,t,(function(t){return e.mc.B_(t,0)}),n.mT()),this.mc=new mr(this.Wu,this.W_,this.X_,s,u),this.wT=new wr(this.mc),this.W_.mc=this.mc,[4,this.W_.start()];case 1:return o.sent(),[4,this.W_.Cc(!0)];case 2:return o.sent(),[4,this.mc.Cc(!0)];case 3:return o.sent(),[2]}}))}))},t.prototype.clearPersistence=function(){throw new d(l.FAILED_PRECONDITION,Ci)},t}(),Li=function(){function t(t,e,n,r){this.platform=t,this.RT=e,this.credentials=n,this.Nr=r,this.clientId=Ae.mi()}return t.prototype.start=function(t,e){var n=this;this.AT();var r=new Ge,i=new Ge,o=!1;return this.credentials.l((function(s){if(!o)return o=!0,we("FirestoreClient","Initializing. user=",s.uid),n.PT(t,e,s,i).then(r.resolve,r.reject);n.Nr.qr((function(){return n.Dc(s)}))})),this.Nr.qr((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.AT(),this.Nr.enqueue((function(){return t.mc.enableNetwork()}))},t.prototype.PT=function(t,e,n,i){return o.__awaiter(this,void 0,void 0,(function(){var r,s,u,a,c=this;return o.__generator(this,(function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),[4,this.platform.VT(this.RT)];case 1:return r=h.sent(),s=this.platform.fT(this.RT.cn),u=new Jn(this.Nr,r,this.credentials,s),[4,t.initialize(this.Nr,this.RT,this.platform,u,this.clientId,n,100,e)];case 2:return h.sent(),this.persistence=t.persistence,this.X_=t.X_,this.Wu=t.Wu,this.W_=t.W_,this.mc=t.mc,this.TT=t.TT,this.gT=t.wT,this.persistence.pf((function(){return o.__awaiter(c,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(a=h.sent(),i.reject(a),!this.pT(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.PT(new Pi,{IT:!1},n,i))];case 4:return[2]}}))}))},t.prototype.pT=function(t){return"FirebaseError"===t.name?t.code===l.FAILED_PRECONDITION||t.code===l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.AT=function(){if(this.Nr.Hr)throw new d(l.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Dc=function(t){return this.Nr.no(),we("FirestoreClient","Credential Changed. Current user: "+t.uid),this.mc.Dc(t)},t.prototype.disableNetwork=function(){var t=this;return this.AT(),this.Nr.enqueue((function(){return t.mc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Nr.to((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.TT&&this.TT.stop(),[4,this.W_.lc()];case 1:return t.sent(),[4,this.X_.lc()];case 2:return t.sent(),[4,this.persistence.lc()];case 3:return t.sent(),this.credentials.T(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.AT();var e=new Ge;return this.Nr.qr((function(){return t.mc.Pl(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.AT();var i=new Ir(t,e,n);return this.Nr.qr((function(){return r.gT.listen(i)})),i},t.prototype.fc=function(t){var e=this;this.yT||this.Nr.qr((function(){return e.gT.fc(t)}))},t.prototype.bT=function(t){var e=this;return this.AT(),this.Nr.enqueue((function(){return e.Wu.Bh(t)})).then((function(t){if(t instanceof wt)return t;if(t instanceof It)return null;throw new d(l.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.vT=function(t){var e=this;return this.AT(),this.Nr.enqueue((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,i;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.Wu.Kh(t,!0)];case 1:return e=r.sent(),n=new pr(t,e.zh),i=n.k_(e.documents),[2,n.nr(i,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.AT();var n=new Ge;return this.Nr.qr((function(){return e.mc.write(t,n)})),n.promise},t.prototype.cn=function(){return this.RT.cn},t.prototype.Ol=function(t){var e=this;this.AT(),this.Nr.qr((function(){return e.gT.Ol(t),Promise.resolve()}))},t.prototype.xl=function(t){this.yT||this.gT.xl(t)},Object.defineProperty(t.prototype,"yT",{get:function(){return this.Nr.Hr},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.AT();var n=new Ge;return this.Nr.qr((function(){return e.mc.runTransaction(e.Nr,t,n),Promise.resolve()})),n.promise},t}(),xi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.ST(this.observer.next,t)},t.prototype.error=function(t){this.ST(this.observer.error,t)},t.prototype.DT=function(){this.muted=!0},t.prototype.ST=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Mi(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ui=function(){function t(t,e,n,r){this.firestore=t,this.timestampsInSnapshots=e,this.CT=n,this.converter=r}return t.prototype.kT=function(t){switch(B(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Y(t.integerValue||t.doubleValue);case 3:return this.NT(t.timestampValue);case 4:return this.FT(t);case 5:return t.stringValue;case 6:return new Tn(X(t.bytesValue));case 7:return this.$T(t.referenceValue);case 8:return new Pn(t.geoPointValue.latitude,t.geoPointValue.longitude);case 9:return this.MT(t.arrayValue);case 10:return this.LT(t.mapValue);default:throw Ee("Invalid value type: "+JSON.stringify(t))}},t.prototype.LT=function(t){var e=this,n={};return C(t.fields||{},(function(t,r){n[t]=e.kT(r)})),n},t.prototype.MT=function(t){var e=this;return(t.values||[]).map((function(t){return e.kT(t)}))},t.prototype.FT=function(t){switch(this.CT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return V(n)?t(n):n}(t);return null==e?null:this.kT(e);case"estimate":return this.NT(j(t));default:return null}},t.prototype.NT=function(t){var e=H(t),n=new I(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.$T=function(t){var e=E.G(t);_e(ve(e),"ReferenceValue is not valid "+t);var n=new De(e.get(1),e.get(3)),r=new A(e.M(5));return n.isEqual(this.firestore.OT)||Ie("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.OT.projectId+"/"+this.firestore.OT.database+") instead."),new Gi(r,this.firestore,this.converter)},t}(),Vi=Xe.Po,ji=function(){function t(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new d(l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else an("settings","non-empty string","host",t.host),this.host=t.host,un("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(dn("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),un("settings","object","credentials",t.credentials),this.credentials=t.credentials,un("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Ie("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Ie("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,un("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Xe.po;else{if(t.cacheSizeBytes!==Vi&&t.cacheSizeBytes<Xe.Vo)throw new d(l.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Xe.Vo);this.cacheSizeBytes=t.cacheSizeBytes}un("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Fi=function(){function t(e,n,i){var r=this;if(void 0===i&&(i=new Pi),this.xT=null,this.BT=new We,this.INTERNAL={delete:function(){return o.__awaiter(r,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.UT(),[4,this.qT.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.xT=s,this.OT=t.QT(s),this.WT=s.name,this.jT=new p(n)}else{var u=e;if(!u.projectId)throw new d(l.INVALID_ARGUMENT,"Must provide projectId");this.OT=new De(u.projectId,u.database),this.WT="[DEFAULT]",this.jT=new y}this.KT=i,this.GT=new ji({}),this.zT=this.HT(this.OT)}return t.prototype.settings=function(t){en("Firestore.settings",arguments,1),on("Firestore.settings","object",1,t);var e=new ji(t);if(this.qT&&!this.GT.isEqual(e))throw new d(l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.GT=e,void 0!==e.credentials&&(this.jT=function(t){if(!t)return new y;switch(t.type){case"gapi":var e=t.JT;return _e(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new w(e,t.V||"0");case"provider":return t.JT;default:throw new d(l.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.UT(),this.qT.enableNetwork()},t.prototype.disableNetwork=function(){return this.UT(),this.qT.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.qT)throw new d(l.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Ie("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n),this.YT(this.KT,{IT:!0,cacheSizeBytes:this.GT.cacheSizeBytes,synchronizeTabs:r})},t.prototype.clearPersistence=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){if(void 0!==this.qT&&!this.qT.yT)throw new d(l.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new Ge,[2,(this.BT.Jr((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.XT(),[4,this.KT.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"ZT",{get:function(){return this.UT(),this.qT.yT},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.UT(),this.qT.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.UT(),Mi(t))return this.tm(t);on("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.tm(e)},t.prototype.tm=function(t){var e=this,n=new xi({next:function(){t.next&&t.next()},error:function(t){throw Ee("Uncaught Error in onSnapshotsInSync")}});return this.qT.Ol(n),function(){n.DT(),e.qT.xl(n)}},t.prototype.UT=function(){return this.qT||this.YT(new Pi,{IT:!1}),this.qT},t.prototype.XT=function(){return new Oe(this.OT,this.WT,this.GT.host,this.GT.ssl,this.GT.forceLongPolling)},t.prototype.YT=function(t,e){var n=this.XT();return this.qT=new Li(ye.Lt(),n,this.jT,this.BT),this.qT.start(t,e)},t.prototype.HT=function(t){var e=new de(t,{dn:ye.Lt().dn});return new Fn(e,(function(e){if(e instanceof Gi){var n=t,r=e.firestore.OT;if(!r.isEqual(n))throw new d(l.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new jn(t,e.em)}return e}))},t.QT=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new d(l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new d(l.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new De(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.xT)throw new d(l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.xT},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return en("Firestore.collection",arguments,1),on("Firestore.collection","non-empty string",1,t),this.UT(),new Xi(E.G(t),this)},t.prototype.doc=function(t){return en("Firestore.doc",arguments,1),on("Firestore.doc","non-empty string",1,t),this.UT(),Gi.sm(E.G(t),this)},t.prototype.collectionGroup=function(t){if(en("Firestore.collectionGroup",arguments,1),on("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new d(l.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.UT(),new Hi(new _t(E.H,t),this)},t.prototype.runTransaction=function(t){var e=this;return en("Firestore.runTransaction",arguments,1),on("Firestore.runTransaction","function",1,t),this.UT().transaction((function(n){return t(new qi(e,n))}))},t.prototype.batch=function(){return this.UT(),new Bi(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(ge()){case h.LogLevel.DEBUG:return"debug";case h.LogLevel.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(en("Firestore.setLogLevel",arguments,1),on("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":be(h.LogLevel.DEBUG);break;case"error":be(h.LogLevel.ERROR);break;case"silent":be(h.LogLevel.SILENT);break;default:throw new d(l.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.nm=function(){return this.GT.timestampsInSnapshots},t}(),qi=function(){function t(t,e){this.im=t,this.rm=e}return t.prototype.get=function(t){var e=this;en("Transaction.get",arguments,1);var n=Zi("Transaction.get",t,this.im);return this.rm.pu([n.em]).then((function(t){if(!t||1!==t.length)return Ee("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof It)return new Wi(e.im,n.em,null,!1,!1,n.om);if(r instanceof wt)return new Wi(e.im,n.em,r,!1,!1,n.om);throw Ee("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){rn("Transaction.set",arguments,2,3);var r=Zi("Transaction.set",t,this.im);n=Ji("Transaction.set",n);var i=eo(r.om,e,"Transaction.set"),o=i[0],s=i[1],u=n.merge||n.mergeFields?this.im.zT.pa(s,o,n.mergeFields):this.im.zT.Va(s,o);return this.rm.set(r.em,u),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof _n?(nn("Transaction.update",arguments,3),r=Zi("Transaction.update",t,this.im),i=this.im.zT.Sa("Transaction.update",e,n,o)):(en("Transaction.update",arguments,2),r=Zi("Transaction.update",t,this.im),i=this.im.zT.ya("Transaction.update",e)),this.rm.update(r.em,i),this},t.prototype.delete=function(t){en("Transaction.delete",arguments,1);var e=Zi("Transaction.delete",t,this.im);return this.rm.delete(e.em),this},t}(),Bi=function(){function t(t){this.im=t,this.hm=[],this.am=!1}return t.prototype.set=function(t,e,n){rn("WriteBatch.set",arguments,2,3),this.um();var r=Zi("WriteBatch.set",t,this.im);n=Ji("WriteBatch.set",n);var i=eo(r.om,e,"WriteBatch.set"),o=i[0],s=i[1],u=n.merge||n.mergeFields?this.im.zT.pa(s,o,n.mergeFields):this.im.zT.Va(s,o);return this.hm=this.hm.concat(u.da(r.em,ht.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.um(),"string"==typeof e||e instanceof _n?(nn("WriteBatch.update",arguments,3),r=Zi("WriteBatch.update",t,this.im),i=this.im.zT.Sa("WriteBatch.update",e,n,o)):(en("WriteBatch.update",arguments,2),r=Zi("WriteBatch.update",t,this.im),i=this.im.zT.ya("WriteBatch.update",e)),this.hm=this.hm.concat(i.da(r.em,ht.exists(!0))),this},t.prototype.delete=function(t){en("WriteBatch.delete",arguments,1),this.um();var e=Zi("WriteBatch.delete",t,this.im);return this.hm=this.hm.concat(new yt(e.em,ht.NONE)),this},t.prototype.commit=function(){return this.um(),this.am=!0,this.hm.length>0?this.im.UT().write(this.hm):Promise.resolve()},t.prototype.um=function(){if(this.am)throw new d(l.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Gi=function(){function t(t,e,n){this.em=t,this.firestore=e,this.om=n,this.qT=this.firestore.UT()}return t.sm=function(e,n,r){if(e.length%2!=0)throw new d(l.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.K()+" has "+e.length);return new t(new A(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.em.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Xi(this.em.path.L(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.em.path.K()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(en("DocumentReference.collection",arguments,1),on("DocumentReference.collection","non-empty string",1,t),!t)throw new d(l.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=E.G(t);return new Xi(this.em.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw vn("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.em.isEqual(e.em)&&this.om===e.om},t.prototype.set=function(t,e){rn("DocumentReference.set",arguments,1,2),e=Ji("DocumentReference.set",e);var n=eo(this.om,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.zT.pa(i,r,e.mergeFields):this.firestore.zT.Va(i,r);return this.qT.write(o.da(this.em,ht.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof _n?(nn("DocumentReference.update",arguments,2),n=this.firestore.zT.Sa("DocumentReference.update",t,e,r)):(en("DocumentReference.update",arguments,1),n=this.firestore.zT.ya("DocumentReference.update",t)),this.qT.write(n.da(this.em,ht.exists(!0)))},t.prototype.delete=function(){return en("DocumentReference.delete",arguments,0),this.qT.write([new yt(this.em,ht.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];rn("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Mi(t[i])||(dn("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),un("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Mi(t[i])?n=t[i]:(on("DocumentReference.onSnapshot","function",i,t[i]),sn("DocumentReference.onSnapshot","function",i+1,t[i+1]),sn("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.cm(o,n)},t.prototype.cm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new xi({next:function(t){if(e.next){var r=t.docs.get(n.em);e.next(new Wi(n.firestore,n.em,r,t.fromCache,t.hasPendingWrites,n.om))}},error:r}),o=this.qT.listen(_t.ve(this.em.path),i,t);return function(){i.DT(),n.qT.fc(o)}},t.prototype.get=function(t){var e=this;return rn("DocumentReference.get",arguments,0,1),$i("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.UT().bT(e.em).then((function(t){n(new Wi(e.firestore,e.em,t,!0,t instanceof wt&&t.te,e.om))}),r):e._m(n,r,t)}))},t.prototype._m=function(t,e,n){var r=this.cm({includeMetadataChanges:!0,Kl:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new d(l.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new d(l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this.em,this.firestore,e)},t}(),Ki=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Wi=function(){function t(t,e,n,r,i,o){this.im=t,this.em=e,this.lm=n,this.dm=r,this.fm=i,this.om=o}return t.prototype.data=function(t){if(rn("DocumentSnapshot.data",arguments,0,1),t=Qi("DocumentSnapshot.data",t),this.lm){if(this.om){var e=new zi(this.im,this.em,this.lm,this.dm,this.fm);return this.om.fromFirestore(e,t)}return new Ui(this.im,this.im.nm(),t.serverTimestamps,void 0).kT(this.lm.Ie())}},t.prototype.get=function(t,e){if(rn("DocumentSnapshot.get",arguments,1,2),e=Qi("DocumentSnapshot.get",e),this.lm){var n=this.lm.data().field(Gn("DocumentSnapshot.get",t));if(null!==n)return new Ui(this.im,this.im.nm(),e.serverTimestamps,this.om).kT(n)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.em.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Gi(this.em,this.im,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.lm},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Ki(this.fm,this.dm)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw vn("isEqual","DocumentSnapshot",1,e);return this.im===e.im&&this.dm===e.dm&&this.em.isEqual(e.em)&&(null===this.lm?null===e.lm:this.lm.isEqual(e.lm))&&this.om===e.om},t}(),zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Wi),Hi=function(){function t(t,e,n){this.Tm=t,this.firestore=e,this.om=n}return t.prototype.where=function(e,n,r){var i;en("Query.where",arguments,3),pn("Query.where",3,r),function(t,e,n,r){if(!e.some((function(t){return t===r})))throw new d(l.INVALID_ARGUMENT,"Invalid value "+ln(r)+" provided to function Query.where() for its "+mn(2)+" argument. Acceptable values: "+e.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,n);var o=Gn("Query.where",e),s=At.G(n);if(o.Y()){if(s===At.ARRAY_CONTAINS||s===At.ARRAY_CONTAINS_ANY)throw new d(l.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===At.IN){this.mm(r,s);for(var u=[],a=0,c=r;a<c.length;a++){var h=c[a];u.push(this.wm(h))}i={arrayValue:{values:u}}}else i=this.wm(r)}else s!==At.IN&&s!==At.ARRAY_CONTAINS_ANY||this.mm(r,s),i=this.firestore.zT.Da("Query.where",r,s===At.IN);var p=Nt.create(o,s,i);return this.Em(p),new t(this.Tm.Ce(p),this.firestore,this.om)},t.prototype.orderBy=function(e,n){var r;if(rn("Query.orderBy",arguments,1,2),sn("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Ct.ASCENDING;else{if("desc"!==n)throw new d(l.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Ct.DESCENDING}if(null!==this.Tm.startAt)throw new d(l.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.Tm.endAt)throw new d(l.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Gn("Query.orderBy",e),o=new Mt(i,r);return this.Im(o),new t(this.Tm.ke(o),this.firestore,this.om)},t.prototype.limit=function(e){return en("Query.limit",arguments,1),on("Query.limit","number",1,e),yn("Query.limit",1,e),new t(this.Tm.Ne(e),this.firestore,this.om)},t.prototype.limitToLast=function(e){return en("Query.limitToLast",arguments,1),on("Query.limitToLast","number",1,e),yn("Query.limitToLast",1,e),new t(this.Tm.Fe(e),this.firestore,this.om)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];nn("Query.startAt",arguments,1);var i=this.Rm("Query.startAt",e,n,!0);return new t(this.Tm.$e(i),this.firestore,this.om)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];nn("Query.startAfter",arguments,1);var i=this.Rm("Query.startAfter",e,n,!1);return new t(this.Tm.$e(i),this.firestore,this.om)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];nn("Query.endBefore",arguments,1);var i=this.Rm("Query.endBefore",e,n,!0);return new t(this.Tm.Me(i),this.firestore,this.om)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];nn("Query.endAt",arguments,1);var i=this.Rm("Query.endAt",e,n,!1);return new t(this.Tm.Me(i),this.firestore,this.om)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw vn("isEqual","Query",1,e);return this.firestore===e.firestore&&this.Tm.isEqual(e.Tm)},t.prototype.withConverter=function(e){return new t(this.Tm,this.firestore,e)},t.prototype.Rm=function(t,e,n,r){if(pn(t,1,e),e instanceof Wi){if(n.length>0)throw new d(l.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new d(l.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Am(i.lm,r)}var o=[e].concat(n);return this.Pm(t,o,r)},t.prototype.Am=function(t,e){for(var n=[],r=0,i=this.Tm.orderBy;r<i.length;r++){var o=i[r];if(o.field.Y())n.push(J(this.firestore.OT,t.key));else{var s=t.field(o.field);if(V(s))throw new d(l.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=o.field.K();throw new d(l.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}n.push(s)}}return new xt(n,e)},t.prototype.Pm=function(t,e,n){var r=this.Tm.Ve;if(e.length>r.length)throw new d(l.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.Y()){if("string"!=typeof s)throw new d(l.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.Tm.He()&&-1!==s.indexOf("/"))throw new d(l.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var u=this.Tm.path.child(E.G(s));if(!A.st(u))throw new d(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+u+"' is not because it contains an odd number of segments.");var a=new A(u);i.push(J(this.firestore.OT,a))}else{var c=this.firestore.zT.Da(t,s);i.push(c)}}return new xt(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];rn("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Mi(t[i])||(dn("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),un("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Mi(t[i])?n=t[i]:(on("Query.onSnapshot","function",i,t[i]),sn("Query.onSnapshot","function",i+1,t[i+1]),sn("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Vm(this.Tm),this.cm(r,n)},t.prototype.cm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new xi({next:function(t){e.next&&e.next(new Yi(n.firestore,n.Tm,t,n.om))},error:r}),o=this.firestore.UT(),s=o.listen(this.Tm,i,t);return function(){i.DT(),o.fc(s)}},t.prototype.Vm=function(t){if(t.Ke()&&0===t.Ve.length)throw new d(l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return rn("Query.get",arguments,0,1),$i("Query.get",t),this.Vm(this.Tm),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.UT().vT(e.Tm).then((function(t){n(new Yi(e.firestore,e.Tm,t,e.om))}),r):e._m(n,r,t)}))},t.prototype._m=function(t,e,n){var r=this.cm({includeMetadataChanges:!0,Kl:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new d(l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.wm=function(t){if("string"==typeof t){if(""===t)throw new d(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.Tm.He()&&-1!==t.indexOf("/"))throw new d(l.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.Tm.path.child(E.G(t));if(!A.st(e))throw new d(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return J(this.firestore.OT,new A(e))}if(t instanceof Gi){var n=t;return J(this.firestore.OT,n.em)}throw new d(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ln(t)+".")},t.prototype.mm=function(t,e){if(!Array.isArray(t)||0===t.length)throw new d(l.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new d(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new d(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new d(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Em=function(t){if(t instanceof Nt){var e=[At.ARRAY_CONTAINS,At.ARRAY_CONTAINS_ANY],n=[At.IN,At.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.Ge()){var o=this.Tm.Se();if(null!==o&&!o.isEqual(t.field))throw new d(l.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.Tm.De();null!==s&&this.gm(t.field,s)}else if(i||r){var u=null;if(i&&(u=this.Tm.ze(n)),null===u&&r&&(u=this.Tm.ze(e)),null!=u)throw u===t.op?new d(l.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new d(l.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+u.toString()+"' filters.")}}},t.prototype.Im=function(t){if(null===this.Tm.De()){var e=this.Tm.Se();null!==e&&this.gm(e,t.field)}},t.prototype.gm=function(t,e){if(!e.isEqual(t))throw new d(l.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Yi=function(){function t(t,e,n,r){this.im=t,this.pm=e,this.ym=n,this.om=r,this.bm=null,this.vm=null,this.metadata=new Ki(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.ym.docs.U()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ym.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;rn("QuerySnapshot.forEach",arguments,1,2),on("QuerySnapshot.forEach","function",1,t),this.ym.docs.forEach((function(r){t.call(e,n.Sm(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Hi(this.pm,this.im,this.om)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(dn("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),un("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.ym.ds)throw new d(l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.bm&&this.vm===e||(this.bm=function(t,e,n,r){if(n.cs.U()){var i=0;return n.docChanges.map((function(e){var o=new zi(t,e.doc.key,e.doc,n.fromCache,n._s.has(e.doc.key),r);return e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.cs;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new zi(t,e.doc.key,e.doc,n.fromCache,n._s.has(e.doc.key),r),s=-1,u=-1;return 0!==e.type&&(s=o.indexOf(e.doc.key),o=o.delete(e.doc.key)),1!==e.type&&(u=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:to(e.type),doc:i,oldIndex:s,newIndex:u}}))}(this.im,e,this.ym,this.om),this.vm=e),this.bm},t.prototype.isEqual=function(e){if(!(e instanceof t))throw vn("isEqual","QuerySnapshot",1,e);return this.im===e.im&&this.pm.isEqual(e.pm)&&this.ym.isEqual(e.ym)&&this.om===e.om},t.prototype.Sm=function(t){return new zi(this.im,t.key,t,this.metadata.fromCache,this.ym._s.has(t.key),this.om)},t}(),Xi=function(t){function e(e,n,r){var i=this;if((i=t.call(this,_t.ve(e),n,r)||this).Dm=e,e.length%2!=1)throw new d(l.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.K()+" has "+e.length);return i}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Tm.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Tm.path.L();return t.U()?null:new Gi(new A(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Tm.path.K()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(rn("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Ae.mi()),on("CollectionReference.doc","non-empty string",1,t),""===t)throw new d(l.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=E.G(t);return Gi.sm(this.Tm.path.child(e),this.firestore,this.om)},e.prototype.add=function(t){en("CollectionReference.add",arguments,1),on("CollectionReference.add","object",1,this.om?this.om.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.Dm,this.firestore,t)},e}(Hi);function Ji(t,e){if(void 0===e)return{merge:!1};if(dn(t,e,["merge","mergeFields"]),un(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new d(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+ln(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new d(l.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+ln(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof _n}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new d(l.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Qi(t,e){return void 0===e?{}:(dn(t,e,["serverTimestamps"]),cn(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function $i(t,e){sn(t,"object",1,e),e&&(dn(t,e,["source"]),cn(t,0,"source",e.source,["default","server","cache"]))}function Zi(t,e,n){if(e instanceof Gi){if(e.firestore!==n)throw new d(l.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw vn(t,"DocumentReference",1,e)}function to(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee("Unknown change type: "+t)}}function eo(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var no=bn(Fi,"Use firebase.firestore() instead."),ro=bn(qi,"Use firebase.firestore().runTransaction() instead."),io=bn(Bi,"Use firebase.firestore().batch() instead."),oo=bn(Gi,"Use firebase.firestore().doc() instead."),so=bn(Wi),ao=bn(zi),uo=bn(Hi),co=bn(Yi),ho=bn(Xi,"Use firebase.firestore().collection() instead."),fo={Firestore:no,GeoPoint:Pn,Timestamp:I,Blob:En,Transaction:ro,WriteBatch:io,DocumentReference:oo,DocumentSnapshot:so,Query:uo,QueryDocumentSnapshot:ao,QuerySnapshot:co,CollectionReference:ho,FieldPath:_n,FieldValue:Cn,setLogLevel:Fi.setLogLevel,CACHE_SIZE_UNLIMITED:Vi},lo=function(){function t(){}return t.prototype.Hu=function(t){},t.prototype.lc=function(){},t}(),po=function(){function t(){var t=this;this.Cm=function(){return t.km()},this.Nm=function(){return t.Fm()},this.$m=[],this.Mm()}return t.prototype.Hu=function(t){this.$m.push(t)},t.prototype.lc=function(){window.removeEventListener("online",this.Cm),window.removeEventListener("offline",this.Nm)},t.prototype.Mm=function(){window.addEventListener("online",this.Cm),window.addEventListener("offline",this.Nm)},t.prototype.km=function(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.$m;t<e.length;t++)(0,e[t])(0)},t.prototype.Fm=function(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.$m;t<e.length;t++)(0,e[t])(1)},t.Uc=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),vo=function(){function t(t){this.Lm=t.Lm,this.Om=t.Om}return t.prototype._u=function(t){this.xm=t},t.prototype.ou=function(t){this.Bm=t},t.prototype.onMessage=function(t){this.Um=t},t.prototype.close=function(){this.Om()},t.prototype.send=function(t){this.Lm(t)},t.prototype.qm=function(){this.xm()},t.prototype.Qm=function(t){this.Bm(t)},t.prototype.Wm=function(t){this.Um(t)},t}(),yo={BatchGetDocuments:"batchGet",Commit:"commit"},mo="gl-js/ fire/"+u,go=function(){function t(t){this.cn=t.cn;var e=t.ssl?"https":"http";this.jm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Km=function(t,e){if(e)for(var n in e.h)e.h.hasOwnProperty(n)&&(t[n]=e.h[n]);t["X-Goog-Api-Client"]=mo},t.prototype.gu=function(t,e,n){var r=this,i=this.Gm(t);return new Promise((function(o,u){var a=new s.XhrIo;a.listenOnce(s.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var e=a.getResponseJson();we("Connection","XHR received:",JSON.stringify(e)),o(e);break;case s.ErrorCode.TIMEOUT:we("Connection",'RPC "'+t+'" timed out'),u(new d(l.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(we("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(l).indexOf(e)>=0?e:l.UNKNOWN}(r.status);u(new d(i,r.message))}else u(new d(l.UNKNOWN,"Server responded with status "+a.getStatus()))}else we("Connection",'RPC "'+t+'" failed'),u(new d(l.UNAVAILABLE,"Connection failed."));break;default:Ee('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{we("Connection",'RPC "'+t+'" completed.')}}));var c=Object.assign({},e);delete c.database;var h=JSON.stringify(c);we("Connection","XHR sending: ",i+" "+h);var p={"Content-Type":"text/plain"};r.Km(p,n),a.send(i,"POST",h,p,15)}))},t.prototype.yu=function(t,e,n){return this.gu(t,e,n)},t.prototype.lu=function(t,e){var n=[this.jm,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=s.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.cn.projectId+"/databases/"+this.cn.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Km(o.initMessageHeaders,e),i.isMobileCordova()||i.isReactNative()||i.isElectron()||i.isIE()||i.isUWP()||i.isBrowserExtension()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");we("Connection","Creating WebChannel: "+u+" "+o);var a=r.createWebChannel(u,o),c=!1,h=!1,p=new vo({Lm:function(t){h?we("Connection","Not sending because WebChannel is closed:",t):(c||(we("Connection","Opening WebChannel transport."),a.open(),c=!0),we("Connection","WebChannel sending:",t),a.send(t))},Om:function(){return a.close()}}),f=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(s.WebChannel.EventType.OPEN,(function(){h||we("Connection","WebChannel transport opened.")})),f(s.WebChannel.EventType.CLOSE,(function(){h||(h=!0,we("Connection","WebChannel transport closed"),p.Qm())})),f(s.WebChannel.EventType.ERROR,(function(t){h||(h=!0,we("Connection","WebChannel transport errored:",t),p.Qm(new d(l.UNAVAILABLE,"The operation could not be completed")))})),f(s.WebChannel.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];_e(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){we("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Pt[t];if(void 0!==e)return Bt(e)}(o),u=i.message;void 0===s&&(s=l.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,p.Qm(new d(s,u)),a.close()}else we("Connection","WebChannel received:",n),p.Wm(n)}})),setTimeout((function(){p.qm()}),0),p},t.prototype.Gm=function(t){var e=yo[t];return this.jm+"/v1/projects/"+this.cn.projectId+"/databases/"+this.cn.database+"/documents:"+e},t}();function bo(t){!function(t,e){t.INTERNAL.registerComponent(new f.Component("firestore",(function(t){return function(t,e){return new Fi(t,e,new Ri)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},fo)))}(t),t.registerVersion("@firebase/firestore","1.14.0")}ye.fi(new(function(){function t(){this.dn=!0,this.ia="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.VT=function(t){return Promise.resolve(new go(t))},t.prototype.mT=function(){return po.Uc()?new po:new lo},t.prototype.fT=function(t){return new de(t,{dn:!0})},t.prototype.Ti=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}())),bo(c),e.__PRIVATE_registerFirestore=bo},171:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return dr})),n.d(e,"EventType",(function(){return vr})),n.d(e,"WebChannel",(function(){return yr})),n.d(e,"XhrIo",(function(){return mr})),n.d(e,"createWebChannelTransport",(function(){return pr}));var g,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=o||{},c=r;function h(a){return"string"==typeof a}function f(a){return"number"==typeof a}function l(a,b){a=a.split("."),b=b||c;for(var t=0;t<a.length;t++)if(null==(b=b[a[t]]))return null;return b}function d(){}function p(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function q(a){return"array"==p(a)}function v(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),w=0;function I(a,b,t){return a.call.apply(a.bind,arguments)}function T(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function u(a,b,t){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I:T).apply(null,arguments)}function E(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var _=Date.now||function(){return+new Date};function A(a,b){function t(){}t.prototype=b.prototype,a.N=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.yb=function(t,e,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[e].apply(t,r)}}function N(){this.j=this.j,this.i=this.i}N.prototype.j=!1,N.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++w)},N.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(h(a))return h(b)&&1==b.length?a.indexOf(b,0):-1;for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},k=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n=h(a)?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function O(a){return Array.prototype.concat.apply([],arguments)}function D(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function R(a){return/^[\s\xa0]*$/.test(a)}var C,P=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function L(a,b){return-1!=a.indexOf(b)}function x(a,b){return a<b?-1:a>b?1:0}t:{var M=c.navigator;if(M){var U=M.userAgent;if(U){C=U;break t}}C=""}function V(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function j(a){var t,b={};for(t in a)b[t]=a[t];return b}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<F.length;r++)t=F[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function G(a){return G[" "](a),a}G[" "]=d;var K,a,W=L(C,"Opera"),z=L(C,"Trident")||L(C,"MSIE"),H=L(C,"Edge"),Y=H||z,X=L(C,"Gecko")&&!(L(C.toLowerCase(),"webkit")&&!L(C,"Edge"))&&!(L(C,"Trident")||L(C,"MSIE"))&&!L(C,"Edge"),J=L(C.toLowerCase(),"webkit")&&!L(C,"Edge");function Q(){var a=c.document;return a?a.documentMode:void 0}t:{var $="",Z=(a=C,X?/rv:([^\);]+)(\)|;)/.exec(a):H?/Edge\/([\d\.]+)/.exec(a):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):J?/WebKit\/(\S+)/.exec(a):W?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Z&&($=Z?Z[1]:""),z){var tt=Q();if(null!=tt&&tt>parseFloat($)){K=String(tt);break t}}K=$}var et,nt={};function it(a){return function(a,b){var t=nt;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=P(String(K)).split("."),e=P(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var o=t[r]||"",c=e[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=x(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||x(0==o[2].length,0==c[2].length)||x(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b}))}var ot=c.document;et=ot&&z?Q()||("CSS1Compat"==ot.compatMode?parseInt(K,10):5):void 0;var st=!z||9<=Number(et),at=z&&!it("9"),ut=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",d,b),c.removeEventListener("test",d,b)}catch(t){}return a}();function ct(a,b){this.type=a,this.a=this.target=b,this.Ia=!0}function ht(a,b){if(ct.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(X){t:{try{G(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=h(a.pointerType)?a.pointerType:ft[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ct.prototype.b=function(){this.Ia=!1},A(ht,ct);var ft={2:"touch",3:"pen",4:"mouse"};ht.prototype.b=function(){ht.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,at)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}};var lt="closure_listenable_"+(1e6*Math.random()|0),pt=0;function vt(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.da=n,this.key=++pt,this.X=this.Z=!1}function yt(a){a.X=!0,a.listener=null,a.proxy=null,a.src=null,a.da=null}function mt(a){this.src=a,this.a={},this.b=0}function gt(a,b){var t=b.type;if(t in a.a){var e,n=a.a[t],r=S(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(yt(b),0==a.a[t].length&&(delete a.a[t],a.b--))}}function bt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.X&&r.listener==b&&r.capture==!!t&&r.da==e)return n}return-1}mt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=bt(a,b,e,n);return-1<o?(b=a[o],t||(b.Z=!1)):((b=new vt(b,this.src,r,!!e,n)).Z=t,a.push(b)),b};var wt="closure_lm_"+(1e6*Math.random()|0),It={};function Tt(a,b,t,e,n){if(e&&e.once)return function t(a,b,e,n,r){if(q(b)){for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);return null}return e=Dt(e),a&&a[lt]?a.Aa(b,e,y(n)?!!n.capture:!!n,r):Et(a,b,e,!0,n,r)}(a,b,t,e,n);if(q(b)){for(var r=0;r<b.length;r++)Tt(a,b[r],t,e,n);return null}return t=Dt(t),a&&a[lt]?a.za(b,t,y(e)?!!e.capture:!!e,n):Et(a,b,t,!1,e,n)}function Et(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var o=y(n)?!!n.capture:!!n;if(o&&!st)return null;var c=kt(a);if(c||(a[wt]=c=new mt(a)),(t=c.add(b,t,e,o,r)).proxy)return t;if(e=function(){var a=St,b=st?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)ut||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(At(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function _t(a){if(!f(a)&&a&&!a.X){var b=a.src;if(b&&b[lt])gt(b.c,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(At(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=kt(b))?(gt(t,a),0==t.b&&(t.src=null,b[wt]=null)):yt(a)}}}function At(a){return a in It?It[a]:It[a]="on"+a}function Nt(a,b){var t=a.listener,e=a.da||a.src;return a.Z&&_t(a),t.call(e,b)}function St(a,b){return!!a.X||(st?Nt(a,new ht(b,this)):Nt(a,b=new ht(b||l("window.event"),this)))}function kt(a){return(a=a[wt])instanceof mt?a:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(a){return"function"==p(a)?a:(a[Ot]||(a[Ot]=function(b){return a.handleEvent(b)}),a[Ot])}function Rt(){N.call(this),this.c=new mt(this),this.J=this,this.B=null}function Ct(a,b,t,e){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.X&&o.capture==t){var c=o.listener,h=o.da||o.src;o.Z&&gt(a.c,o),n=!1!==c.call(h,e)&&n}}return n&&0!=e.Ia}A(Rt,N),Rt.prototype[lt]=!0,(g=Rt.prototype).addEventListener=function(a,b,t,e){Tt(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){!function t(a,b,e,n,r){if(q(b))for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);else n=y(n)?!!n.capture:!!n,e=Dt(e),a&&a[lt]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(e=bt(o=a.a[b],e,n,r))&&(yt(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=kt(a))&&(b=a.a[b.toString()],a=-1,b&&(a=bt(b,e,n,r)),(e=-1<a?b[a]:null)&&_t(e))}(this,a,b,t,e)},g.dispatchEvent=function(a){var b,t=this.B;if(t)for(b=[];t;t=t.B)b.push(t);t=this.J;var e=a.type||a;if(h(a))a=new ct(a,t);else if(a instanceof ct)a.target=a.target||t;else{var n=a;B(a=new ct(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=Ct(o,e,!0,a)&&n}if(n=Ct(o=a.a=t,e,!0,a)&&n,n=Ct(o,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Ct(o=a.a=b[r],e,!1,a)&&n;return n},g.G=function(){if(Rt.N.G.call(this),this.c){var t,a=this.c;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)yt(e[n]);delete a.a[t],a.b--}}this.B=null},g.za=function(a,b,t,e){return this.c.add(String(a),b,!1,t,e)},g.Aa=function(a,b,t,e){return this.c.add(String(a),b,!0,t,e)};var Pt=c.JSON.stringify;function Lt(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function xt(){this.b=this.a=null}Lt.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Mt,Ut=new Lt((function(){return new jt}),(function(a){a.reset()}));function Vt(){var a=Gt,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function jt(){this.next=this.b=this.a=null}function Ft(a){c.setTimeout((function(){throw a}),0)}function qt(a,b){Mt||function(){var a=c.Promise.resolve(void 0);Mt=function(){a.then(Kt)}}(),Bt||(Mt(),Bt=!0),Gt.add(a,b)}xt.prototype.add=function(a,b){var t=Ut.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},jt.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},jt.prototype.reset=function(){this.next=this.b=this.a=null};var Bt=!1,Gt=new xt;function Kt(){for(var a;a=Vt();){try{a.a.call(a.b)}catch(t){Ft(t)}var b=Ut;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}Bt=!1}function Wt(a,b){Rt.call(this),this.b=a||1,this.a=b||c,this.f=u(this.gb,this),this.g=_()}function zt(a){a.ba=!1,a.L&&(a.a.clearTimeout(a.L),a.L=null)}function Ht(a,b,t){if("function"==p(a))t&&(a=u(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=u(a.handleEvent,a)}return 2147483647<Number(b)?-1:c.setTimeout(a,b||0)}function Yt(a,b,t){N.call(this),this.f=null!=t?u(a,t):a,this.c=b,this.b=u(this.$a,this),this.a=[]}function Xt(a){a.U=Ht(a.b,a.c),a.f.apply(null,a.a)}function Jt(a){N.call(this),this.b=a,this.a={}}A(Wt,Rt),(g=Wt.prototype).ba=!1,g.L=null,g.gb=function(){if(this.ba){var a=_()-this.g;0<a&&a<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-a):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(zt(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},g.G=function(){Wt.N.G.call(this),zt(this),delete this.a},A(Yt,N),(g=Yt.prototype).ea=!1,g.U=null,g.Ta=function(a){this.a=arguments,this.U?this.ea=!0:Xt(this)},g.G=function(){Yt.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.$a=function(){this.U=null,this.ea&&(this.ea=!1,Xt(this))},A(Jt,N);var Qt=[];function $t(a,b,t,e){q(t)||(t&&(Qt[0]=t.toString()),t=Qt);for(var n=0;n<t.length;n++){var r=Tt(b,t[n],e||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Zt(a){V(a.a,(function(b,t){this.a.hasOwnProperty(t)&&_t(b)}),a),a.a={}}function te(){}Jt.prototype.G=function(){Jt.N.G.call(this),Zt(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ee=new Rt;function ne(a){ct.call(this,"serverreachability",a)}function re(a){ee.dispatchEvent(new ne(ee,a))}function ie(a){ct.call(this,"statevent",a)}function oe(a){ee.dispatchEvent(new ie(ee,a))}function se(a){ct.call(this,"timingevent",a)}function ae(a,b){if("function"!=p(a))throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){a()}),b)}A(ne,ct),A(ie,ct),A(se,ct);var ue={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},ce={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function he(){}function fe(a){var b;return(b=a.a)||(b=a.a={}),b}function le(){}he.prototype.a=null;var pe,de={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ve(){ct.call(this,"d")}function ye(){ct.call(this,"c")}function me(){}function ge(a,b,t){this.g=a,this.W=b,this.V=t||1,this.I=new Jt(this),this.O=be,a=Y?125:void 0,this.P=new Wt(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}A(ve,ct),A(ye,ct),A(me,he),pe=new me;var be=45e3,we={},Ie={};function Te(a,b,t){a.F=1,a.f=He(Fe(b)),a.l=t,a.H=!0,_e(a,null)}function Ee(a,b,t,e){a.F=1,a.f=He(Fe(b)),a.l=null,a.H=t,_e(a,e)}function _e(a,b){a.v=_(),Se(a),a.D=Fe(a.f),ze(a.D,"t",a.V),a.A=0,a.a=a.g.$(a.g.Y()?b:null),0<a.J&&(a.B=new Yt(u(a.Ja,a,a.a),a.J)),$t(a.I,a.a,"readystatechange",a.cb),b=a.h?j(a.h):{},a.l?(a.w||(a.w="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ca(a.D,a.w,a.l,b)):(a.w="GET",a.a.ca(a.D,a.w,null,b)),re(1)}function Ae(a,b,t){for(var e=!0;!a.m&&a.A<t.length;){var n=Ne(a,t);if(n==Ie){4==b&&(a.c=4,oe(14),e=!1);break}if(n==we){a.c=4,oe(15),e=!1;break}Ce(a,n)}4==b&&0==t.length&&(a.c=1,oe(16),e=!1),a.b=a.b&&e,e||(Re(a),De(a))}function Ne(a,b){var t=a.A,e=b.indexOf("\n",t);return-1==e?Ie:(t=Number(b.substring(t,e)),isNaN(t)?we:(e+=1)+t>b.length?Ie:(b=b.substr(e,t),a.A=e+t,b))}function Se(a){a.R=_()+a.O,ke(a,a.O)}function ke(a,b){if(null!=a.i)throw Error("WatchDog timer not null");a.i=ae(u(a.ab,a),b)}function Oe(a){a.i&&(c.clearTimeout(a.i),a.i=null)}function De(a){a.g.Ca()||a.m||a.g.na(a)}function Re(a){Oe(a);var b=a.B;b&&"function"==typeof b.la&&b.la(),a.B=null,zt(a.P),Zt(a.I),a.a&&(b=a.a,a.a=null,b.abort(),b.la())}function Ce(a,b){try{a.g.Fa(a,b),re(4)}catch(t){}}function Pe(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(v(a)||h(a))k(a,b,void 0);else{if(a.K&&"function"==typeof a.K)var t=a.K();else if(a.C&&"function"==typeof a.C)t=void 0;else if(v(a)||h(a)){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;n=(e=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(h(a))return a.split("");if(v(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function Le(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Le)for(t=a.K(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function xe(a,b){Ue(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Me(a))}function Me(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Ue(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Ue(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Ue(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=ge.prototype).setTimeout=function(a){this.O=a},g.cb=function(a){a=a.target;var b=this.B;b&&3==Vn(a)?b.Ta():this.Ja(a)},g.Ja=function(a){try{if(a==this.a)t:{var b=Vn(this.a),t=this.a.ya(),e=this.a.T();if(!(3>b||3==b&&!Y&&!this.a.aa())){this.m||4!=b||7==t||re(8==t||0>=e?3:2),Oe(this);var n=this.a.T();this.o=n;var r=this.a.aa();if(this.b=200==n){if(this.S&&!this.s){e:{if(this.a){var o=jn(this.a,"X-HTTP-Initial-Response");if(o&&!R(o)){var c=o;break e}}c=null}if(!c){this.b=!1,this.c=3,oe(12),Re(this),De(this);break t}this.s=!0,Ce(this,c)}this.H?(Ae(this,b,r),Y&&this.b&&3==b&&($t(this.I,this.P,"tick",this.bb),this.P.start())):Ce(this,r),4==b&&Re(this),this.b&&!this.m&&(4==b?this.g.na(this):(this.b=!1,Se(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.c=3,oe(12)):(this.c=0,oe(13)),Re(this),De(this)}}}catch(t){}},g.bb=function(){if(this.a){var a=Vn(this.a),b=this.a.aa();this.A<b.length&&(Oe(this),Ae(this,a,b),this.b&&4!=a&&Se(this))}},g.cancel=function(){this.m=!0,Re(this)},g.ab=function(){this.i=null;var a=_();0<=a-this.R?(2!=this.F&&(re(3),oe(17)),Re(this),this.c=2,De(this)):ke(this,this.R-a)},(g=Le.prototype).C=function(){Me(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.K=function(){return Me(this),this.a.concat()},g.get=function(a,b){return Ue(this.b,a)?this.b[a]:b},g.set=function(a,b){Ue(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var t=this.K(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Ve=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function je(a,b){var t;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof je?(this.h=void 0!==b?b:a.h,qe(this,a.f),this.j=a.j,Be(this,a.b),Ge(this,a.i),this.a=a.a,Ke(this,un(a.c)),this.g=a.g):a&&(t=String(a).match(Ve))?(this.h=!!b,qe(this,t[1]||"",!0),this.j=Ye(t[2]||""),Be(this,t[3]||"",!0),Ge(this,t[4]),this.a=Ye(t[5]||"",!0),Ke(this,t[6]||"",!0),this.g=Ye(t[7]||"")):(this.h=!!b,this.c=new nn(null,this.h))}function Fe(a){return new je(a)}function qe(a,b,t){a.f=t?Ye(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Be(a,b,t){a.b=t?Ye(b,!0):b}function Ge(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function Ke(a,b,t){b instanceof nn?(a.c=b,function(a,b){b&&!a.f&&(rn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(on(this,e),an(this,n,t))}),a)),a.f=b}(a.c,a.h)):(t||(b=Xe(b,tn)),a.c=new nn(b,a.h))}function We(a,b,t){a.c.set(b,t)}function ze(a,b,t){q(t)||(t=[String(t)]),an(a.c,b,t)}function He(a){return We(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),a}function Ye(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xe(a,b,t){return h(a)?(a=encodeURI(a).replace(b,Je),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Je(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}je.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Xe(b,Qe,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(Xe(b,Qe,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.i)&&a.push(":",String(t))),(t=this.a)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Xe(t,"/"==t.charAt(0)?Ze:$e,!0))),(t=this.c.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Xe(t,en)),a.join("")},je.prototype.resolve=function(a){var b=Fe(this),t=!!a.f;t?qe(b,a.f):t=!!a.j,t?b.j=a.j:t=!!a.b,t?Be(b,a.b):t=null!=a.i;var e=a.a;if(t)Ge(b,a.i);else if(t=!!a.a){if("/"!=e.charAt(0))if(this.b&&!this.a)e="/"+e;else{var n=b.a.lastIndexOf("/");-1!=n&&(e=b.a.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(L(n,"./")||L(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],o=0;o<n.length;){var c=n[o++];"."==c?e&&o==n.length&&r.push(""):".."==c?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&o==n.length&&r.push("")):(r.push(c),e=!0)}e=r.join("/")}else e=n}return t?b.a=e:t=""!==a.c.toString(),t?Ke(b,un(a.c)):t=!!a.g,t&&(b.g=a.g),b};var Qe=/[#\/\?@]/g,$e=/[#\?:]/g,Ze=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function rn(a){a.a||(a.a=new Le,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function on(a,b){rn(a),b=cn(a,b),Ue(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,xe(a.a,b))}function sn(a,b){return rn(a),b=cn(a,b),Ue(a.a.b,b)}function an(a,b,t){on(a,b),0<t.length&&(a.c=null,a.a.set(cn(a,b),D(t)),a.b+=t.length)}function un(a){var b=new nn;return b.c=a.c,a.a&&(b.a=new Le(a.a),b.b=a.b),b}function cn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function hn(a){this.a=a,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function fn(a){var b=a.a.F.a;if(null!=b)oe(4),b?(oe(10),Qn(a.a,a,!1)):(oe(11),Qn(a.a,a,!0));else{a.b=new ge(a,void 0,void 0),a.b.h=a.h,b=rr(b=a.a,b.Y()?a.f:null,a.i),oe(4),ze(b,"TYPE","xmlhttp");var t=a.a.j,e=a.a.I;t&&e&&We(b,t,e),Ee(a.b,b,!1,a.f)}}function ln(){this.a=this.b=null}function pn(){this.a=new Le}function dn(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[m]||(a[m]=++w)):b.charAt(0)+a}function vn(a,b){this.b=a,this.a=b}function yn(a){this.g=a||mn,c.PerformanceNavigationTiming?a=0<(a=c.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(c.ka&&c.ka.Da&&c.ka.Da()&&c.ka.Da().zb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new pn),this.b=null,this.c=[]}(g=nn.prototype).add=function(a,b){rn(this),this.c=null,a=cn(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},g.forEach=function(a,b){rn(this),this.a.forEach((function(t,e){k(t,(function(t){a.call(b,t,e,this)}),this)}),this)},g.K=function(){rn(this);for(var a=this.a.C(),b=this.a.K(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},g.C=function(a){rn(this);var b=[];if(h(a))sn(this,a)&&(b=O(b,this.a.get(cn(this,a))));else{a=this.a.C();for(var t=0;t<a.length;t++)b=O(b,a[t])}return b},g.set=function(a,b){return rn(this),this.c=null,sn(this,a=cn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.C(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.K(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.C(e);for(var r=0;r<e.length;r++){var o=n;""!==e[r]&&(o+="="+encodeURIComponent(String(e[r]))),a.push(o)}}return this.c=a.join("&")},A((function(){}),(function(){})),(g=hn.prototype).M=null,g.$=function(a){return this.a.$(a)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Ca=function(){return!1},g.Fa=function(a,b){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var t=jn(a,"X-Client-Wire-Protocol");this.l=t||null,this.a.j&&(a=jn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(b){try{var e=this.a.ja.a.parse(b)}catch(t){return(b=this.a).m=this.c,void er(b,2)}this.f=e[0]}else(b=this.a).m=this.c,er(b,2)}else 1==this.M&&(this.g?oe(6):"11111"==b?(oe(5),this.g=!0,(!z||10<=Number(et))&&(this.c=200,this.b.cancel(),oe(11),Qn(this.a,this,!0))):(oe(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,fn(this)):1==this.M&&(this.g?(oe(11),Qn(this.a,this,!0)):(oe(10),Qn(this.a,this,!1)));else{0==this.M?oe(8):1==this.M&&oe(9);var a=this.a;a.m=this.c,er(a,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},pn.prototype.add=function(a){this.a.set(dn(a),a)},pn.prototype.C=function(){return this.a.C()};var mn=10;function gn(a,b){!a.a&&(L(b,"spdy")||L(b,"quic")||L(b,"h2"))&&(a.f=a.g,a.a=new pn,a.b&&(dd(a,a.b),a.b=null))}function bn(a){return!!a.b||!!a.a&&a.a.a.c>=a.f}function wn(a){return a.b?1:a.a?a.a.a.c:0}function In(a,b){return a.b?a=a.b==b:a.a?(b=dn(b),a=Ue(a.a.a.b,b)):a=!1,a}function dd(a,b){a.a?a.a.add(b):a.b=b}function Tn(a,b){var t;a.b&&a.b==b?a.b=null:((t=a.a)&&(t=dn(b),t=Ue(a.a.a.b,t)),t&&xe(a.a.a,dn(b)))}function En(a){if(null!=a.b)return a.c.concat(a.b.j);if(null!=a.a&&0!=a.a.a.c){var b=a.c;return k(a.a.C(),(function(t){b=b.concat(t.j)})),b}return D(a.c)}function _n(){}function An(){this.a=new _n}function Nn(a,b,t){var e=t||"";try{Pe(a,(function(t,n){var r=t;y(t)&&(r=Pt(t)),b.push(e+n+"="+encodeURIComponent(r))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function Sn(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}yn.prototype.cancel=function(){this.c=En(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(k(this.a.C(),(function(a){a.cancel()})),function(a){a.b={},a.a.length=0,a.c=0}(this.a.a))},_n.prototype.stringify=function(a){return c.JSON.stringify(a,void 0)},_n.prototype.parse=function(a){return c.JSON.parse(a,void 0)};var kn=c.JSON.parse;function On(a){Rt.call(this),this.headers=new Le,this.H=a||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Dn,this.D=this.F=!1}A(On,Rt);var Dn="",Rn=/^https?$/i,Cn=["POST","PUT"];function Pn(a){return"content-type"==a.toLowerCase()}function Ln(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,xn(a),Un(a)}function xn(a){a.v||(a.v=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Mn(a){if(a.b&&void 0!==o&&(!a.s[1]||4!=Vn(a)||2!=a.T()))if(a.l&&4==Vn(a))Ht(a.Ea,0,a);else if(a.dispatchEvent("readystatechange"),4==Vn(a)){a.b=!1;try{var t,b=a.T();t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.A).match(Ve)[1]||null;if(!r&&c.self&&c.self.location){var h=c.self.location.protocol;r=h.substr(0,h.length-1)}n=!Rn.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.h=6;try{var f=2<Vn(a)?a.a.statusText:""}catch(t){f=""}a.f=f+" ["+a.T()+"]",xn(a)}}finally{Un(a)}}}function Un(a,b){if(a.a){td(a);var t=a.a,e=a.s[0]?d:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){}}}function td(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(c.clearTimeout(a.m),a.m=null)}function Vn(a){return a.a?a.a.readyState:0}function jn(a,b){return a.a?a.a.getResponseHeader(b):null}function Fn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}if(e)return a;if(t=function(a){var b="";return V(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),h(a)){if(b=encodeURIComponent(String(b)),b+=t=null!=t?"="+encodeURIComponent(String(t)):""){if(0>(t=a.indexOf("#"))&&(t=a.length),0>(e=a.indexOf("?"))||e>t){e=t;var n=""}else n=a.substring(e+1,t);t=(a=[a.substr(0,e),n,a.substr(t)])[1],a[1]=b?t?t+"&"+b:b:t,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return We(a,b,t),a}function qn(a){this.f=[],this.F=new ln,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!l("internalChannelParams.failFast",a),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=l("internalChannelParams.baseRetryDelayMs",a)||5e3,this.Ra=l("internalChannelParams.retryDelaySeedMs",a)||1e4,this.Pa=l("internalChannelParams.forwardChannelMaxRetries",a)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",a)||2e4,this.Ka=a&&a.Ab||void 0,this.D=void 0,this.R=a&&a.supportsCrossDomainXhr||!1,this.H="",this.b=new yn(a&&a.concurrentRequestLimit),this.ja=new An,this.o=!a||void 0===a.backgroundChannelTest||a.backgroundChannelTest,(this.W=a&&a.fastHandshake||!1)&&!this.o&&(this.o=!0),a&&a.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Bn(a){if(Gn(a),3==a.u){var b=a.P++,t=Fe(a.B);We(t,"SID",a.H),We(t,"RID",b),We(t,"TYPE","terminate"),Hn(a,t),(b=new ge(a,b,void 0)).F=2,b.f=He(Fe(t)),t=!1,c.navigator&&c.navigator.sendBeacon&&(t=c.navigator.sendBeacon(b.f.toString(),"")),!t&&c.Image&&((new Image).src=b.f,t=!0),t||(b.a=b.g.$(null),b.a.ca(b.f)),b.v=_(),Se(b)}nr(a)}function Gn(a){a.w&&(a.w.abort(),a.w=null),a.a&&(a.a.cancel(),a.a=null),a.l&&(c.clearTimeout(a.l),a.l=null),$n(a),a.b.cancel(),a.h&&(f(a.h)&&c.clearTimeout(a.h),a.h=null)}function Kn(a,b){a.f.push(new vn(a.Qa++,b)),3==a.u&&Wn(a)}function Wn(a){bn(a.b)||a.h||(a.h=!0,qt(a.Ha,a),a.A=0)}function zn(a,b){var t;t=b?b.W:a.P++;var e=Fe(a.B);We(e,"SID",a.H),We(e,"RID",t),We(e,"AID",a.O),Hn(a,e),a.g&&a.i&&Fn(e,a.g,a.i),t=new ge(a,t,a.A+1),null===a.g&&(t.h=a.i),b&&(a.f=b.j.concat(a.f)),b=Yn(a,t,1e3),t.setTimeout(Math.round(.5*a.qa)+Math.round(.5*a.qa*Math.random())),dd(a.b,t),Te(t,e,b)}function Hn(a,b){a.c&&Pe({},(function(t,e){We(b,e,t)}))}function Yn(a,b,t){t=Math.min(a.f.length,t);var e=a.c?u(a.c.Sa,a.c,a):null;t:for(var n=a.f,r=-1;;){var o=["count="+t];-1==r?0<t?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,h=0;h<t;h++){var f=n[h].b,l=n[h].a;if(0>(f-=r))r=Math.max(0,n[h].b-100),c=!1;else try{Nn(l,o,"req"+f+"_")}catch(t){e&&e(l)}}if(c){e=o.join("&");break t}}return a=a.f.splice(0,t),b.j=a,e}function Xn(a){a.a||a.l||(a.S=1,qt(a.Ga,a),a.v=0)}function Jn(a){return!(a.a||a.l||3<=a.v)&&(a.S++,a.l=ae(u(a.Ga,a),Zn(a,a.v)),a.v++,!0)}function Qn(a,b,t){var e=b.l;e&&gn(a.b,e),a.ia=a.oa&&t,a.m=b.c,a.B=rr(a,null,a.ha),Wn(a)}function $n(a){null!=a.s&&(c.clearTimeout(a.s),a.s=null)}function Zn(a,b){var t=a.Na+Math.floor(Math.random()*a.Ra);return a.ma()||(t*=2),t*b}function er(a,b){if(2==b){var t=null;a.c&&(t=null);var e=u(a.eb,a);t||(t=new je("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||qe(t,"https"),He(t)),function(a,b){var t=new te;if(c.Image){var e=new Image;e.onload=E(Sn,t,e,"TestLoadImage: loaded",!0,b),e.onerror=E(Sn,t,e,"TestLoadImage: error",!1,b),e.onabort=E(Sn,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=E(Sn,t,e,"TestLoadImage: timeout",!1,b),c.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else oe(2);a.u=0,a.c&&a.c.ta(b),nr(a),Gn(a)}function nr(a){a.u=0,a.m=-1,a.c&&(0==En(a.b).length&&0==a.f.length||(a.b.c.length=0,D(a.f),a.f.length=0),a.c.sa())}function rr(a,b,t){var e=function(a){return a instanceof je?Fe(a):new je(a,void 0)}(t);if(""!=e.b)b&&Be(e,b+"."+e.b),Ge(e,e.i);else{var n,r=c.location;n=b?b+"."+r.hostname:r.hostname,e=function(a,b,t,e){var n=new je(null,void 0);return a&&qe(n,a),b&&Be(n,b),t&&Ge(n,t),e&&(n.a=e),n}(r.protocol,n,+r.port,t)}return a.V&&V(a.V,(function(t,n){We(e,n,t)})),b=a.j,t=a.I,b&&t&&We(e,b,t),We(e,"VER",a.wa),Hn(a,e),e}function ir(){}function or(){if(z&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function sr(a,b){Rt.call(this),this.a=new qn(b),this.g=a,this.m=b&&b.fb?b.fb:function(a){for(var b=arguments[0],t=1;t<arguments.length;t++){var e,n=arguments[t];if(0==n.lastIndexOf("/",0))b=n;else(e=""==b)||(e=0<=(e=b.length-1)&&b.indexOf("/",e)==e),b+=e?n:"/"+n}return b}(this.g,"test"),this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.i=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.xa&&(a?a["X-WebChannel-Client-Profile"]=b.xa:a={"X-WebChannel-Client-Profile":b.xa}),this.a.J=a,(a=b&&b.httpHeadersOverwriteParam)&&!R(a)&&(this.a.g=a),this.l=b&&b.supportsCrossDomainXhr||!1,this.h=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!R(b)&&(this.a.j=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new cr(this)}function ar(a){ve.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function ur(){ye.call(this),this.status=1}function cr(a){this.a=a}(g=On.prototype).ca=function(a,b,t,e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);b=b?b.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fe(this.H):fe(pe),this.a.onreadystatechange=u(this.Ea,this);try{this.w=!0,this.a.open(b,String(a),!0),this.w=!1}catch(t){return void Ln(this,t)}a=t||"";var n=new Le(this.headers);e&&Pe(e,(function(t,e){n.set(e,t)})),e=function(a){t:{for(var b=Pn,t=a.length,e=h(a)?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:h(a)?a.charAt(b):a[b]}(n.K()),t=c.FormData&&a instanceof c.FormData,!(0<=S(Cn,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{td(this),0<this.o&&((this.D=function(a){return z&&it(9)&&f(a.timeout)&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=u(this.Ba,this)):this.m=Ht(this.Ba,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(t){Ln(this,t)}},g.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Un(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Un(this,!0)),On.N.G.call(this)},g.Ea=function(){this.j||(this.w||this.l||this.g?Mn(this):this.Za())},g.Za=function(){Mn(this)},g.T=function(){try{return 2<Vn(this)?this.a.status:-1}catch(t){return-1}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Ua=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),kn(b)}},g.ya=function(){return this.h},g.Xa=function(){return h(this.f)?this.f:String(this.f)},(g=qn.prototype).wa=8,g.u=1,g.Ca=function(){return 0==this.u},g.Ha=function(a){if(this.h)if(this.h=null,1==this.u){if(!a){this.P=Math.floor(1e5*Math.random());var t,b=new ge(this,a=this.P++,void 0),e=this.i;if(this.J&&(e?B(e=j(e),this.J):e=this.J),null===this.g&&(b.h=e),this.W)t:{for(var n=t=0;n<this.f.length;n++){var r=this.f[n];if(void 0===(r="__data__"in r.a&&h(r=r.a.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break t}if(4096===t||n===this.f.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Yn(this,b,t),We(n=Fe(this.B),"RID",a),We(n,"CVER",22),this.o&&this.j&&We(n,"X-HTTP-Session-Id",this.j),Hn(this,n),this.g&&e&&Fn(n,this.g,e),dd(this.b,b),this.W?(We(n,"$req",t),We(n,"SID","null"),b.S=!0,Te(b,n,null)):Te(b,n,t),this.u=2}}else 3==this.u&&(a?zn(this,a):0==this.f.length||bn(this.b)||zn(this))},g.Ga=function(){this.l=null,this.a=new ge(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var a=Fe(this.pa);We(a,"RID","rpc"),We(a,"SID",this.H),We(a,"CI",this.ia?"0":"1"),We(a,"AID",this.O),Hn(this,a),We(a,"TYPE","xmlhttp"),this.g&&this.i&&Fn(a,this.g,this.i),this.D&&this.a.setTimeout(this.D),Ee(this.a,a,!0,this.ga)},g.Fa=function(a,b){if(0!=this.u&&(this.a==a||In(this.b,a)))if(this.m=a.o,!a.s&&In(this.b,a)&&3==this.u){try{var t=this.ja.a.parse(b)}catch(e){t=null}if(q(t)&&3==t.length){if(0==(b=t)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break t;$n(this),this.a.cancel(),this.a=null}Jn(this),oe(18)}}else this.ra=b[1],0<this.ra-this.O&&37500>b[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ae(u(this.Ya,this),6e3));if(1>=wn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else er(this,11)}else if((a.s||this.a==a)&&$n(this),!R(b))for(b=t=this.ja.a.parse(b),t=0;t<b.length;t++){var e=b[t];if(this.O=e[0],e=e[1],2==this.u)if("c"==e[0]){this.H=e[1],this.ga=e[2];var n=e[3];null!=n&&(this.wa=n),null!=(e=e[5])&&f(e)&&0<e&&(this.D=1.5*e),this.o&&(e=a.a)&&((n=jn(e,"X-Client-Wire-Protocol"))&&gn(this.b,n),this.j&&(e=jn(e,"X-HTTP-Session-Id")))&&(this.I=e,We(this.B,this.j,e)),this.u=3,this.c&&this.c.va(),e=a,this.pa=rr(this,this.Y()?this.ga:null,this.ha),e.s?(Tn(this.b,e),(n=this.D)&&e.setTimeout(n),e.i&&(Oe(e),Se(e)),this.a=e):Xn(this),0<this.f.length&&Wn(this)}else"stop"!=e[0]&&"close"!=e[0]||er(this,7);else 3==this.u&&("stop"==e[0]||"close"==e[0]?"stop"==e[0]?er(this,7):Bn(this):"noop"!=e[0]&&this.c&&this.c.ua(e),this.v=0)}},g.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Jn(this),oe(19))},g.na=function(a){var b=null;if(this.a==a){$n(this),this.a=null;var t=2}else{if(!In(this.b,a))return;b=a.j,Tn(this.b,a),t=1}if(this.m=a.o,0!=this.u)if(a.b)1==t?(b=_()-a.v,ee.dispatchEvent(new se(ee,a.l?a.l.length:0,b,this.A)),Wn(this)):Xn(this);else{var e=a.c;if(3==e||0==e&&0<this.m||!(1==t&&function(a,b){return!(wn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.f=b.j.concat(a.f),!0):!(1==a.u||2==a.u||a.A>=(a.Oa?0:a.Pa))&&(a.h=ae(u(a.Ha,a,b),Zn(a,a.A)),a.A++,!0))}(this,a)||2==t&&Jn(this)))switch(b&&0<b.length&&(a=this.b,a.c=a.c.concat(b)),e){case 1:er(this,5);break;case 4:er(this,10);break;case 3:er(this,6);break;default:er(this,2)}}},g.eb=function(a){oe(a?2:1)},g.$=function(a){if(a&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(a=new On(this.Ka)).F=this.R,a},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=ir.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Sa=function(){},or.prototype.a=function(a,b){return new sr(a,b)},A(sr,Rt),(g=sr.prototype).addEventListener=function(a,b,t,e){sr.N.addEventListener.call(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){sr.N.removeEventListener.call(this,a,b,t,e)},g.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,b=this.m,t=this.g,e=this.b||void 0;oe(0),a.ha=t,a.V=e||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new hn(a),null===a.g&&(a.w.h=a.i),t=b,a.g&&a.i&&(t=Fn(b,a.g,a.i)),(a=a.w).i=t,b=rr(a.a,null,a.i),oe(3),null!=(t=a.a.F.b)?(a.f=t[0],a.M=1,fn(a)):(ze(b,"MODE","init"),!a.a.o&&a.a.j&&ze(b,"X-HTTP-Session-Id",a.a.j),a.b=new ge(a,void 0,void 0),a.b.h=a.h,Ee(a.b,b,!1,null),a.M=0)},g.close=function(){Bn(this.a)},g.Wa=function(a){if(h(a)){var b={};b.__data__=a,Kn(this.a,b)}else this.h?((b={}).__data__=Pt(a),Kn(this.a,b)):Kn(this.a,a)},g.G=function(){this.a.c=null,delete this.f,Bn(this.a),delete this.a,sr.N.G.call(this)},A(ar,ve),A(ur,ye),A(cr,ir),cr.prototype.va=function(){this.a.dispatchEvent("a")},cr.prototype.ua=function(a){this.a.dispatchEvent(new ar(a))},cr.prototype.ta=function(a){this.a.dispatchEvent(new ur(a))},cr.prototype.sa=function(){this.a.dispatchEvent("b")};var fr=E((function(a,b){function t(){}t.prototype=a.prototype;var e=new t;return a.apply(e,Array.prototype.slice.call(arguments,1)),e}),or);or.prototype.createWebChannel=or.prototype.a,sr.prototype.send=sr.prototype.Wa,sr.prototype.open=sr.prototype.Va,sr.prototype.close=sr.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",le.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Rt.prototype.listen=Rt.prototype.za,On.prototype.listenOnce=On.prototype.Aa,On.prototype.getLastError=On.prototype.Xa,On.prototype.getLastErrorCode=On.prototype.ya,On.prototype.getStatus=On.prototype.T,On.prototype.getResponseJson=On.prototype.Ua,On.prototype.getResponseText=On.prototype.aa,On.prototype.send=On.prototype.ca;var lr={createWebChannelTransport:fr,ErrorCode:ue,EventType:ce,WebChannel:le,XhrIo:On},pr=lr.createWebChannelTransport,dr=lr.ErrorCode,vr=lr.EventType,yr=lr.WebChannel,mr=lr.XhrIo;e.default=lr}.call(this,n(17))},176:function(t,e){function n(t,e,n,r,o,c,h){try{var f=t[c](h),l=f.value}catch(t){return void n(t)}f.done?e(l):Promise.resolve(l).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,c){var h=t.apply(e,r);function f(t){n(h,o,c,f,l,"next",t)}function l(t){n(h,o,c,f,l,"throw",t)}f(void 0)}))}}},2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,c=n(60),h=n(79),component=n(109),f=n(110),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),d=new h.ErrorFactory("app","Firebase",l),v=((o={})["@firebase/app"]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),y=new f.Logger("@firebase/app"),m=function(){function t(t,e,n){var r,o,f=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=h.deepCopy(t),this.container=new component.ComponentContainer(e.name),this._addComponent(new component.Component("app",(function(){return f}),"PUBLIC"));try{for(var l=c.__values(this.firebase_.INTERNAL.components.values()),d=l.next();!d.done;d=l.next()){var v=d.value;this._addComponent(v)}}catch(t){r={error:t}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(component){try{this.container.addComponent(component)}catch(t){y.debug("Component "+component.name+" failed to register with FirebaseApp "+this.name,t)}},t.prototype._addOrOverwriteComponent=function(component){this.container.addOrOverwriteComponent(component)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw d.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var w=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={});if("object"!=typeof o||null===o){o={name:o}}var c=o;void 0===c.name&&(c.name="[DEFAULT]");var f=c.name;if("string"!=typeof f||!f)throw d.create("bad-app-name",{appName:String(f)});if(h.contains(e,f))throw d.create("duplicate-app",{appName:f});var l=new t(n,c,r);return e[f]=l,l},app:o,registerVersion:function(t,e,n){var r,o=null!==(r=v[t])&&void 0!==r?r:t;n&&(o+="-"+n);var c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){var f=['Unable to register library "'+o+'" with version "'+e+'":'];return c&&f.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),c&&h&&f.push("and"),h&&f.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void y.warn(f.join(" "))}l(new component.Component(o+"-version",(function(){return{library:o,version:e}}),"VERSION"))},setLogLevel:f.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw d.create("invalid-log-argument",{appName:name});f.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.13.2",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function o(t){if(t=t||"[DEFAULT]",!h.contains(e,t))throw d.create("no-app",{appName:t});return e[t]}function l(component){var f,l,v=component.name;if(n.has(v))return y.debug("There were multiple attempts to register component "+v+"."),"PUBLIC"===component.type?r[v]:null;if(n.set(v,component),"PUBLIC"===component.type){var m=function(t){if(void 0===t&&(t=o()),"function"!=typeof t[v])throw d.create("invalid-app-argument",{appName:v});return t[v]()};void 0!==component.serviceProps&&h.deepExtend(m,component.serviceProps),r[v]=m,t.prototype[v]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,v);return n.apply(this,component.multipleInstances?t:[])}}try{for(var w=c.__values(Object.keys(e)),I=w.next();!I.done;I=w.next()){var T=I.value;e[T]._addComponent(component)}}catch(t){f={error:t}}finally{try{I&&!I.done&&(l=w.return)&&l.call(w)}finally{if(f)throw f.error}}return"PUBLIC"===component.type?r[v]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),o.App=t,r}(m);return e.INTERNAL=c.__assign(c.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){h.deepExtend(e,t)},createSubscribe:h.createSubscribe,ErrorFactory:h.ErrorFactory,deepExtend:h.deepExtend}),e}(),I=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var component=t.getComponent();return"VERSION"===(null==component?void 0:component.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(h.isBrowser()&&void 0!==self.firebase){y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var T=self.firebase.SDK_VERSION;T&&T.indexOf("LITE")>=0&&y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var E=w.initializeApp;w.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h.isNode()&&y.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),E.apply(void 0,t)};var _=w;!function(t,e){t.INTERNAL.registerComponent(new component.Component("platform-logger",(function(t){return new I(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.1",e),t.registerVersion("fire-js","")}(_),e.default=_,e.firebase=_},20:function(t,e,n){"use strict";var r,o=(r=n(2))&&"object"==typeof r&&"default"in r?r.default:r;o.registerVersion("firebase","7.14.0","app"),t.exports=o},35:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return r}))},36:function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),h=c.default;void 0===h&&(h=[]);var f=c.placeholder;return n._isMounted?h:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||f)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||f):h.length>0?h.map((function(){return t(!1)})):t(!1))}};t.exports=r},4:function(t,e,n){"use strict";function r(t,e,n,r,o,c,h){try{var f=t[c](h),l=f.value}catch(t){return void n(t)}f.done?e(l):Promise.resolve(l).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,c){var h=t.apply(e,n);function f(t){r(h,o,c,f,l,"next",t)}function l(t){r(h,o,c,f,l,"throw",t)}f(void 0)}))}}n.d(e,"a",(function(){return o}))},45:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,r=!1,o=void 0;try{for(var c,h=t[Symbol.iterator]();!(n=(c=h.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==h.return||h.return()}finally{if(r)throw o}}return e}}(t,i)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return o}))},48:function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(c=n,h=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(h),"/*# ".concat(data," */")),o=n.sources.map((function(source){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(source," */")}));return[content].concat(o).concat([r]).join("\n")}var c,h,data;return[content].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(content,"}"):content})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var h=0;h<t.length;h++){var f=[].concat(t[h]);r&&o[f[0]]||(n&&(f[2]?f[2]="".concat(n," and ").concat(f[2]):f[2]=n),e.push(f))}},e}},49:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],c=o[0],h={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(h):n.push(r[c]={id:c,parts:[h]})}return n}n.r(e),n.d(e,"default",(function(){return m}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),h=null,f=0,l=!1,d=function(){},v=null,y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,n,o){l=n,v=o||{};var h=r(t,e);return w(h),function(e){for(var n=[],i=0;i<h.length;i++){var o=h[i];(f=c[o.id]).refs--,n.push(f)}e?w(h=r(t,e)):h=[];for(i=0;i<n.length;i++){var f;if(0===(f=n[i]).refs){for(var l=0;l<f.parts.length;l++)f.parts[l]();delete c[f.id]}}}}function w(t){for(var i=0;i<t.length;i++){var e=t[i],n=c[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(T(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(T(e.parts[r]));c[e.id]={id:e.id,refs:1,parts:o}}}}function I(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function T(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(l)return d;r.parentNode.removeChild(r)}if(y){var o=f++;r=h||(h=I()),e=A.bind(null,r,o,!1),n=A.bind(null,r,o,!0)}else r=I(),e=N.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var E,_=(E=[],function(t,e){return E[t]=e,E.filter(Boolean).join("\n")});function A(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,o);else{var c=document.createTextNode(o),h=t.childNodes;h[e]&&t.removeChild(h[e]),h.length?t.insertBefore(c,h[e]):t.appendChild(c)}}function N(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),v.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},60:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return T})),n.d(e,"__spreadArrays",(function(){return E})),n.d(e,"__await",(function(){return _})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return R})),n.d(e,"__classPrivateFieldSet",(function(){return C}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function T(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function E(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof _?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:_(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},65:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},79:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(60),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(t,e){if(!t)throw h(e)},h=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},f=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,t){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,h=c?input[i+2]:0,f=n>>2,l=(3&n)<<4|o>>4,d=(15&o)<<2|h>>6,v=63&h;c||(v=64,r||(d=64)),output.push(e[f],e[l],e[d],e[v])}return output.join("")},encodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(input):this.encodeByteArray(f(input),t)},decodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(input):function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=t[n++]))<<12|(63&(h=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{c=t[n++];var h=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&h)}}return e.join("")}(this.decodeStringToByteArray(input,t))},decodeStringToByteArray:function(input,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=e[input.charAt(i++)],r=i<input.length?e[input.charAt(i)]:0,o=++i<input.length?e[input.charAt(i)]:64,c=++i<input.length?e[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var h=n<<2|r>>4;if(output.push(h),64!==o){var f=r<<4&240|o>>2;if(output.push(f),64!==c){var l=o<<6&192|c;output.push(l)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},d=function(t){try{return l.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v(t,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return source}for(var e in source)source.hasOwnProperty(e)&&(t[e]=v(t[e],source[e]));return t}var y=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w=function(t){function e(code,n){var r=t.call(this,n)||this;return r.code=code,r.name="FirebaseError",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,I.prototype.create),r}return r.__extends(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(code){for(var data=[],t=1;t<arguments.length;t++)data[t-1]=arguments[t];for(var e=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?T(template,e):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new w(n,o),h=0,f=Object.keys(e);h<f.length;h++){var l=f[h];"_"!==l.slice(-1)&&(l in c&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),c[l]=e[l])}return c},t}();function T(template,data){return template.replace(E,(function(t,e){var n=data[e];return null!=n?n.toString():"<"+e+"?>"}))}var E=/\{\$([^}]+)}/g;function _(t){return JSON.parse(t)}var A=function(t){var header={},e={},data={},n="";try{var r=t.split(".");header=_(d(r[0])||""),e=_(d(r[1])||""),n=r[2],data=e.d||{},delete e.d}catch(t){}return{header:header,claims:e,data:data,signature:n}};var N=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],h=this.chain_[2],f=this.chain_[3],l=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=f^b&(h^f),c=1518500249):(o=b^h^f,c=1859775393):i<60?(o=b&h|f&(b|h),c=2400959708):(o=b^h^f,c=3395469782);r=(a<<5|a>>>27)+o+l+c+n[i]&4294967295;l=f,f=h,h=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<e;){if(0===c)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(o[c]=t.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<e;)if(o[c]=t[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t},t}();var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),c},t.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,t)},t.prototype.sendOne=function(i,t){var e=this;this.task.then((function(){if(void 0!==e.observers&&void 0!==e.observers[i])try{t(e.observers[i])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function k(){}function O(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=r+" argument "}e.CONSTANTS=o,e.Deferred=y,e.ErrorFactory=I,e.FirebaseError=w,e.Sha1=N,e.assert=c,e.assertionError=h,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=l,e.base64Decode=d,e.base64Encode=function(t){var e=f(t);return l.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.decode=A,e.deepCopy=function(t){return v(void 0,t)},e.deepExtend=v,e.errorPrefix=O,e.getUA=m,e.isAdmin=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return m().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return m().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=A(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),o=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},e.issuedAtTime=function(t){var e=A(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=_,e.map=function(t,e,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,o=Object.entries(t);r<o.length;r++){var c=o[r];n(c[0],c[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var p=0,i=0;i<t.length;i++){var e=t.charCodeAt(i);e<128?p++:e<2048?p+=2:e>=55296&&e<=56319?(p+=4,i++):p+=3}return p},e.stringToByteArray=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,c(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(i)-56320)}n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):n<65536?(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},e.stringify=function(data){return JSON.stringify(data)},e.validateArgCount=function(t,e,n,r){var o;if(r<e?o="at least "+e:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(O(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(O(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(O(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(17))},81:function(t,e,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),h=c.default;void 0===h&&(h=[]);var f=c.placeholder;return n._isMounted?h:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||f)?t(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||f):h.length>0?h.map((function(){return t(!1)})):t(!1))}};t.exports=r}}]);